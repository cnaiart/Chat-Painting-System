import{a as B,b as R,q as _,a1 as z,o as f,h as y,e,u as a,t as d,y as g,f as s,w as o,z as i,c as N,F as S,dk as U,H as j,B as D,K as L}from"./entry.c7e0e7b4.js";import{E as q}from"./index.391b7542.js";import{E as A}from"./index.222a6e13.js";import"./el-form-item.4ed993c7.js";/* empty css                  */import{u as x}from"./useLockFn.d62becec.js";import{c as I,u as H}from"./redeem_code.1ecb29ac.js";const K={class:"h-full bg-white rounded-[12px] p-[20px]"},Q={key:0,class:"flex text-[#F7A935] mt-[20px] p-[12px] rounded max-w-[1000px] mx-auto justify-center",style:{background:`linear-gradient(
                    -88.46deg,
                    rgba(252, 245, 232, 0) 1.34%,
                    rgba(252, 245, 232, 1) 50.41%,
                    rgba(252, 245, 245, 0) 99.48%
                )`}},T={class:"flex pr-[20rpx]"},$=e("span",{class:"mr-[10px]"},"购买链接:",-1),G={class:"flex justify-center mt-[60px]"},J=e("div",{class:"text-lg text-center font-medium"},"查询结果",-1),M={class:"h-full"},O={class:"flex-1 flex justify-center items-center bg-white pt-[20px]"},ae=B({__name:"redeem-code",setup(P){const k=R(),l=_(""),r=_(!1),n=_({content:"",failure_time:"",id:"",sn:"",type:"",type_desc:"",valid_time:""}),p=z(()=>k.getCardCodeConfig),h=t=>{U(t)},{isLock:C,lockFn:b}=x(async()=>{try{const t=await I({sn:l.value});r.value=!0,n.value=t}catch(t){l.value="",console.log("查询卡密失败=>",t)}}),{isLock:w,lockFn:V}=x(async()=>{try{await H({sn:l.value}),L.msgSuccess("兑换成功"),r.value=!1,l.value=""}catch(t){console.log("兑换卡密失败=>",t)}});return(t,c)=>{const E=j,v=D,u=q,F=A;return f(),y(S,null,[e("div",K,[a(p).is_show?(f(),y("div",Q,[e("div",T,[$,e("span",null,d(a(p).buy_site),1)]),e("div",{class:"underline cursor-pointer ml-[30px]",onClick:c[0]||(c[0]=m=>h(a(p).buy_site))}," 复制链接 ")])):g("",!0),e("div",G,[s(E,{modelValue:l.value,"onUpdate:modelValue":c[1]||(c[1]=m=>l.value=m),size:"large",style:{width:"500px"},placeholder:"请输入卡密编号"},null,8,["modelValue"]),s(v,{type:"primary",size:"large",class:"ml-[20px]",loading:a(C),onClick:a(b)},{default:o(()=>[i(" 查询 ")]),_:1},8,["loading","onClick"])])]),s(F,{modelValue:r.value,"onUpdate:modelValue":c[2]||(c[2]=m=>r.value=m),width:"400","append-to-body":""},{header:o(()=>[J]),default:o(()=>[e("div",M,[s(u,{label:"卡密类型："},{default:o(()=>[i(d(n.value.type_desc),1)]),_:1}),s(u,{label:"卡密面额："},{default:o(()=>[i(d(n.value.content),1)]),_:1}),s(u,{label:"兑换时间："},{default:o(()=>[i(d(n.value.failure_time),1)]),_:1}),n.value.valid_time?(f(),N(u,{key:0,label:"有效期至："},{default:o(()=>[i(d(n.value.valid_time),1)]),_:1})):g("",!0)]),e("div",O,[s(v,{type:"primary",size:"large",loading:a(w),onClick:a(V)},{default:o(()=>[i(" 立即兑换 ")]),_:1},8,["loading","onClick"])])]),_:1},8,["modelValue"])],64)}}});export{ae as _};
