import{_ as P}from"./index.vue.3dfb5dc9.js";import{a as U,S as E,b as $,O as L,q as x,s as z,o as B,h as q,e as o,f as n,w as m,z as y,u as i,x as w,c as A,y as D,i as J,aE as O,K as I,B as M,p as j,l as G}from"./entry.c7e0e7b4.js";import{L as H}from"./index.4612bf49.js";import{E as K}from"./index.ade63ee3.js";import{_ as F,a as Q}from"./model-picker.vue.0083d776.js";/* empty css                     */import{c as W}from"./chat.bab8475b.js";import{w as X}from"./index.cb3770be.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.222a6e13.js";import"./refs.94480413.js";/* empty css                  */import"./recharge.573a4938.js";import"./index.ba068d27.js";import"./index.aad710b7.js";import"./index.cd5f7601.js";import"./strings.d42ea6f6.js";import"./isEqual.5a66db24.js";import"./_getTag.b4ecd864.js";import"./debounce.2af106a8.js";/* empty css                  *//* empty css               *//* empty css                  */import"./index.fa4f9017.js";const k=u=>(j("data-v-2525f849"),u=u(),G(),u),Z={class:"bg-white w-[330px] h-full flex flex-col"},ee={class:"flex-1 min-h-0"},te={class:"px-[15px] py-[15px]"},oe={class:"border-b border-br-light border-solid pb-[12px] flex items-end justify-between"},se=k(()=>o("h3",{class:"text-xl font-medium"},"思维导图",-1)),ae={class:"mt-[10px]"},le=k(()=>o("h3",{class:"font-bold"},[o("span",null,"帮我生成"),o("span",{class:"text-error"},"*")],-1)),ne={class:"mt-[10px] flex"},re={class:"mt-[15px]"},ie={class:"flex"},pe=k(()=>o("h3",{class:"font-bold mr-auto"},[o("span",null,"需求描述")],-1)),ce={class:"px-[15px] pb-[20px]"},de=U({__name:"control-panel",emits:["update","history"],setup(u,{expose:T,emit:S}){const C=E(),h=$(),v=L(),p=x(""),s=x(""),g=E(null),f=x(""),a=x(!1),R=async()=>{if(!v.isLogin)return v.toggleShowLogin();if(!p.value)return I.msgError("请输入内容");if(!a.value)try{a.value=!0,await W({model:f.value,question:p.value,type:4},{onstart(){s.value=""},onmessage(e){e.trim().split("data:").forEach(async t=>{var _;if(t!=="")try{const c=JSON.parse(t),{event:r,data:d,code:b}=c;if(r=="error"&&b===101?(_=C.value)==null||_.open():r=="error"&&I.msgError(d),r=="chat"&&d&&(s.value+=d),r==="finish")return}catch{a.value=!1}})},onclose(){v.getUser(),a.value=!1,V()}})}catch{a.value=!1}},V=()=>{var e,t;(t=g.value)==null||t.scrollTo({top:(e=g.value)==null?void 0:e.scrollHeight})};return X(s,e=>{S("update",e),a.value&&V()},{throttle:500}),z(()=>h.getMindMapConfig,e=>{e!=null&&e.is_example&&(s.value=e==null?void 0:e.example_content)},{immediate:!0}),T({changDescInput(e){s.value=e}}),(e,t)=>{const _=P,c=M,r=H,d=M,b=K,N=Q;return B(),q("div",Z,[o("div",ee,[n(b,null,{default:m(()=>[o("div",te,[o("div",oe,[se,n(c,{link:"",type:"info",onClick:t[0]||(t[0]=l=>S("history"))},{icon:m(()=>[n(_,{name:"el-icon-Clock"})]),default:m(()=>[y(" 生成记录 ")]),_:1})]),o("div",ae,[o("div",null,[le,o("div",ne,[n(r,{modelValue:i(p),"onUpdate:modelValue":t[1]||(t[1]=l=>w(p)?p.value=l:null),maxlength:"1024",rows:7,clearable:!0,"show-word-limit":!1,customStyle:{paddingBottom:"24px"},placeholder:"请输入简单描述，AI将智能输出markdown内容"},null,8,["modelValue"])])]),o("div",re,[o("div",ie,[pe,i(h).getMindMapConfig.is_example?(B(),A(d,{key:0,link:"",type:"primary",onClick:t[2]||(t[2]=l=>s.value=i(h).getMindMapConfig.example_content)},{default:m(()=>[y(" 试试示例 ")]),_:1})):D("",!0)]),J(o("textarea",{ref_key:"textareaRef",ref:g,"onUpdate:modelValue":t[3]||(t[3]=l=>w(s)?s.value=l:null),class:"bg-page h-[400px] w-full mt-[10px] rounded p-[10px] resize-none"},null,512),[[O,i(s)]])])])])]),_:1})]),o("div",ce,[n(F,{modelValue:i(f),"onUpdate:modelValue":t[4]||(t[4]=l=>w(f)?f.value=l:null)},null,8,["modelValue"]),n(c,{size:"large",type:"primary",round:"",class:"w-full submit-btn !border-none",onClick:R,loading:i(a)},{default:m(()=>[y(" 生成思维导图描述 ")]),_:1},8,["loading"])]),n(N,{ref_key:"guidedPopupRef",ref:C},null,512)])}}});const $e=Y(de,[["__scopeId","data-v-2525f849"]]);export{$e as default};
