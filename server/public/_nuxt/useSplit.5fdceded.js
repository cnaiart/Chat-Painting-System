const p=(g,h)=>{const{columns:a,rows:i}=h;if(!g)throw Error("请传入图片地址");if(!a&&!i)throw Error("请传入columns和rows");const u=()=>new Promise((o,s)=>{const t=new Image;t.setAttribute("src",g),t.setAttribute("crossOrigin",""),t.onload=()=>{console.log("loading??"),o(m(t.width,t.height,t))},t.onerror=e=>{s(e)}}),m=(o,s,t)=>{const e=document.createElement("canvas");e.width=o,e.height=s;const n=e.getContext("2d");return n.drawImage(t,0,0,o,s),d(n)},d=o=>{const s=o.canvas.width/a,t=o.canvas.height/i,e=[];for(let n=0;n<i;n++){const r=[];for(let c=0;c<a;c++){console.log("i:"+n+";k:"+c);const l=w(o,c*s,n*t,s,t);r.push(l)}e.push(...r)}return e},w=(o,s,t,e,n)=>{const r=document.createElement("canvas");r.width=e,r.height=n;const c=o.getImageData(s,t,e,n);return r.getContext("2d").putImageData(c,0,0),r.toDataURL("image/png",1)};return{getImages:u}};export{p as useSplit};
