import{a as I,aW as We,aa as J,a1 as S,o as i,h as b,N as Z,k as Q,u as e,a9 as ee,G as me,aH as Ke,aI as ie,O as U,b as H,S as P,q,f as o,w as s,e as r,t as D,y as v,c as k,x as ne,F as G,z as $,dC as Ye,H as B,p as Xe,l as Je,cC as Ce,dF as T,ab as Ze,M as Ve,V as Qe,i as et,v as tt,cB as ot,B as A,aA as st,C as z,K as lt,dJ as re,dK as W,r as Ie,dg as ae,s as _e,dL as nt,dM as ge,cX as at,dN as it}from"./entry.c7e0e7b4.js";import{E as rt}from"./index.67b2792c.js";import{_ as ct}from"./index.vue.d7b8d06a.js";import{E as N,a as Y}from"./index.391b7542.js";import{_ as $e}from"./index.vue.3dfb5dc9.js";import{E as dt}from"./el-drawer.8c2988a2.js";/* empty css                  */import"./el-form-item.4ed993c7.js";/* empty css                */import{_ as ce}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ut}from"./client-only.97a86643.js";import{E as Le,a as Se}from"./index.d6409eae.js";import{_ as Oe}from"./nuxt-link.a0b868a3.js";/* empty css                */import{u as pt}from"./usePolling.272d8056.js";import{g as mt,c as _t,a as ft,b as Re,s as Te,r as ht}from"./account.75934049.js";import{E as Ne}from"./index.0b9306dd.js";import{g as gt}from"./index.cb3770be.js";import{u as te}from"./useLockFn.d62becec.js";import{E as de,a as ue}from"./index.ba068d27.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import{E as Me}from"./index.222a6e13.js";import{E as yt}from"./index.ade63ee3.js";const vt=I({name:"ElContainer"}),xt=I({...vt,props:{direction:{type:String}},setup(n){const t=n,l=We(),d=J("container"),p=S(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:l&&l.default?l.default().some(c=>{const a=c.type.name;return a==="ElHeader"||a==="ElFooter"}):!1);return(u,c)=>(i(),b("section",{class:Q([e(d).b(),e(d).is("vertical",e(p))])},[Z(u.$slots,"default")],2))}});var wt=ee(xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const kt=I({name:"ElAside"}),bt=I({...kt,props:{width:{type:String,default:null}},setup(n){const t=n,l=J("aside"),d=S(()=>t.width?l.cssVarBlock({width:t.width}):{});return(p,u)=>(i(),b("aside",{class:Q(e(l).b()),style:me(e(d))},[Z(p.$slots,"default")],6))}});var De=ee(bt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Et=I({name:"ElFooter"}),Ct=I({...Et,props:{height:{type:String,default:null}},setup(n){const t=n,l=J("footer"),d=S(()=>t.height?l.cssVarBlock({height:t.height}):{});return(p,u)=>(i(),b("footer",{class:Q(e(l).b()),style:me(e(d))},[Z(p.$slots,"default")],6))}});var Fe=ee(Ct,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Vt=I({name:"ElHeader"}),It=I({...Vt,props:{height:{type:String,default:null}},setup(n){const t=n,l=J("header"),d=S(()=>t.height?l.cssVarBlock({height:t.height}):{});return(p,u)=>(i(),b("header",{class:Q(e(l).b()),style:me(e(d))},[Z(p.$slots,"default")],6))}});var Be=ee(It,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const $t=I({name:"ElMain"}),Lt=I({...$t,setup(n){const t=J("main");return(l,d)=>(i(),b("main",{class:Q(e(t).b())},[Z(l.$slots,"default")],2))}});var Ae=ee(Lt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const Os=Ke(wt,{Aside:De,Footer:Fe,Header:Be,Main:Ae}),Rs=ie(De),Ts=ie(Fe),Ns=ie(Be),Ms=ie(Ae),Ue=n=>(Xe("data-v-776bace1"),n=n(),Je(),n),St={class:"user-info"},Ot={class:"flex items-center"},Rt={class:"change-btn"},Tt={class:"flex items-center"},Nt={key:0},Mt=Ue(()=>r("span",{class:"text-tx-secondary"},"（如需修改，请前往移动端修改）",-1)),Dt=Ue(()=>r("div",{class:"font-bold !text-[#333] mb-[20px]"},"我的资产",-1)),Ft={class:"text-[#F0AB43]"},Bt={key:0},At={key:1},Ut=I({__name:"user-info",setup(n,{expose:t}){const l=U(),d=H(),p=P(!1),u=q(!1),c=q(""),a=S(()=>{var E,g;return(g=(E=d.config)==null?void 0:E.member_package_time_view)==null?void 0:g.includes("2")}),w=()=>{p.value=!0},_=async(E,g)=>{await Ye({value:E,field:g}),u.value=!1,l.getUser()};return t({open:w}),(E,g)=>{const C=rt,m=ct,f=N,V=B,L=$e,R=Y,y=dt;return i(),b("div",St,[o(y,{modelValue:e(p),"onUpdate:modelValue":g[5]||(g[5]=h=>ne(p)?p.value=h:null),title:"个人信息"},{default:s(()=>[o(R,{"label-width":"90px","label-position":"left"},{default:s(()=>[o(f,{label:"用户头像"},{default:s(()=>[r("div",Ot,[r("div",Rt,[o(m,{onChange:g[0]||(g[0]=h=>_(h,"avatar"))},{default:s(()=>[o(C,{size:60,src:e(l).userInfo.avatar},null,8,["src"])]),_:1})])])]),_:1}),o(f,{label:"用户昵称"},{default:s(()=>[r("div",Tt,[e(u)?v("",!0):(i(),b("div",Nt,D(e(l).userInfo.nickname),1)),e(u)?(i(),k(V,{key:1,modelValue:e(c),"onUpdate:modelValue":g[1]||(g[1]=h=>ne(c)?c.value=h:null),size:"small"},null,8,["modelValue"])):v("",!0),e(u)?(i(),b(G,{key:2},[r("div",{class:"cursor-pointer mr-[6px] flex",onClick:g[2]||(g[2]=h=>_(e(c),"nickname"))},[o(L,{name:"el-icon-Select"})]),r("div",{class:"cursor-pointer flex",onClick:g[3]||(g[3]=h=>u.value=!1)},[o(L,{name:"el-icon-CloseBold"})])],64)):(i(),b("div",{key:3,class:"cursor-pointer ml-[6px] flex text-primary",onClick:g[4]||(g[4]=h=>u.value=!0)},[o(L,{class:"ml-2",name:"el-icon-EditPen"})]))])]),_:1}),o(f,{label:"用户ID"},{default:s(()=>[r("div",null,D(e(l).userInfo.sn),1)]),_:1}),o(f,{label:"邀请人"},{default:s(()=>[r("div",null,D(e(l).userInfo.inviter_name||"-"),1)]),_:1}),o(f,{label:"手机号码"},{default:s(()=>[r("div",null,[$(D(e(l).userInfo.mobile||"-")+" ",1),Mt])]),_:1}),o(f,{label:"注册时间"},{default:s(()=>[r("div",null,D(e(l).userInfo.create_time),1)]),_:1}),Dt,o(f,{label:"对话余额"},{default:s(()=>[r("div",null,D(e(l).userInfo.balance)+"条",1)]),_:1}),e(d).getDrawConfig.is_open?(i(),k(f,{key:0,label:"绘画余额"},{default:s(()=>[r("div",null,D(e(l).userInfo.balance_draw)+"条",1)]),_:1})):v("",!0),e(a)?(i(),k(f,{key:1,label:"vip会员"},{default:s(()=>[r("div",Ft,[e(l).userInfo.is_member==0?(i(),b("span",Bt,"未开通")):(i(),b("span",At,D(e(l).userInfo.member_package_name)+" （"+D(e(l).userInfo.member_end_time)+"） ",1))])]),_:1})):v("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});const Ds=ce(Ut,[["__scopeId","data-v-776bace1"]]),ye=U(),Pt=H(),Gt=()=>{const n=Ce(()=>({pending:!0,data:{}}),"$bIUlfDBlAZ");return{state:n,getData:async()=>{try{n.value.pending=!0;const l=await mt();n.value.data=l,n.value.pending=!1}catch(l){return n.value.pending=!1,Promise.reject(l)}}}};var M=(n=>(n[n.CODE_ERROR=-1]="CODE_ERROR",n[n.INVALID=0]="INVALID",n[n.NORMAL=1]="NORMAL",n[n.SCANNED_CODE=2]="SCANNED_CODE",n[n.LOGIN_FAIL=3]="LOGIN_FAIL",n[n.LOGIN_SUCCESS=4]="LOGIN_SUCCESS",n))(M||{});const qt=n=>{const t=Ce(()=>1,"$NGaqqB8ke0"),l=async()=>{try{const a=await _t({key:n.value.key});return t.value=a.status,t.value==4&&(Ht(a.user),u()),a}catch{t.value=3}},d=()=>{t.value=0},{start:p,end:u,result:c}=pt(l,{totalTime:120*1e3,callback:d});return{status:t,start:p,end:u,result:c}},Ht=async n=>{const{login:t,setUser:l,toggleShowLogin:d,setLoginPopupType:p}=ye;!n.mobile&&Pt.getLoginConfig.coerce_mobile?(ye.temToken=n.token,p(T.BIND_MOBILE)):(t(n.token),l(n),d(!1),location.reload())},jt={class:"pb-[10px]"},zt={class:"flex flex-col items-center mt-[20px]"},Wt={class:"relative w-[180px] h-[180px]"},Kt={key:1,class:"absolute left-0 top-0 w-full h-full bg-mask"},Yt={class:"h-full text-primary flex justify-center items-center"},Xt=r("div",{class:"h-full flex flex-col justify-center items-center text-white"},[r("div",null,"点击刷新")],-1),Jt=[Xt],Zt=r("div",{class:"mt-3"},"扫码成功",-1),Qt=r("div",{class:"mt-5 text-error text-sm"}," 请在微信公众号中确认登录 ",-1),eo=r("div",{class:"mt-3 text-error"},"二维码失效",-1),to=r("div",{class:"mt-5 text-sm"},"请在点击二维码刷新",-1),oo=r("div",{class:"mt-3 text-error"},"登录失败，请重新登录",-1),so=r("div",{class:"mt-5 text-sm"},"请在点击二维码刷新",-1),lo=r("div",{class:"mt-3"},"微信扫码登录/注册",-1),no=r("div",{class:"mt-5 text-tx-secondary text-sm"}," 首次扫码关注公众号后将自动注册新账号 ",-1),ao=I({__name:"weixin-login",setup(n){U();const{state:t,getData:l}=Gt(),{pending:d,data:p}=Ze(t.value),{start:u,end:c,status:a}=qt(p),w=async()=>{a.value=M.NORMAL;try{await l(),u()}catch{a.value=M.CODE_ERROR}};return Ve(()=>{w()}),Qe(()=>{c()}),(_,E)=>{const g=$e,C=tt;return i(),b("div",jt,[r("div",zt,[et((i(),b("div",Wt,[e(p).url?(i(),k(e(Ne),{key:0,src:e(p).url,class:"w-full h-full"},null,8,["src"])):v("",!0),e(a)==e(M).SCANNED_CODE?(i(),b("div",Kt,[r("div",Yt,[o(g,{name:"el-icon-SuccessFilled",size:30})])])):v("",!0),e(a)==e(M).INVALID||e(a)==e(M).LOGIN_FAIL||e(a)==e(M).CODE_ERROR?(i(),b("div",{key:2,class:"absolute left-0 top-0 w-full h-full bg-overlay cursor-pointer",onClick:w},Jt)):v("",!0)])),[[C,e(d)]]),e(a)==e(M).SCANNED_CODE?(i(),b(G,{key:0},[Zt,Qt],64)):v("",!0),e(a)==e(M).INVALID?(i(),b(G,{key:1},[eo,to],64)):v("",!0),e(a)==e(M).LOGIN_FAIL?(i(),b(G,{key:2},[oo,so],64)):v("",!0),e(a)==e(M).NORMAL||e(a)==e(M).LOGIN_SUCCESS||e(a)==e(M).CODE_ERROR?(i(),b(G,{key:3},[lo,no],64)):v("",!0)])])}}});/*! vue-countdown v2.1.1 | (c) 2018-present Chen Fengyuan | MIT */const oe=1e3,se=60*oe,le=60*se,ve=24*le,xe="abort",we="end",ke="progress",be="start",Ee="visibilitychange";var io=I({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:n=>n>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:n=>n>=0},transform:{type:Function,default:n=>n}},emits:[xe,we,ke,be],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/ve)},hours(){return Math.floor(this.totalMilliseconds%ve/le)},minutes(){return Math.floor(this.totalMilliseconds%le/se)},seconds(){return Math.floor(this.totalMilliseconds%se/oe)},milliseconds(){return Math.floor(this.totalMilliseconds%oe)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/le)},totalMinutes(){return Math.floor(this.totalMilliseconds/se)},totalSeconds(){return Math.floor(this.totalMilliseconds/oe)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(Ee,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(Ee,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.emitEvents&&this.$emit(be),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const n=Math.min(this.totalMilliseconds,this.interval);if(n>0){let t,l;const d=p=>{t||(t=p),l||(l=p);const u=p-t;u>=n||u+(p-l)/2>=n?this.progress():this.requestId=requestAnimationFrame(d),l=p};this.requestId=requestAnimationFrame(d)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(ke,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(xe))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(we))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return ot(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const ro=I({components:{VueCountdown:io,ElButton:A},props:{seconds:{type:Number,default:60},startText:{type:String,default:"获取验证码"},changeText:{type:String,default:"x秒重新获取"},endText:{type:String,default:"重新获取"}},emits:["click-get"],setup(n,{emit:t}){const l=q(!1),d=q(!1),p=async()=>{l.value=!0},u=w=>n.changeText.replace("x",w),c=()=>{l.value=!1,d.value=!0},a=gt(()=>{t("click-get")},1e3,!1);return{getChangeText:u,isStart:l,start:p,isRetry:d,handleEnd:c,handlStart:a}}});function co(n,t,l,d,p,u){const c=A,a=st("VueCountdown");return n.isStart?(i(),k(a,{key:1,ref:"vueCountdownRef",time:n.seconds*1e3,onEnd:n.handleEnd},{default:s(({totalSeconds:w})=>[$(D(n.getChangeText(w)),1)]),_:1},8,["time","onEnd"])):(i(),k(c,{key:0,onClick:n.handlStart,link:""},{default:s(()=>[$(D(n.isRetry?n.endText:n.startText),1)]),_:1},8,["onClick"]))}const pe=ce(ro,[["render",co]]),Pe=()=>{const n=q(""),t=q(""),l=async()=>{try{const d=await ft();n.value=d.key,t.value=d.image}catch(d){console.log("获取图形码失败=>",d)}};return Ve(l),{captchaKey:n,captchaImage:t,getCaptchaFn:l}},uo={class:"pb-[28px]"},po={class:"mt-[20px]"},mo={class:"flex justify-center leading-5 w-[90px] cursor-pointer"},_o=["src"],fo={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},ho={class:"flex"},go={class:"flex-1"},yo=I({__name:"mobile-login",setup(n){const t=U(),l=H(),{captchaKey:d,captchaImage:p,getCaptchaFn:u}=Pe(),c=P(),a={mobile:[{required:!0,message:"请输入手机号"}],password:[{required:!0,message:"请输入密码"}],captcha:[{required:!0,message:"请输入图形验证码"}],code:[{required:!0,message:"请输入验证码"}]},w=z({error:"",status:""}),_=z({code:"",mobile:"",captcha:"",password:"",scene:2}),E=S(()=>_.scene===4),g=S(()=>_.scene===2),C=R=>{u(),_.scene=R},m=P(),f=async()=>{var R,y;if(!_.captcha.length&&l.getLoginConfig.is_captcha){lt.msgError("请先输入图形验证码");return}await((R=c.value)==null?void 0:R.validateField(["mobile"])),await re({key:d.value,captcha:_.captcha,scene:W.LOGIN,mobile:_.mobile}),(y=m.value)==null||y.start()},{lockFn:V,isLock:L}=te(async()=>{var R;await((R=c.value)==null?void 0:R.validate());try{const y=await Re({..._,key:d.value,captcha:_.captcha});t.login(y.token),location.reload(),await t.getUser(),t.toggleShowLogin(!1)}catch(y){y=="密码错误"&&(w.error=y,w.status="error"),u(),console.log(y)}});return(R,y)=>{const h=pe;return i(),b("div",uo,[r("div",po,[o(e(Y),{ref_key:"formRef",ref:c,size:"large",model:e(_),rules:a},{default:s(()=>[o(e(N),{prop:"mobile"},{default:s(()=>[o(e(B),{modelValue:e(_).mobile,"onUpdate:modelValue":y[0]||(y[0]=x=>e(_).mobile=x),placeholder:"请输入手机号"},{prepend:s(()=>[o(e(de),{"model-value":"+86",style:{width:"80px"}},{default:s(()=>[o(e(ue),{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(l).getLoginConfig.is_captcha?(i(),k(e(N),{key:0,prop:"captcha"},{default:s(()=>[o(e(B),{modelValue:e(_).captcha,"onUpdate:modelValue":y[2]||(y[2]=x=>e(_).captcha=x),placeholder:"图形验证码"},{suffix:s(()=>[r("div",mo,[r("img",{src:e(p),title:"点击刷新",alt:"验证码",onClick:y[1]||(y[1]=(...x)=>e(u)&&e(u)(...x))},null,8,_o)])]),_:1},8,["modelValue"])]),_:1})):v("",!0),e(g)?(i(),k(e(N),{key:1,prop:"password",error:e(w).error,"validate-status":e(w).status},{default:s(()=>[o(e(B),{modelValue:e(_).password,"onUpdate:modelValue":y[3]||(y[3]=x=>e(_).password=x),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1},8,["error","validate-status"])):v("",!0),e(E)?(i(),k(e(N),{key:2,prop:"code"},{default:s(()=>[o(e(B),{modelValue:e(_).code,"onUpdate:modelValue":y[4]||(y[4]=x=>e(_).code=x),placeholder:"请输入验证码"},{suffix:s(()=>[r("div",fo,[o(h,{ref_key:"verificationCodeRef",ref:m,onClickGet:f},null,512)])]),_:1},8,["modelValue"])]),_:1})):v("",!0),r("div",ho,[r("div",go,[e(g)?(i(),k(e(A),{key:0,type:"primary",link:"",onClick:y[5]||(y[5]=x=>C(4))},{default:s(()=>[$(" 手机验证码登录 ")]),_:1})):v("",!0),e(E)?(i(),k(e(A),{key:1,type:"primary",link:"",onClick:y[6]||(y[6]=x=>C(2))},{default:s(()=>[$(" 手机密码登录 ")]),_:1})):v("",!0)]),e(g)?(i(),k(e(A),{key:0,link:"",onClick:y[7]||(y[7]=x=>e(t).setLoginPopupType(e(T).FORGOT_PWD_MOBILE))},{default:s(()=>[$(" 忘记密码？ ")]),_:1})):v("",!0)]),o(e(N),{class:"mt-[30px]"},{default:s(()=>[o(e(A),{class:"w-full",type:"primary",loading:e(L),onClick:e(V)},{default:s(()=>[$(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])])}}}),vo={class:"pb-[28px]"},xo={class:"mt-[20px]"},wo={class:"flex justify-center leading-5 w-[90px] cursor-pointer"},ko=["src"],bo={class:"flex justify-end"},Eo=I({__name:"mailbox-login",setup(n){const t=U(),l=H(),{captchaKey:d,captchaImage:p,getCaptchaFn:u}=Pe(),c=P(),a={email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],captcha:[{required:!0,message:"请输入图形验证码"}],password:[{required:!0,message:"请输入密码"}]},w=z({error:"",status:""}),_=z({email:"",password:"",captcha:"",scene:3}),{lockFn:E,isLock:g}=te(async()=>{var C;try{await((C=c.value)==null?void 0:C.validate());const m=await Re({..._,key:d.value,captcha:_.captcha});!m.mobile&&l.getLoginConfig.coerce_mobile?(t.temToken=m.token,t.setLoginPopupType(T.BIND_MOBILE)):(t.login(m.token),t.setUser(m),t.toggleShowLogin(!1),location.reload())}catch(m){m=="密码错误"&&(w.error=m,w.status="error"),u(),console.log(m)}});return(C,m)=>{const f=A,V=Y;return i(),b("div",vo,[r("div",xo,[o(V,{ref_key:"formRef",ref:c,size:"large",model:e(_),rules:a},{default:s(()=>[o(e(N),{prop:"email"},{default:s(()=>[o(e(B),{modelValue:e(_).email,"onUpdate:modelValue":m[0]||(m[0]=L=>e(_).email=L),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1}),e(l).getLoginConfig.is_captcha?(i(),k(e(N),{key:0,prop:"captcha"},{default:s(()=>[o(e(B),{modelValue:e(_).captcha,"onUpdate:modelValue":m[2]||(m[2]=L=>e(_).captcha=L),placeholder:"图形验证码"},{suffix:s(()=>[r("div",wo,[r("img",{src:e(p),title:"点击刷新",alt:"验证码",onClick:m[1]||(m[1]=(...L)=>e(u)&&e(u)(...L))},null,8,ko)])]),_:1},8,["modelValue"])]),_:1})):v("",!0),o(e(N),{prop:"password",error:e(w).error,"validate-status":e(w).status},{default:s(()=>[o(e(B),{modelValue:e(_).password,"onUpdate:modelValue":m[3]||(m[3]=L=>e(_).password=L),type:"password","show-password":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1},8,["error","validate-status"]),r("div",bo,[o(f,{link:"",onClick:m[4]||(m[4]=L=>e(t).setLoginPopupType(e(T).FORGOT_PWD_MAILBOX))},{default:s(()=>[$(" 忘记密码？ ")]),_:1})]),o(e(N),{class:"my-[30px]"},{default:s(()=>[o(f,{class:"w-full",type:"primary",loading:e(g),onClick:e(E)},{default:s(()=>[$(" 登录 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])])}}}),Co={class:"flex-1 pt-[30px] px-[30px] min-h-0"},Vo={class:"bg-[#f4f4f4] px-[20px] py-[15px] text-sm flex"},Io={key:0,class:"flex-1 text-tx-secondary"},$o=["href"],Lo=["href"],So=I({__name:"index",setup(n){const t=H(),l=U(),d=S(()=>t.getLoginConfig.login_agreement==1),p=[{name:"微信登录",type:"1"},{name:"手机号登录",type:"2"},{name:"邮箱登录",type:"3"}],u=S(()=>{var E;return((E=t.getLoginConfig)==null?void 0:E.login_way)||[]}),c=S(()=>p.filter(E=>u.value.includes(E.type))),a=S(()=>(w.value=t.getLoginConfig.default_login_way.toString(),t.getLoginConfig.default_login_way.toString())),w=q(2),_=E=>{w.value=E};return(E,g)=>{const C=Se,m=Le,f=Oe;return i(),b(G,null,[r("div",Co,[o(m,{"model-value":e(a),onTabChange:_},{default:s(()=>[(i(!0),b(G,null,Ie(e(c),(V,L)=>(i(),k(C,{key:L,label:V.name,name:V.type},{default:s(()=>[V.type==="1"&&e(w)=="1"?(i(),k(ao,{key:0})):v("",!0),V.type==="2"?(i(),k(yo,{key:1})):v("",!0),V.type==="3"?(i(),k(Eo,{key:2})):v("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["model-value"])]),r("div",Vo,[e(d)?(i(),b("div",Io,[$(" 您登录即同意 "),o(f,{to:`/policy/${e(ae).SERVICE}`,custom:""},{default:s(({href:V})=>[r("a",{class:"text-tx-primary",href:V,target:"_blank"}," 用户协议 ",8,$o)]),_:1},8,["to"]),$(" 和 "),o(f,{class:"text-tx-primary",to:`/policy/${e(ae).PRIVACY}`,custom:""},{default:s(({href:V})=>[r("a",{class:"text-tx-primary",href:V,target:"_blank"}," 隐私政策 ",8,Lo)]),_:1},8,["to"])])):v("",!0),e(w)!="1"?(i(),k(e(A),{key:1,type:"primary",link:"",onClick:g[0]||(g[0]=V=>e(l).setLoginPopupType(e(T).REGISTER))},{default:s(()=>[$(" 注册新账号 ")]),_:1})):v("",!0)])],64)}}});const Oo={class:"flex-1 flex flex-col"},Ro={class:"flex flex-1 flex-col py-[20px] px-[30px] min-h-0"},To={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},No={class:"flex justify-center"},Mo={key:0,class:"bg-[#f4f4f4] px-[20px] py-[15px] flex"},Do={class:"flex-1 text-tx-secondary"},Fo=["href"],Bo=["href"],Ao=I({__name:"index",setup(n){const t=[{name:"手机号注册",type:"2"},{name:"邮箱注册",type:"3"}],l=S(()=>{var h;return((h=m==null?void 0:m.getLoginConfig)==null?void 0:h.login_way)||[]}),d=S(()=>{const h=t.filter(x=>l.value.includes(x.type));return h.length&&(a.scene=h[0].type),h}),{setLoginPopupType:p}=U(),u=P(),c={mobile:[{required:!0,message:"请输入手机号"}],email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],code:[{required:!0,message:"请输入验证码"}],password:[{required:!0,message:"请输入6-20位数字+字母或符号组合"},{min:6,max:20,message:"密码长度应为6-20"}],password_confirm:[{validator(h,x,j){x===""?j(new Error("请再次输入密码")):x!==a.password?j(new Error("两次输入的密码不一致")):j()}}]},a=z({scene:"2",mobile:"",code:"",email:"",password:"",password_confirm:""}),w=P(),_=h=>{h==3?a.mobile="":a.email=""},E=async()=>{var h;a.scene==="2"?await g():await C(),(h=w.value)==null||h.start()},g=async()=>{var h;await((h=u.value)==null?void 0:h.validateField(["mobile"])),await re({scene:W.REGISTER,mobile:a.mobile})},C=async()=>{var h;await((h=u.value)==null?void 0:h.validateField(["email"])),await Te({scene:W.REGISTER,email:a.email})},m=H(),f=S(()=>{var h;return((h=m.getLoginConfig)==null?void 0:h.sms_verify)===1}),V=S(()=>m.getLoginConfig.is_agreement===1),L=async()=>{var h;await((h=u.value)==null?void 0:h.validate()),await ht(a),p(T.LOGIN)},{lockFn:R,isLock:y}=te(L);return _e(()=>a.scene,()=>{var h;a.password="",a.code="",a.password="",(h=u.value)==null||h.clearValidate()}),(h,x)=>{const j=Se,F=Le,Ge=ue,qe=de,X=B,K=N,He=pe,fe=A,je=Y,he=Oe;return i(),b("div",Oo,[r("div",Ro,[o(F,{modelValue:e(a).scene,"onUpdate:modelValue":x[0]||(x[0]=O=>e(a).scene=O),onTabChange:_},{default:s(()=>[(i(!0),b(G,null,Ie(e(d),(O,ze)=>(i(),k(j,{key:ze,label:O.name,name:O.type},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),e(l).length?(i(),k(je,{key:0,ref_key:"formRef",ref:u,class:"mt-[10px]",size:"large",model:e(a),rules:c},{default:s(()=>[e(a).scene==="2"?(i(),k(K,{key:0,prop:"mobile"},{default:s(()=>[o(X,{modelValue:e(a).mobile,"onUpdate:modelValue":x[1]||(x[1]=O=>e(a).mobile=O),placeholder:"请输入手机号"},{prepend:s(()=>[o(qe,{"model-value":"+86",style:{width:"80px"}},{default:s(()=>[o(Ge,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0),e(a).scene==="3"?(i(),k(K,{key:1,prop:"email"},{default:s(()=>[o(X,{modelValue:e(a).email,"onUpdate:modelValue":x[2]||(x[2]=O=>e(a).email=O),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})):v("",!0),e(f)?(i(),k(K,{key:2,prop:"code"},{default:s(()=>[o(X,{modelValue:e(a).code,"onUpdate:modelValue":x[3]||(x[3]=O=>e(a).code=O),placeholder:"请输入验证码"},{suffix:s(()=>[r("div",To,[o(He,{ref_key:"verificationCodeRef",ref:w,onClickGet:E},null,512)])]),_:1},8,["modelValue"])]),_:1})):v("",!0),o(K,{prop:"password"},{default:s(()=>[o(X,{modelValue:e(a).password,"onUpdate:modelValue":x[4]||(x[4]=O=>e(a).password=O),type:"password","show-password":"",placeholder:"请输入6-20位数字+字母或符号组合"},null,8,["modelValue"])]),_:1}),o(K,{prop:"password_confirm"},{default:s(()=>[o(X,{modelValue:e(a).password_confirm,"onUpdate:modelValue":x[5]||(x[5]=O=>e(a).password_confirm=O),type:"password","show-password":"",placeholder:"请再次输入密码"},null,8,["modelValue"])]),_:1}),o(K,{class:"mt-[30px]"},{default:s(()=>[o(fe,{class:"w-full",type:"primary",loading:e(y),onClick:e(R)},{default:s(()=>[$(" 注册 ")]),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])):v("",!0),r("div",No,[$(" 已有账号？"),o(fe,{type:"primary",link:"",onClick:x[6]||(x[6]=O=>e(p)(e(T).LOGIN))},{default:s(()=>[$(" 立即登录 ")]),_:1})])]),e(V)?(i(),b("div",Mo,[r("div",Do,[$(" 您注册即同意 "),o(he,{to:`/policy/${e(ae).SERVICE}`,custom:""},{default:s(({href:O})=>[r("a",{class:"text-tx-primary",href:O,target:"_blank"}," 用户协议 ",8,Fo)]),_:1},8,["to"]),$(" 和 "),o(he,{class:"text-tx-primary",to:`/policy/${e(ae).PRIVACY}`,custom:""},{default:s(({href:O})=>[r("a",{class:"text-tx-primary",href:O,target:"_blank"}," 隐私政策 ",8,Bo)]),_:1},8,["to"])])])):v("",!0)])}}});const Uo=ce(Ao,[["__scopeId","data-v-ae428d38"]]),Po={class:"flex-1 flex flex-col"},Go={class:"flex flex-1 flex-col pt-[30px] px-[30px] min-h-0"},qo=r("span",{class:"text-2xl font-medium text-tx-primary"},"更换密码",-1),Ho={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},jo={class:"flex justify-center flex-1"},zo=I({__name:"forgot-pwd",setup(n){const t=U(),{setLoginPopupType:l}=U(),d=P(),p=P(),u={mobile:[{required:!0,message:"请输入手机号码"}],email:[{required:!0,message:"请输入邮箱账号"},{type:"email",message:"请输入正确的邮箱账号"}],code:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}],password:[{required:!0,message:"请输入6-20位数字+字母或符号组合",trigger:["change","blur"]},{min:6,max:20,message:"密码长度应为6-20",trigger:["change","blur"]}],password_confirm:[{validator(m,f,V){f===""?V(new Error("请再次输入密码")):f!==c.password?V(new Error("两次输入的密码不一致")):V()},trigger:["change","blur"]}]},c=z({email:"",mobile:"",scene:"",password:"",code:"",password_confirm:""}),a=async()=>{var m;try{t.loginPopupType===T.FORGOT_PWD_MOBILE?await w():await _(),(m=p.value)==null||m.start()}catch(f){console.log("error",f)}},w=async()=>{var m;await((m=d.value)==null?void 0:m.validateField(["mobile"])),await re({scene:W.FIND_PASSWORD,mobile:c.mobile})},_=async()=>{var m;await((m=d.value)==null?void 0:m.validateField(["email"])),await Te({scene:W.FIND_PASSWORD,email:c.email})},E=async()=>{var m;await((m=d.value)==null?void 0:m.validate()),await nt({...c,scene:t.loginPopupType===T.FORGOT_PWD_MOBILE?2:3}),t.logout(),l(T.LOGIN)},{lockFn:g,isLock:C}=te(E);return(m,f)=>{const V=ue,L=de,R=B,y=N,h=pe,x=A,j=Y;return i(),b("div",Po,[r("div",Go,[qo,o(j,{ref_key:"formRef",ref:d,class:"mt-[35px]",size:"large",model:e(c),rules:u},{default:s(()=>[e(t).loginPopupType===e(T).FORGOT_PWD_MOBILE?(i(),k(y,{key:0,prop:"mobile"},{default:s(()=>[o(R,{modelValue:e(c).mobile,"onUpdate:modelValue":f[0]||(f[0]=F=>e(c).mobile=F),placeholder:"请输入手机号"},{prepend:s(()=>[o(L,{"model-value":"+86",style:{width:"80px"}},{default:s(()=>[o(V,{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0),e(t).loginPopupType===e(T).FORGOT_PWD_MAILBOX?(i(),k(y,{key:1,prop:"email"},{default:s(()=>[o(R,{modelValue:e(c).email,"onUpdate:modelValue":f[1]||(f[1]=F=>e(c).email=F),placeholder:"请输入邮箱账号"},null,8,["modelValue"])]),_:1})):v("",!0),o(y,{prop:"code"},{default:s(()=>[o(R,{modelValue:e(c).code,"onUpdate:modelValue":f[2]||(f[2]=F=>e(c).code=F),placeholder:"请输入验证码"},{suffix:s(()=>[r("div",Ho,[o(h,{ref_key:"verificationCodeRef",ref:p,onClickGet:a},null,512)])]),_:1},8,["modelValue"])]),_:1}),o(y,{prop:"password"},{default:s(()=>[o(R,{modelValue:e(c).password,"onUpdate:modelValue":f[3]||(f[3]=F=>e(c).password=F),placeholder:"请输入6-20位数字+字母或符号组合",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(y,{prop:"password_confirm"},{default:s(()=>[o(R,{modelValue:e(c).password_confirm,"onUpdate:modelValue":f[4]||(f[4]=F=>e(c).password_confirm=F),placeholder:"请再次输入密码",type:"password","show-password":""},null,8,["modelValue"])]),_:1}),o(y,{class:"mt-[30px]"},{default:s(()=>[o(x,{class:"w-full",type:"primary",loading:e(C),onClick:e(g)},{default:s(()=>[$(" 确认 ")]),_:1},8,["loading","onClick"])]),_:1}),o(y,{class:"mt-[20px]"},{default:s(()=>[r("div",jo,[e(t).isLogin?v("",!0):(i(),k(x,{key:0,type:"primary",link:"",onClick:f[5]||(f[5]=F=>e(l)(e(T).LOGIN))},{default:s(()=>[$(" 返回登录 ")]),_:1}))])]),_:1})]),_:1},8,["model"])])])}}}),Wo={class:"flex-1 flex flex-col"},Ko={class:"flex flex-1 flex-col pt-[30px] px-[30px] min-h-0"},Yo={class:"text-2xl font-medium text-tx-primary"},Xo={class:"flex justify-center leading-5 w-[90px] pl-2.5 border-l border-br"},Jo=I({__name:"bind-mobile",setup(n){const t=U(),l=P(),d=P(),p={mobile:[{required:!0,message:"请输入手机号码",trigger:["change","blur"]}],code:[{required:!0,message:"请输入验证码",trigger:["change","blur"]}]},u=S(()=>!!t.userInfo.mobile),c=z({type:u.value?"change":"bind",mobile:"",code:""}),a=async()=>{var g,C;await((g=l.value)==null?void 0:g.validateField(["mobile"])),await re({scene:u.value?W.CHANGE_MOBILE:W.BIND_MOBILE,mobile:c.mobile}),(C=d.value)==null||C.start()},w=async()=>{var g;await((g=l.value)==null?void 0:g.validate()),t.isLogin?await ge(c):(await ge(c,{token:t.temToken}),t.login(t.temToken),location.reload(),await t.getUser()),t.toggleShowLogin(!1)},{lockFn:_,isLock:E}=te(w);return(g,C)=>{const m=pe;return i(),b("div",Wo,[r("div",Ko,[r("span",Yo,D(e(u)?"更换手机号":"绑定手机号"),1),o(e(Y),{ref_key:"formRef",ref:l,class:"mt-[35px]",size:"large",model:e(c),rules:p},{default:s(()=>[o(e(N),{prop:"mobile"},{default:s(()=>[o(e(B),{modelValue:e(c).mobile,"onUpdate:modelValue":C[0]||(C[0]=f=>e(c).mobile=f),placeholder:"请输入手机号"},{prepend:s(()=>[o(e(de),{"model-value":"+86",style:{width:"80px"}},{default:s(()=>[o(e(ue),{label:"+86",value:"+86"})]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(e(N),{prop:"code"},{default:s(()=>[o(e(B),{modelValue:e(c).code,"onUpdate:modelValue":C[1]||(C[1]=f=>e(c).code=f),placeholder:"请输入验证码"},{suffix:s(()=>[r("div",Xo,[o(m,{ref_key:"verificationCodeRef",ref:d,onClickGet:a},null,512)])]),_:1},8,["modelValue"])]),_:1}),o(e(N),{class:"mt-[60px]"},{default:s(()=>[o(e(A),{class:"w-full",type:"primary",onClick:e(_),loading:e(E)},{default:s(()=>[$(" 确认 ")]),_:1},8,["onClick","loading"])]),_:1})]),_:1},8,["model"])])])}}}),Zo={class:"flex"},Qo={key:0},es={class:"flex-1 text-tx-primary flex flex-col w-[400px]"},Fs=I({__name:"index",setup(n){const t=U(),l=H(),d=S({get(){return t.showLogin},set(p){t.showLogin=p}});return _e(()=>t.showLogin,p=>{p||(t.temToken=null)}),(p,u)=>{const c=ut;return i(),k(c,null,{default:s(()=>[o(e(Me),{modelValue:e(d),"onUpdate:modelValue":u[0]||(u[0]=a=>ne(d)?d.value=a:null),width:"auto","custom-class":"login-popup","append-to-body":"",style:{"border-radius":"16px",overflow:"hidden"}},{default:s(()=>[r("div",Zo,[e(l).config.pc_login_image?(i(),b("div",Qo,[o(e(Ne),{class:"w-[320px] h-full",fit:"cover",src:e(l).config.pc_login_image},null,8,["src"])])):v("",!0),r("div",es,[e(t).loginPopupType==e(T).LOGIN?(i(),k(So,{key:0})):v("",!0),e(t).loginPopupType==e(T).REGISTER?(i(),k(Uo,{key:1})):v("",!0),e(t).loginPopupType==e(T).FORGOT_PWD_MAILBOX||e(t).loginPopupType==e(T).FORGOT_PWD_MOBILE?(i(),k(zo,{key:2})):v("",!0),e(t).loginPopupType==e(T).BIND_MOBILE?(i(),k(Jo,{key:3})):v("",!0)])])]),_:1},8,["modelValue"])]),_:1})}}});const ts={class:"text-lg text-center font-medium"},os=["innerHTML"],ss={class:"flex-1 flex justify-center items-center bg-white pt-[20px]"},ls=I({__name:"index",setup(n){const t=H(),l=q(!1),d=S(()=>t.getBulletinConfig.bulletin_content),p=S(()=>t.getBulletinConfig.bulletin_title),u=S(()=>t.getBulletinConfig.is_bulletin);return _e(()=>u.value,c=>{c&&at(c,it)&&(l.value=!0)},{deep:!0,immediate:!0}),(c,a)=>{const w=yt,_=A;return i(),k(e(Me),{modelValue:e(l),"onUpdate:modelValue":a[1]||(a[1]=E=>ne(l)?l.value=E:null),width:"600","append-to-body":""},{header:s(()=>[r("div",ts,D(p.value),1)]),default:s(()=>[o(w,{height:"60vh"},{default:s(()=>[r("div",{class:"richText",innerHTML:d.value},null,8,os)]),_:1}),r("div",ss,[o(_,{type:"primary",size:"large",onClick:a[0]||(a[0]=E=>l.value=!1)},{default:s(()=>[$(" 我知道了 ")]),_:1})])]),_:1},8,["modelValue"])}}});const Bs=ce(ls,[["__scopeId","data-v-7e0d22f1"]]);export{Rs as E,Bs as N,Ds as U,Fs as _,Os as a,Ns as b,Ms as c,Ts as d};
