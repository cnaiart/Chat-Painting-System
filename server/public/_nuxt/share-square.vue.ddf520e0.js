import{E as k,a as v}from"./index.ba068d27.js";import{a as B,O as w,S,q as V,C as E,o as n,h as _,f as c,w as l,e as m,u as t,F as L,r as q,z as D,B as F,c as N}from"./entry.c7e0e7b4.js";/* empty css                  *//* empty css               *//* empty css                     *//* empty css                  */import{g as R,s as T}from"./square.fc2940e6.js";import{_ as U}from"./index.ae48457a.js";import{u as O}from"./useLockFn.d62becec.js";const j={class:"share-popup"},z={class:"h-[160px]"},A={class:"dialog-footer flex justify-center"},Z=B({__name:"share-square",emits:["success","close"],setup(G,{expose:d,emit:i}){const f=w(),r=S(),p=V([]),s=E({is_base64:0,base64:"",prompts:"",category_id:"",draw_records_id:""}),h=async()=>{try{const e=await R();e.shift(),p.value=e}catch(e){console.log("获取绘画分类失败=>",e)}},{lockFn:u,isLock:x}=O(async e=>{var o;await T(s),f.getUser(),(o=r.value)==null||o.close(),i("success")}),g=()=>{i("close")};return d({open:e=>{var o;h(),(o=r.value)==null||o.open(),s.base64=e.base64,s.is_base64=e.is_base64,s.prompts=e.prompt_en||e.prompt,s.draw_records_id=e.id}}),(e,o)=>{const y=v,C=k,b=F;return n(),_("div",j,[c(U,{ref_key:"popupRef",ref:r,title:"分享至广场",async:!0,width:"400px",customClass:"!rounded-[20px]",center:!0,cancelButtonText:"",confirmButtonText:"",onConfirm:t(u),onClose:g},{default:l(()=>[m("div",z,[c(C,{class:"w-[360px]",modelValue:t(s).category_id,"onUpdate:modelValue":o[0]||(o[0]=a=>t(s).category_id=a)},{default:l(()=>[(n(!0),_(L,null,q(t(p),a=>(n(),N(y,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m("div",A,[c(b,{type:"primary",loading:t(x),onClick:t(u)},{default:l(()=>[D(" 分享至广场 ")]),_:1},8,["loading","onClick"])])]),_:1},8,["onConfirm"])])}}});export{Z as _};
