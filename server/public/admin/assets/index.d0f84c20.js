import{K as Z,L as ee,C as te,w as ae,D as oe,M as le,y as ne,N as ue,t as se,O as ie,P as me,x as re}from"./element-plus.38726bbd.js";import{_ as pe}from"./index.vue_vue_type_script_setup_true_lang.c6066b25.js";import{_ as de}from"./index.vue_vue_type_script_setup_true_lang.42418fb0.js";import{u as ce}from"./usePaging.2d3fb421.js";import{d as S,c as _e,s as fe,f as ye}from"./ai_key.4cf9f223.js";import{f as k}from"./index.0aa35fa2.js";import{_ as ve}from"./edit.vue_vue_type_script_setup_true_lang.947134f8.js";import{d as be,r as C,s as Ce,_ as ge,ag as he,ar as K,o as s,c as g,V as t,M as a,W as $,aa as T,u as r,a as L,O as f,L as p,T as m,U as E,k as Fe,S as ke}from"./@vue.581f5ce0.js";import"./lodash-es.b552e321.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.788ba4d8.js";import"./@element-plus.048d13fe.js";import"./dayjs.3bbbdfdd.js";import"./axios.ef5f3479.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.1c6c033d.js";import"./vue-drag-resize.3665149e.js";import"./lodash.ccf63c29.js";import"./vue-router.f90229e4.js";import"./pinia.8de84ecb.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.7bd56a8d.js";import"./color.4d72ae60.js";import"./clone.f3914b59.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e3c4d4cf.js";import"./ms.a9ae1d6d.js";import"./nprogress.db25c43d.js";import"./vue-clipboard3.37da43ca.js";import"./clipboard.51333a27.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.18a086c3.js";const Ee=m("\u67E5\u8BE2"),Be=m("\u91CD\u7F6E"),De={class:"mb-[10px]"},Ve=m(" + \u65B0\u589E\u5BC6\u94A5 "),we=m(" \u6279\u91CF\u5220\u9664 "),Pe={class:"line-clamp-3 cursor-pointer"},Ae=m(" \u66F4\u6362 "),xe=m(" \u7F16\u8F91 "),Se=m(" \u5220\u9664 "),Ke={class:"flex justify-end mt-4"},kt=be({__name:"index",setup($e){const U=C(!0),B=Ce(),D=C([]),u=ge({type:1,ai_key:"",keyword:"",start_time:"",end_time:"",status:""}),V=C(1),R=[{name:"AI\u5BF9\u8BDD",type:1},{name:"AI\u7ED8\u753B",type:2},{name:"\u8BED\u97F3\u64AD\u62A5",type:3},{name:"\u827A\u672F\u4E8C\u7EF4\u7801",type:4},{name:"\u8BED\u97F3\u8F93\u5165",type:5}],{pager:y,getLists:d,resetParams:Te}=ce({fetchFun:S,params:u}),v=C([]),N=l=>{v.value=l},z=()=>{u.status="",u.ai_key="",u.keyword="",v.value=[],d()},M=l=>{u.type=l,v.value=[],d(),w()},w=async()=>{try{const l=await _e({type:u.type});D.value=l}catch(l){console.log("\u83B7\u53D6ai\u6A21\u578B\u5931\u8D25=>",l)}},I=l=>{fe({id:l}),k.msgSuccess("\u64CD\u4F5C\u6210\u529F")},h=(l,n)=>{var c;(c=B.value)==null||c.open(u.type,l,n)},P=async l=>{await k.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await ye({ids:l}),k.msgSuccess("\u64CD\u4F5C\u6210\u529F"),d()};return d(),w(),(l,n)=>{const c=Z,A=ee,F=te,_=ae,O=de,j=oe,x=le,q=re,W=ne,i=ue,G=se,H=ie,J=pe,Q=he("balancePop"),b=K("perms"),X=K("copy"),Y=me;return s(),g("div",null,[t(x,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[t(j,{ref:"formRef",class:"mb-[-16px]",model:u,inline:!0},{default:a(()=>[t(F,{label:"\u63A5\u53E3\u7C7B\u578B"},{default:a(()=>[t(A,{class:"w-[280px]",modelValue:u.ai_key,"onUpdate:modelValue":n[0]||(n[0]=e=>u.ai_key=e)},{default:a(()=>[(s(!0),g($,null,T(D.value,(e,o)=>(s(),p(c,{key:o,label:e,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(F,{label:"\u72B6\u6001"},{default:a(()=>[t(A,{class:"w-[280px]",modelValue:u.status,"onUpdate:modelValue":n[1]||(n[1]=e=>u.status=e)},{default:a(()=>[t(c,{label:"\u5168\u90E8",value:""}),t(c,{label:"\u5F00\u542F",value:1}),t(c,{label:"\u5173\u95ED",value:0})]),_:1},8,["modelValue"])]),_:1}),t(F,null,{default:a(()=>[t(_,{type:"primary",onClick:r(d)},{default:a(()=>[Ee]),_:1},8,["onClick"]),t(_,{onClick:z},{default:a(()=>[Be]),_:1}),t(O,{class:"ml-2.5","fetch-fun":r(S),params:u,"page-size":r(y).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),t(x,{shadow:"never",class:"!border-none mt-4"},{default:a(()=>[t(W,{modelValue:V.value,"onUpdate:modelValue":n[2]||(n[2]=e=>V.value=e),onTabChange:M},{default:a(()=>[(s(),g($,null,T(R,(e,o)=>t(q,{label:`${e.name}`,name:e.type,key:o},null,8,["label","name"])),64))]),_:1},8,["modelValue"]),L("div",De,[f((s(),p(_,{type:"primary",onClick:n[3]||(n[3]=e=>h("add"))},{default:a(()=>[Ve]),_:1})),[[b,["setting.KeyPool/edit"]]]),t(_,{type:"default",plain:!0,disabled:!v.value.length,onClick:n[4]||(n[4]=e=>P(v.value.map(o=>o.id)))},{default:a(()=>[we]),_:1},8,["disabled"])]),f((s(),p(H,{size:"large",data:r(y).lists,onSelectionChange:N},{default:a(()=>[t(i,{type:"selection",width:"55"}),t(i,{label:"\u63A5\u53E3\u7C7B\u578B",prop:"ai_key_desc","min-width":"120"}),t(i,{label:"\u5BC6\u94A5  ",prop:"key","min-width":"200"},{default:a(({row:e})=>[f((s(),g("div",Pe,[m(E(e.key),1)])),[[X,e.key]])]),_:1}),f((s(),p(i,{label:"\u72B6\u6001","min-width":"100"},{default:a(({row:e})=>[t(G,{modelValue:e.status,"onUpdate:modelValue":o=>e.status=o,"active-value":1,"inactive-value":0,onChange:o=>I(e.id)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})),[[b,["setting.KeyPool/status"]]]),t(i,{label:"\u81EA\u5B9A\u4E49api\u57DF\u540D","min-width":"150"},{default:a(({row:e})=>{var o;return[m(E((o=e.notice)==null?void 0:o.api),1)]}),_:1}),t(i,{label:"\u505C\u7528\u539F\u56E0",prop:"notice","min-width":"200"},{default:a(({row:e})=>{var o;return[m(E((o=e.notice)==null?void 0:o.notice),1)]}),_:1}),t(i,{label:"\u6700\u8FD1\u8C03\u7528\u65F6\u95F4",prop:"use_time","min-width":"180"}),t(i,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time","min-width":"180"}),t(i,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),t(i,{label:"\u64CD\u4F5C",fixed:"right","min-width":"180"},{default:a(({row:e})=>[e.change_btn?f((s(),p(_,{key:0,type:"primary",link:"",onClick:o=>h("edit",e)},{default:a(()=>[Ae]),_:2},1032,["onClick"])),[[b,["setting.KeyPool/edit"]]]):f((s(),p(_,{key:1,type:"primary",link:"",onClick:o=>h("edit",e)},{default:a(()=>[xe]),_:2},1032,["onClick"])),[[b,["setting.KeyPool/edit"]]]),f((s(),p(_,{type:"danger",link:!0,onClick:o=>P([e.id])},{default:a(()=>[Se]),_:2},1032,["onClick"])),[[b,["setting.KeyPool/del"]]])]),_:1})]),_:1},8,["data"])),[[Y,r(y).loading]]),L("div",Ke,[t(J,{modelValue:r(y),"onUpdate:modelValue":n[5]||(n[5]=e=>Fe(y)?y.value=e:null),onChange:r(d)},null,8,["modelValue","onChange"])])]),_:1}),t(Q,{ref:"balanceRef"},null,512),U.value?(s(),p(ve,{key:0,ref_key:"editRef",ref:B,onSuccess:r(d)},null,8,["onSuccess"])):ke("",!0)])}}});export{kt as default};
