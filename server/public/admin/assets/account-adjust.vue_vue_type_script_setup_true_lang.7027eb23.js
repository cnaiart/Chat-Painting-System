import{P as V}from"./index.1c6c033d.js";import{C as g,G as k,H as x,B as N,D as q}from"./element-plus.38726bbd.js";import{d as S,s as f,_ as I,e as M,w as _,o as j,L as G,M as o,a as P,V as t,T as r,U as F,u as T,a4 as U}from"./@vue.581f5ce0.js";import{f as b}from"./index.0aa35fa2.js";const A={class:"pr-8"},H=r("\u589E\u52A0\u4F59\u989D"),L=r("\u6263\u51CF\u4F59\u989D"),Q=S({__name:"account-adjust",props:{title:{type:String,required:!0},show:{type:Boolean,required:!0},value:{type:[Number,String],required:!0}},emits:["update:show","confirm"],setup(l,{emit:i}){const p=l,s=f(),u=I({action:1,num:"",remark:""}),m=f(),d=M(()=>Number(p.value)+Number(u.num)*(u.action==1?1:-1)),C={num:[{required:!0,message:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u6761\u6570"}]},E=e=>{if(e.includes("-"))return b.msgError("\u8BF7\u8F93\u5165\u6B63\u6574\u6570");u.num=e},h=async()=>{var e;await((e=s.value)==null?void 0:e.validate()),i("confirm",u)},v=()=>{var e;i("update:show",!1),(e=s.value)==null||e.resetFields()};return _(()=>p.show,e=>{var a,n;e?(a=m.value)==null||a.open():(n=m.value)==null||n.close()}),_(d,e=>{e<0&&(b.msgError("\u8C03\u6574\u540E\u4F59\u989D\u9700\u5927\u4E8E0"),u.num="")}),(e,a)=>{const n=g,c=k,w=x,D=N,y=q,B=V;return j(),G(B,{ref_key:"popupRef",ref:m,title:l.title,width:"500px",onConfirm:h,async:!0,onClose:v},{default:o(()=>[P("div",A,[t(y,{ref_key:"formRef",ref:s,model:u,"label-width":"120px",rules:C,onSubmit:a[1]||(a[1]=U(()=>{},["prevent"]))},{default:o(()=>[t(n,{label:"\u5F53\u524D\u4F59\u989D"},{default:o(()=>[r(F(l.value)+"\u6761 ",1)]),_:1}),t(n,{label:"\u4F59\u989D\u589E\u51CF",required:"",prop:"action"},{default:o(()=>[t(w,{modelValue:u.action,"onUpdate:modelValue":a[0]||(a[0]=R=>u.action=R)},{default:o(()=>[t(c,{label:1},{default:o(()=>[H]),_:1}),t(c,{label:2},{default:o(()=>[L]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(n,{label:"\u8C03\u6574\u4F59\u989D",prop:"num"},{default:o(()=>[t(D,{"model-value":u.num,placeholder:"\u8BF7\u8F93\u5165\u8C03\u6574\u7684\u6761\u6570",type:"number",onInput:E},null,8,["model-value"])]),_:1}),t(n,{label:"\u8C03\u6574\u540E\u4F59\u989D"},{default:o(()=>[r(F(T(d))+" \u6761",1)]),_:1})]),_:1},8,["model"])])]),_:1},8,["title"])}}});export{Q as _};
