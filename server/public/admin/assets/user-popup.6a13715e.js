import{B as L,w as j,D as $,F as O,N as q,b as G,S as H,O as J}from"./element-plus.38726bbd.js";import{d as K,r as C,_ as Q,w as W,e as D,j as X,o as c,L as v,M as u,I as Y,V as a,u as d,a as g,c as Z,S as E,k as w,a4 as ee,T as f,U as te}from"./@vue.581f5ce0.js";import{k as le}from"./consumer.b7c7cab4.js";import{P as oe}from"./index.1c6c033d.js";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.c6066b25.js";import{u as se}from"./usePaging.2d3fb421.js";import{l as B}from"./lodash.ccf63c29.js";import{_ as ue}from"./vue-drag-resize.3665149e.js";import"./lodash-es.b552e321.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.788ba4d8.js";import"./@element-plus.048d13fe.js";import"./dayjs.3bbbdfdd.js";import"./axios.ef5f3479.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.0aa35fa2.js";import"./vue-router.f90229e4.js";import"./pinia.8de84ecb.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.7bd56a8d.js";import"./color.4d72ae60.js";import"./clone.f3914b59.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e3c4d4cf.js";import"./ms.a9ae1d6d.js";import"./nprogress.db25c43d.js";import"./vue-clipboard3.37da43ca.js";import"./clipboard.51333a27.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.18a086c3.js";const ie=f("\u641C\u7D22"),ne=f("\u91CD\u7F6E"),de={class:"mt-4"},re={key:0},me={class:"flex items-center"},pe=f("\u5DF2\u5F00\u901A"),ce=f("\u672A\u5F00\u901A"),fe={class:"flex justify-end mt-5"},_e=K({__name:"user-popup",props:{modelValue:{default:[]},type:{default:"single"},disabled:{type:Boolean,default:!1},maxNum:{default:10}},emits:["update:modelValue"],setup(m,{emit:N}){const i=m,k=C(),I=C(),t=C(i.modelValue),_=Q({keyword:"",status:""}),{pager:r,getLists:b,resetParams:P}=se({size:15,fetchFun:le,params:_}),S=l=>{!l||l.resetFields()},A=()=>{N("update:modelValue",B.exports.cloneDeep(t.value))};W(()=>i.modelValue,l=>{t.value=B.exports.cloneDeep(l)},{deep:!0,immediate:!0});const y=D({get:()=>{const{lists:l}=r;if(!t.value)return!1;const e=t.value.map(s=>s.id);return l.length?l.every(s=>e.includes(s.id)):!1},set:l=>{const{lists:e}=r;if(l)for(let s=0;s<e.length;s++){const p=e[s];!t.value.map(h=>h.id).includes(p.id)&&t.value.length<i.maxNum&&t.value.push(p)}else e.forEach(s=>{x(s)})}}),R=D(()=>l=>i.type=="single"?t.value.id==l.id:t.value?t.value.some(e=>e.id==l.id):!1),T=(l,e)=>{i.type=="single"?l?t.value=e:t.value={}:l&&t.value.length<i.maxNum?t.value.push(e):x(e)},x=l=>{const e=t.value.findIndex(s=>s.id==l.id);e!=-1&&(t==null||t.value.splice(e,1))};return X(()=>{b(),t.value=[...i.modelValue]}),(l,e)=>{const s=L,p=j,F=$,h=O,n=q,U=G,V=H,M=J;return c(),v(oe,{class:"inline mr-3",clickModalClose:!1,title:"\u9009\u62E9\u7528\u6237",center:!0,onClose:e[4]||(e[4]=o=>S(k.value)),onConfirm:A,width:"1100px"},{trigger:u(()=>[Y(l.$slots,"default",{},void 0,!0)]),default:u(()=>[a(F,{model:_,ref_key:"productFormRef",ref:k,inline:!0,"label-width":"auto"},{default:u(()=>[a(s,{class:"mr-2 ls-input",modelValue:_.keyword,"onUpdate:modelValue":e[0]||(e[0]=o=>_.keyword=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u53F7"},null,8,["modelValue"]),a(p,{type:"primary",onClick:d(b)},{default:u(()=>[ie]),_:1},8,["onClick"]),a(p,{onClick:d(P)},{default:u(()=>[ne]),_:1},8,["onClick"])]),_:1},8,["model"]),g("div",de,[a(M,{ref_key:"tableDataRef",ref:I,data:d(r).lists,style:{width:"100%"},height:"420px"},{default:u(()=>[a(n,{label:"\u9009\u62E9",width:"60"},{header:u(()=>[m.type=="single"?(c(),Z("span",re,"\u9009\u62E9")):E("",!0),m.type=="multiple"?(c(),v(h,{key:1,size:"large",modelValue:d(y),"onUpdate:modelValue":e[1]||(e[1]=o=>w(y)?y.value=o:null),disabled:m.disabled},null,8,["modelValue","disabled"])):E("",!0)]),default:u(({row:o})=>[g("div",{class:"flex row-center",onClick:e[2]||(e[2]=ee(()=>{},["stop"]))},[a(h,{"model-value":d(R)(o),onChange:z=>T(z,o),size:"large",disabled:m.disabled},null,8,["model-value","onChange","disabled"])])]),_:1}),a(n,{label:"\u7528\u6237ID",prop:"sn","min-width":"100"}),a(n,{label:"\u7528\u6237\u5934\u50CF","min-width":"100"},{default:u(({row:o})=>[g("div",me,[a(U,{fit:"cover",src:o.avatar,class:"flex-none w-[58px] h-[58px]"},null,8,["src"])])]),_:1}),a(n,{label:"\u7528\u6237\u6635\u79F0","min-width":"200"},{default:u(({row:o})=>[f(te(o.nickname),1)]),_:1}),a(n,{label:"\u7D2F\u8BA1\u6D88\u8D39",prop:"total_amount","min-width":"120"}),a(n,{label:"\u5206\u9500\u8D44\u683C","min-width":"140"},{default:u(({row:o})=>[o!=null&&o.is_distribution?(c(),v(V,{key:0,type:"success"},{default:u(()=>[pe]),_:1})):(c(),v(V,{key:1,type:"warning"},{default:u(()=>[ce]),_:1}))]),_:1}),a(n,{label:"\u6CE8\u518C\u65F6\u95F4",prop:"create_time","min-width":"180"})]),_:1},8,["data"])]),g("div",fe,[a(ae,{modelValue:d(r),"onUpdate:modelValue":e[3]||(e[3]=o=>w(r)?r.value=o:null),onChange:d(b)},null,8,["modelValue","onChange"])])]),_:3})}}});const tt=ue(_e,[["__scopeId","data-v-851d2529"]]);export{tt as default};
