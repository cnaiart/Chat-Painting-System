import{L as q,C as j,B as N,t as O,D as T,K as W}from"./element-plus.38726bbd.js";import{a as z,e as G,b as H,c as J}from"./ai_key.4cf9f223.js";import{P as Q}from"./index.1c6c033d.js";import{f as X}from"./index.0aa35fa2.js";import{d as Y,s as S,r as y,e as Z,o as d,c as K,V as u,M as o,W as ee,aa as ae,L as v,S as k,u as c}from"./@vue.581f5ce0.js";const le={class:"edit-popup"},ie=Y({__name:"edit",emits:["success"],setup(ue,{expose:E,emit:D}){const F=S(),_=S(),f=y(""),b=y([]),e=y({id:"",type:"",appid:"",secret:"",ai_key:"",is_clear:0,key:"",status:1}),r=Z(()=>{switch(e.value.ai_key){case"hunyuan":return{key:"SecretKey",secret:"SecretId"};case"minimax":return{key:"\u5BC6\u94A5",secret:"SecretId"};case"kdxf":return[5,6].includes(e.value.type)?{key:"SecretKey"}:{key:"APIKey",secret:"APISecret"};default:return{key:"APIKey",secret:"APISecret"}}}),U=y({key:[{required:!0,message(){return`\u8BF7\u8F93\u5165${r.value.key}`},trigger:["blur"]}],appid:[{required:!0,message:"\u8BF7\u8F93\u5165APPID"}],secret:[{required:!0,message(){return`\u8BF7\u8F93\u5165${r.value.secret}`}}]}),L=async()=>{var t,a;try{await((t=F.value)==null?void 0:t.validate()),e.value.id==""?await z(e.value):e.value.id!=""&&await G(e.value),X.msgSuccess("\u64CD\u4F5C\u6210\u529F"),D("success"),(a=_.value)==null||a.close()}catch(i){return i}},R=async(t,a,i)=>{var p;if(a=="add")e.value={id:"",type:t,ai_key:"",key:"",status:1},f.value="\u65B0\u589E\u5BC6\u94A5";else if(a=="edit"){const s=await H({id:i.id});Object.keys(s).map(n=>{var m;e.value[n]=(m=s[n])!=null?m:0}),e.value.type=t,i.change_btn&&(e.value.is_clear=1),f.value="\u7F16\u8F91\u5BC6\u94A5"}(p=_.value)==null||p.open(),M(t)},M=async t=>{try{const a=await J({type:t});b.value=a}catch(a){console.log(a)}};return E({open:R}),(t,a)=>{const i=W,p=q,s=j,n=N,m=O,$=T;return d(),K("div",le,[u(Q,{ref_key:"popupRef",ref:_,title:f.value,async:!0,width:"550px",onConfirm:L},{default:o(()=>[u($,{class:"ls-form",ref_key:"formRef",ref:F,rules:U.value,model:e.value,"label-width":"90px"},{default:o(()=>{var V,w,x,B,P,g,A,I,h;return[u(s,{label:"\u63A5\u53E3\u7C7B\u578B"},{default:o(()=>[u(p,{class:"w-[330px]",modelValue:e.value.ai_key,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.ai_key=l)},{default:o(()=>[(d(!0),K(ee,null,ae(b.value,(l,C)=>(d(),v(i,{key:C,label:l,value:C},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),((V=e.value.ai_key)==null?void 0:V.includes("xinghuo"))||((w=e.value.ai_key)==null?void 0:w.includes("kdxf"))||((x=e.value.ai_key)==null?void 0:x.includes("hunyuan"))?(d(),v(s,{key:0,label:"APPID",prop:"appid"},{default:o(()=>[u(n,{class:"w-[330px]",modelValue:e.value.appid,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.appid=l),placeholder:"\u8BF7\u8F93\u5165APPID",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),(B=e.value.ai_key)!=null&&B.includes("minimax")?(d(),v(s,{key:1,label:"groupId",prop:"appid"},{default:o(()=>[u(n,{class:"w-[330px]",modelValue:e.value.appid,"onUpdate:modelValue":a[2]||(a[2]=l=>e.value.appid=l),placeholder:"\u8BF7\u8F93\u5165APPID",clearable:""},null,8,["modelValue"])]),_:1})):k("",!0),u(s,{label:c(r).key,prop:"key"},{default:o(()=>[u(n,{class:"w-[330px]",modelValue:e.value.key,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.key=l),placeholder:`\u8BF7\u8F93\u5165${c(r).key}`,rows:4,type:"textarea",clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),c(r).secret&&(((P=e.value.ai_key)==null?void 0:P.includes("xinghuo"))||((g=e.value.ai_key)==null?void 0:g.includes("wenxin"))||((A=e.value.ai_key)==null?void 0:A.includes("kdxf"))||((I=e.value.ai_key)==null?void 0:I.includes("yijian_sd"))||((h=e.value.ai_key)==null?void 0:h.includes("hunyuan")))?(d(),v(s,{key:2,label:c(r).secret,prop:"secret"},{default:o(()=>[u(n,{class:"w-[330px]",modelValue:e.value.secret,"onUpdate:modelValue":a[4]||(a[4]=l=>e.value.secret=l),placeholder:`\u8BF7\u8F93\u5165${c(r).secret}`,clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):k("",!0),u(s,{label:"\u72B6\u6001"},{default:o(()=>[u(m,{modelValue:e.value.status,"onUpdate:modelValue":a[5]||(a[5]=l=>e.value.status=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]}),_:1},8,["rules","model"])]),_:1},8,["title"])])}}});export{ie as _};
