import{_ as G,M as H,B as I,C as O,K as P,L as T,F as $,G as j,H as K,w as W,Y,t as z,a3 as J,D as Q}from"./element-plus.38726bbd.js";import{_ as X}from"./index.f9197633.js";import{a as Z,u as uu}from"./vue-router.f90229e4.js";import{_ as eu}from"./vip_coupon.8623376f.js";import{g as lu,d as tu,e as au,a as ou}from"./vip.ada42dbe.js";import{u as su}from"./useDictOptions.5809e50b.js";import{d as iu,e as du,s as ru,r as nu,_ as _u,j as mu,o as m,c as F,V as u,M as l,u as E,a as o,L as h,S as A,W as pu,aa as vu,T as i,U as cu}from"./@vue.581f5ce0.js";import"./lodash-es.b552e321.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.788ba4d8.js";import"./@element-plus.048d13fe.js";import"./dayjs.3bbbdfdd.js";import"./axios.ef5f3479.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./vue-drag-resize.3665149e.js";import"./index.0aa35fa2.js";import"./lodash.ccf63c29.js";import"./pinia.8de84ecb.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.7bd56a8d.js";import"./color.4d72ae60.js";import"./clone.f3914b59.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e3c4d4cf.js";import"./ms.a9ae1d6d.js";import"./nprogress.db25c43d.js";import"./vue-clipboard3.37da43ca.js";import"./clipboard.51333a27.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.18a086c3.js";const Fu="/admin/assets/limit_tips.861de85d.png",Eu=o("div",{class:"text-lg font-medium"},"\u5957\u9910\u4FE1\u606F",-1),fu={class:"mt-4"},Du={class:"flex w-full"},bu=o("div",null,[o("span",{class:"text-error"},"*"),i(" \u5957\u9910\u65F6\u957F ")],-1),Bu={class:"flex"},Vu=i("\u6C38\u4E45"),gu={class:"flex"},hu=i("\u5143"),Au={class:"w-[360px]"},wu=i("\u5143"),xu=i("\u5F00\u542F"),Cu=i("\u5173\u95ED"),qu={class:"form-tips flex"},yu=i(" \u7528\u6237\u8FD4\u56DE\u4E0A\u4E00\u9875\u70B9\u51FB\u653E\u5F03\u652F\u4ED8\u65F6\u5F39\u51FA\u7684\u4F18\u60E0\u91D1\u989D "),Uu=i("\u67E5\u770B"),ku=o("img",{src:eu},null,-1),Lu=i("\u5143"),Ru=o("div",{class:"form-tips"}," \u5F00\u542F\u633D\u56DE\u4F18\u60E0\u540E\uFF0C\u7528\u6237\u4ED8\u6B3E\u91D1\u989D=\u5B9E\u9645\u552E\u4EF7-\u4F18\u60E0\u91D1\u989D ",-1),Mu=o("div",{class:"form-tips"},"\u586B\u5199\u5C31\u663E\u793A \u4E0D\u586B\u4E0D\u663E\u793A",-1),Nu=o("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C\u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D\u9762",-1),Su=o("div",{class:"text-lg font-medium flex items-center"},"\u4F1A\u5458\u6743\u76CA",-1),Gu={class:"mt-4"},Hu={key:0},Iu=i(" \u5168\u9009 "),Ou=o("div",{class:"text-lg font-medium"},"\u4E0A\u9650\u8BBE\u7F6E",-1),Pu={class:"mt-4"},Tu=o("div",{class:"form-tips"},"\u8BF7\u8F93\u5165\u5927\u4E8E0\u7684\u6B21\u6570\uFF0C\u4E0D\u586B\u5219\u8868\u793A\u4E0D\u9650\u5236",-1),$u=o("div",{class:"text-lg font-medium"},"\u989D\u5916\u8D60\u9001",-1),ju={class:"mt-4"},Ku=i("\u6761"),Wu=i("\u6761"),Yu=o("div",{class:"text-lg font-medium"},"\u8D2D\u4E70\u9650\u5236",-1),zu={class:"mt-4"},Ju=i("\u6B21"),Qu=o("div",{class:"form-tips"},"\u9650\u5236\u6BCF\u4EBA\u53EF\u91CD\u590D\u8D2D\u4E70\u5F53\u524D\u4F1A\u5458\u5957\u9910\u591A\u5C11\u6B21",-1),Xu={class:"form-tips flex items-center"},Zu=o("div",null,"\u81EA\u5B9A\u4E49\u9650\u8D2D\u63D0\u793A\u8BED\u6587\u6848",-1),ue=i(" \u67E5\u770B\u793A\u4F8B "),ee=o("img",{src:Fu,alt:"",class:"w-[400px]"},null,-1),le=i("\u4FDD\u5B58"),Te=iu({__name:"edit_vip",setup(te){const w=Z(),{query:p}=uu(),x=du(()=>p.id?"\u7F16\u8F91\u4F1A\u5458\u5957\u9910":"\u65B0\u589E\u4F1A\u5458\u5957\u9910"),f=ru(),e=nu({id:"",name:"",duration:"",duration_type:1,is_perpetual:0,sell_price:"",lineation_price:"",give_draw_number:"",is_retrieve:0,retrieve_amount:"",benefits_ids:[],sort:0,status:1,chat_limit:"",give_chat_number:"",tag:"",is_quota:0,quota_value:"",quota_tips:""}),C=()=>{e.value.benefits_ids=v.benefitsLists.length!=e.value.benefits_ids.length?v.benefitsLists.map(r=>r.id):[]},q=_u({name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5957\u9910\u540D\u79F0",trigger:["blur"]}],duration:[{validator:(r,t,n)=>{if(!e.value.is_perpetual&&!e.value.duration)return n(new Error("\u8BF7\u8F93\u5165\u5957\u9910\u65F6\u957F"));n()},trigger:["blur","change"]}],sell_price:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u9645\u552E\u4EF7",trigger:["blur"]}],retrieve_amount:[{required:!0,message:"\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D",trigger:["blur"]}],status:[{required:!0,message:"\u662F\u5426\u4E0A\u67B6",trigger:["blur"]}],is_quota:[{required:!0,message:"\u662F\u5426\u9650\u8D2D",trigger:["blur"]}],quota_value:[{validator:(r,t,n)=>{if(t==0&&e.value.is_quota)return n(new Error("\u9650\u8D2D\u6B21\u6570\u4E0D\u5F97\u5C0F\u4E8E\u6216\u7B49\u4E8E0"));n()},trigger:["blur"]}]}),{optionsData:v}=su({benefitsLists:{api:lu}}),y=async r=>{const t=await tu({id:r});e.value=t},U=async()=>{var r;await((r=f.value)==null?void 0:r.validate()),p.id?await au(e.value):await ou(e.value),w.back()};return mu(()=>{p.id&&y(Number(p.id))}),(r,t)=>{const n=G,_=H,d=I,s=O,D=P,k=T,b=$,B=j,L=K,c=W,V=Y,g=z,R=J,M=X,N=Q;return m(),F("div",null,[u(_,{class:"!border-none",shadow:"never"},{default:l(()=>[u(n,{content:E(x),onBack:t[0]||(t[0]=a=>r.$router.back())},null,8,["content"])]),_:1}),u(N,{class:"mt-4",ref_key:"formRef",ref:f,model:e.value,"label-width":"120px",rules:q},{default:l(()=>[u(_,{shadow:"never",class:"!border-none"},{default:l(()=>[Eu,o("div",fu,[u(s,{label:"\u5957\u9910\u540D\u79F0",prop:"name"},{default:l(()=>[o("div",Du,[u(d,{modelValue:e.value.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.name=a),placeholder:"\u8BF7\u8F93\u5165\u5957\u9910\u540D\u79F0\uFF0C\u5982\uFF1A\u6708\u5EA6\u4F1A\u5458\u3001\u5B63\u5EA6\u4F1A\u5458",clearable:"",class:"w-[360px]"},null,8,["modelValue"])])]),_:1}),u(s,{prop:"duration"},{label:l(()=>[bu]),default:l(()=>[o("div",Bu,[u(d,{modelValue:e.value.duration,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.duration=a),placeholder:"\u8BF7\u8F93\u5165\u6574\u6570",clearable:"",class:"w-[360px]",disabled:!!e.value.is_perpetual},{append:l(()=>[u(k,{modelValue:e.value.duration_type,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.duration_type=a),class:"w-[80px]"},{default:l(()=>[u(D,{value:1,label:"\u4E2A\u6708"}),u(D,{value:2,label:"\u5929"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue","disabled"]),u(b,{class:"ml-[4px]",modelValue:e.value.is_perpetual,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.is_perpetual=a),"true-label":1,"false-label":0},{default:l(()=>[Vu]),_:1},8,["modelValue"])])]),_:1}),u(s,{label:"\u5B9E\u9645\u552E\u4EF7",prop:"sell_price"},{default:l(()=>[o("div",gu,[u(d,{modelValue:e.value.sell_price,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.sell_price=a),placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9645\u552E\u4EF7",clearable:"",class:"w-[360px]"},{append:l(()=>[hu]),_:1},8,["modelValue"])])]),_:1}),u(s,{label:"\u5212\u7EBF\u4EF7"},{default:l(()=>[o("div",Au,[u(d,{modelValue:e.value.lineation_price,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.lineation_price=a),clearable:"",class:"w-[360px]",placeholder:"\u8BF7\u8F93\u5165\u5212\u7EBF\u4EF7"},{append:l(()=>[wu]),_:1},8,["modelValue"])])]),_:1}),u(s,{label:"\u633D\u56DE\u4F18\u60E0"},{default:l(()=>[o("div",null,[u(L,{modelValue:e.value.is_retrieve,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.is_retrieve=a),class:"ml-4"},{default:l(()=>[u(B,{label:1},{default:l(()=>[xu]),_:1}),u(B,{label:0},{default:l(()=>[Cu]),_:1})]),_:1},8,["modelValue"]),o("div",qu,[yu,u(V,{placement:"right",width:200,trigger:"hover"},{reference:l(()=>[u(c,{link:"",type:"primary"},{default:l(()=>[Uu]),_:1})]),default:l(()=>[ku]),_:1})])])]),_:1}),e.value.is_retrieve==1?(m(),h(s,{key:0,label:"\u4F18\u60E0\u91D1\u989D",prop:"retrieve_amount"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.retrieve_amount,"onUpdate:modelValue":t[8]||(t[8]=a=>e.value.retrieve_amount=a),clearable:"",class:"w-[360px]",placeholder:"\u8BF7\u8F93\u5165\u4F18\u60E0\u91D1\u989D"},{append:l(()=>[Lu]),_:1},8,["modelValue"]),Ru])]),_:1})):A("",!0),u(s,{label:"\u5957\u9910\u6807\u7B7E"},{default:l(()=>[o("div",null,[u(d,{class:"w-[360px]",modelValue:e.value.tag,"onUpdate:modelValue":t[9]||(t[9]=a=>e.value.tag=a),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"]),Mu])]),_:1}),u(s,{label:"\u6392\u5E8F"},{default:l(()=>[o("div",null,[u(d,{class:"w-[360px]",modelValue:e.value.sort,"onUpdate:modelValue":t[10]||(t[10]=a=>e.value.sort=a)},null,8,["modelValue"]),Nu])]),_:1}),u(s,{label:"\u662F\u5426\u4E0A\u67B6",prop:"status"},{default:l(()=>[o("div",null,[u(g,{modelValue:e.value.status,"onUpdate:modelValue":t[11]||(t[11]=a=>e.value.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),_:1})])]),_:1}),u(_,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[Su,o("div",Gu,[u(s,{label:"\u4F1A\u5458\u6743\u76CA"},{default:l(()=>[E(v).benefitsLists.length?(m(),F("div",Hu,[o("div",null,[u(c,{link:"",type:"primary",onClick:C},{default:l(()=>[Iu]),_:1})]),o("div",null,[u(R,{modelValue:e.value.benefits_ids,"onUpdate:modelValue":t[12]||(t[12]=a=>e.value.benefits_ids=a)},{default:l(()=>[(m(!0),F(pu,null,vu(E(v).benefitsLists,(a,S)=>(m(),h(b,{key:S,label:a.id},{default:l(()=>[i(cu(a.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])):A("",!0)]),_:1})])]),_:1}),u(_,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[Ou,o("div",Pu,[u(s,{label:"\u6BCF\u65E5\u5BF9\u8BDD\u4E0A\u9650"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.chat_limit,"onUpdate:modelValue":t[13]||(t[13]=a=>e.value.chat_limit=a),placeholder:"\u8BF7\u8F93\u5165\u6BCF\u65E5\u5BF9\u8BDD\u4E0A\u9650\u6B21\u6570",class:"w-[360px]"},null,8,["modelValue"]),Tu])]),_:1})])]),_:1}),u(_,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[$u,o("div",ju,[u(s,{label:"\u8D60\u9001\u5BF9\u8BDD\u6761\u6570"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.give_chat_number,"onUpdate:modelValue":t[14]||(t[14]=a=>e.value.give_chat_number=a),placeholder:"\u4E3A\u7A7A\u6216\u8005\u586B0\u8868\u793A\u4E0D\u8D60\u9001",class:"w-[360px]"},{append:l(()=>[Ku]),_:1},8,["modelValue"])])]),_:1}),u(s,{label:"\u8D60\u9001\u7ED8\u753B\u6761\u6570"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.give_draw_number,"onUpdate:modelValue":t[15]||(t[15]=a=>e.value.give_draw_number=a),placeholder:"\u4E3A\u7A7A\u6216\u8005\u586B0\u8868\u793A\u4E0D\u8D60\u9001",class:"w-[360px]"},{append:l(()=>[Wu]),_:1},8,["modelValue"])])]),_:1})])]),_:1}),u(_,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[Yu,o("div",zu,[u(s,{label:"\u662F\u5426\u9650\u8D2D",prop:"is_quota"},{default:l(()=>[o("div",null,[u(g,{modelValue:e.value.is_quota,"onUpdate:modelValue":t[16]||(t[16]=a=>e.value.is_quota=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])])]),_:1}),u(s,{label:"\u9650\u5236\u6BCF\u4EBA\u53EF\u8D2D\u4E70",prop:"quota_value"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.quota_value,"onUpdate:modelValue":t[17]||(t[17]=a=>e.value.quota_value=a),class:"w-[360px]"},{append:l(()=>[Ju]),_:1},8,["modelValue"]),Qu])]),_:1}),u(s,{label:"\u9650\u8D2D\u63D0\u793A\u8BED"},{default:l(()=>[o("div",null,[u(d,{modelValue:e.value.quota_tips,"onUpdate:modelValue":t[18]||(t[18]=a=>e.value.quota_tips=a),class:"w-[360px]",type:"textarea",rows:"4"},null,8,["modelValue"]),o("div",Xu,[Zu,u(V,{placement:"top-start",width:"auto",trigger:"hover"},{reference:l(()=>[u(c,{link:"",type:"primary"},{default:l(()=>[ue]),_:1})]),default:l(()=>[ee]),_:1})])])]),_:1})])]),_:1}),u(M,null,{default:l(()=>[u(c,{type:"primary",onClick:U},{default:l(()=>[le]),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});export{Te as default};
