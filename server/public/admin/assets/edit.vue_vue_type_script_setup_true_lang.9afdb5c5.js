import{C as L,B as P,L as z,t as I,D as N,K}from"./element-plus.38726bbd.js";import{_ as M}from"./picker.a9db97c4.js";import{s as O}from"./category.49b27431.js";import{e as T,b as W,g as j}from"./manage.b946377a.js";import{P as G}from"./index.1c6c033d.js";import{d as H,s as F,r as J,e as b,_ as w,o as _,c as B,V as l,M as s,u as n,a as E,W as Q,aa as X,L as Y}from"./@vue.581f5ce0.js";const Z={class:"edit-popup"},$=E("div",{class:"form-tips"},"\u5982\u4E0D\u9009\u62E9\u5206\u7C7B\uFF0C\u5219\u9ED8\u8BA4\u663E\u793A\u5728\u524D\u53F0\u7684\u3010\u5168\u90E8\u3011\u4E2D",-1),re=H({__name:"edit",emits:["success","close"],setup(ee,{expose:V,emit:f}){const g=F(),p=F(),m=J("add"),v=b(()=>m.value=="edit"?"\u7F16\u8F91\u7ED8\u753B":"\u65B0\u589E\u7ED8\u753B"),u=w({id:"",prompts:"",prompts_cn:"",sort:0,is_show:1,category_id:"",avatar:"",nickname:"",image:"",source:1}),i=w({loading:!0,lists:[]}),C={image:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u7247",trigger:["blur"]}],prompts:[{required:!0,message:"\u8BF7\u8F93\u5165\u63D0\u793A\u8BCD",trigger:["blur"]}]},d=b(()=>u.source==2),y=async()=>{i.loading=!0;try{const{lists:o}=await O();i.lists=o,i.loading=!1}catch(o){i.loading=!1,console.log("\u83B7\u53D6\u7ED8\u753B\u5206\u7C7B\u5931\u8D25=>",o)}},x=async()=>{var o,e;await((o=g.value)==null?void 0:o.validate()),m.value=="edit"?await T(u):await W(u),(e=p.value)==null||e.close(),f("success")},k=()=>{f("close")},h=(o="add",e)=>{var r;m.value=o,(r=p.value)==null||r.open(),y(),e&&R(e)},R=async o=>{var e,r;try{const t=await j({id:o});D(t),u.image=t.thumbnail||t.image,u.prompts=(e=t.original_prompts)==null?void 0:e.prompt_en,u.prompts_cn=(r=t.original_prompts)==null?void 0:r.prompt}catch(t){console.log("\u83B7\u53D6\u8BE6\u60C5\u5931\u8D25=>",t)}},D=async o=>{for(const e in u)o[e]!=null&&o[e]!=null&&(u[e]=o[e])};return V({open:h,setFormData:D}),(o,e)=>{const r=M,t=L,c=P,A=K,U=z,S=I,q=N;return _(),B("div",Z,[l(G,{ref_key:"popupRef",ref:p,title:n(v),async:!0,width:"550px",onConfirm:x,onClose:k},{default:s(()=>[l(q,{class:"ls-form",ref_key:"formRef",ref:g,rules:C,model:u,"label-width":"100px"},{default:s(()=>[l(t,{label:"\u56FE\u7247",prop:"image"},{default:s(()=>[l(r,{modelValue:u.image,"onUpdate:modelValue":e[0]||(e[0]=a=>u.image=a),disabled:n(d)},null,8,["modelValue","disabled"])]),_:1}),l(t,{label:n(d)?"\u7528\u6237\u8F93\u5165":"\u4E2D\u6587\u63D0\u793A\u8BCD"},{default:s(()=>[l(c,{disabled:n(d),class:"w-[380px]",modelValue:u.prompts_cn,"onUpdate:modelValue":e[1]||(e[1]=a=>u.prompts_cn=a),type:"textarea",autosize:{minRows:4,maxRows:20},placeholder:n(d)?"":"\u8BF7\u8F93\u5165\u4E2D\u6587\u63D0\u793A\u8BCD"},null,8,["disabled","modelValue","placeholder"])]),_:1},8,["label"]),l(t,{label:"\u82F1\u6587\u63D0\u793A\u8BCD",prop:"prompts"},{default:s(()=>[l(c,{disabled:n(d),class:"w-[380px]",modelValue:u.prompts,"onUpdate:modelValue":e[2]||(e[2]=a=>u.prompts=a),type:"textarea",autosize:{minRows:4,maxRows:20},placeholder:"\u8BF7\u8F93\u5165\u82F1\u6587\u63D0\u793A\u8BCD"},null,8,["disabled","modelValue"])]),_:1}),l(t,{label:"\u6240\u5C5E\u5206\u7C7B",prop:"category_id"},{default:s(()=>[E("div",null,[l(U,{class:"w-[380px]",modelValue:u.category_id,"onUpdate:modelValue":e[3]||(e[3]=a=>u.category_id=a),placeholder:"\u5168\u90E8"},{default:s(()=>[(_(!0),B(Q,null,X(i.lists,a=>(_(),Y(A,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),$])]),_:1}),l(t,{label:"\u7528\u6237\u5934\u50CF",prop:"avatar"},{default:s(()=>[l(r,{modelValue:u.avatar,"onUpdate:modelValue":e[4]||(e[4]=a=>u.avatar=a),disabled:n(d)},null,8,["modelValue","disabled"])]),_:1}),l(t,{label:"\u7528\u6237\u6635\u79F0"},{default:s(()=>[l(c,{disabled:n(d),class:"w-[380px]",modelValue:u.nickname,"onUpdate:modelValue":e[5]||(e[5]=a=>u.nickname=a),placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u6635\u79F0"},null,8,["disabled","modelValue"])]),_:1}),l(t,{label:"\u662F\u5426\u663E\u793A",prop:"is_show"},{default:s(()=>[l(S,{modelValue:u.is_show,"onUpdate:modelValue":e[6]||(e[6]=a=>u.is_show=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{re as _};
