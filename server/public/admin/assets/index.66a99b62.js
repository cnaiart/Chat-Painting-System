import{B as H,C as J,K as Q,L as X,w as Y,D as Z,M as ee,N as te,b as le,t as ae,O as oe,P as se}from"./element-plus.38726bbd.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang.c6066b25.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang.42418fb0.js";import{d as ie,s as re,_ as me,r as y,ar as de,o as n,c as S,V as e,M as l,ac as pe,u,W as L,aa as ce,a as h,O as c,L as m,U as $,k as _e,S as fe,T as _,n as A}from"./@vue.581f5ce0.js";import{u as ve}from"./usePaging.2d3fb421.js";import{s as U,_ as Fe,d as Ee,c as ge}from"./edit.vue_vue_type_script_setup_true_lang.945e7eb0.js";import{s as ke}from"./type.86ea506e.js";import{f as Ce}from"./index.0aa35fa2.js";import"./lodash-es.b552e321.js";import"./async-validator.fb49d0f5.js";import"./@vueuse.788ba4d8.js";import"./@element-plus.048d13fe.js";import"./dayjs.3bbbdfdd.js";import"./axios.ef5f3479.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./index.1c6c033d.js";import"./vue-drag-resize.3665149e.js";import"./picker.a9db97c4.js";import"./index.8a8e47a8.js";import"./index.ca229a30.js";import"./index.850f9b25.js";import"./index.vue_vue_type_script_setup_true_lang.8d1a4714.js";import"./vue3-video-play.35f34caf.js";import"./vuedraggable.9c55756f.js";import"./vue.56b77d04.js";import"./sortablejs.0eba38f1.js";import"./lodash.ccf63c29.js";import"./vue-router.f90229e4.js";import"./pinia.8de84ecb.js";import"./vue-demi.ebc8116b.js";import"./css-color-function.7bd56a8d.js";import"./color.4d72ae60.js";import"./clone.f3914b59.js";import"./color-convert.755d189f.js";import"./color-name.e7a4e1d3.js";import"./color-string.e356f5de.js";import"./balanced-match.d2a36341.js";import"./debug.e3c4d4cf.js";import"./ms.a9ae1d6d.js";import"./nprogress.db25c43d.js";import"./vue-clipboard3.37da43ca.js";import"./clipboard.51333a27.js";import"./echarts.8d7a50ae.js";import"./zrender.1084fa23.js";import"./tslib.60310f1a.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.18a086c3.js";const he=_("\u67E5\u8BE2"),be=_("\u91CD\u7F6E"),ye={class:"mb-4"},we=_(" \u65B0\u589E\u6280\u80FD "),Be=_(" \u6279\u91CF\u5220\u9664 "),Ve=_(" \u7F16\u8F91 "),De=_(" \u5220\u9664 "),xe={class:"flex justify-end mt-4"},Vt=ie({__name:"index",setup(Se){const F=re(),i=me({name:"",category_id:"",status:""}),E=y(!1),w=y([]),b=y([]),M=o=>{b.value=o},N=async()=>{var o;E.value=!0,await A(),(o=F.value)==null||o.open("add")},P=async o=>{var a,k;E.value=!0,await A(),(a=F.value)==null||a.open("edit"),(k=F.value)==null||k.setFormData(o)},B=async o=>{await Ce.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),await Ee({id:o}),g()},R=async()=>{const{lists:o}=await ke();w.value=o},T=o=>{ge({id:o})},{pager:d,getLists:g,resetPage:V,resetParams:z}=ve({fetchFun:U,params:i});return g(),R(),(o,a)=>{const k=H,C=J,f=Q,D=X,p=Y,K=ue,I=Z,x=ee,s=te,O=le,j=ae,q=oe,W=ne,v=de("perms"),G=se;return n(),S(L,null,[e(x,{shadow:"never",class:"!border-none mt-4"},{default:l(()=>[e(I,{ref:"formRef",class:"mb-[-16px]",model:i,inline:!0},{default:l(()=>[e(C,{label:"\u6280\u80FD\u540D\u79F0"},{default:l(()=>[e(k,{class:"w-[280px]",modelValue:i.name,"onUpdate:modelValue":a[0]||(a[0]=t=>i.name=t),placeholder:"\u8BF7\u8F93\u5165\u6280\u80FD\u540D\u79F0",clearable:"",onKeyup:pe(u(V),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(C,{label:"\u6240\u5C5E\u7C7B\u76EE"},{default:l(()=>[e(D,{class:"w-[280px]",modelValue:i.category_id,"onUpdate:modelValue":a[1]||(a[1]=t=>i.category_id=t)},{default:l(()=>[e(f,{label:"\u5168\u90E8",value:""}),(n(!0),S(L,null,ce(w.value,(t,r)=>(n(),m(f,{key:r,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u6280\u80FD\u72B6\u6001"},{default:l(()=>[e(D,{class:"w-[280px]",modelValue:i.status,"onUpdate:modelValue":a[2]||(a[2]=t=>i.status=t)},{default:l(()=>[e(f,{label:"\u5168\u90E8",value:""}),e(f,{label:"\u5F00\u542F",value:"1"}),e(f,{label:"\u5173\u95ED",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(C,null,{default:l(()=>[e(p,{type:"primary",onClick:u(V)},{default:l(()=>[he]),_:1},8,["onClick"]),e(p,{onClick:u(z)},{default:l(()=>[be]),_:1},8,["onClick"]),e(K,{class:"ml-2.5","fetch-fun":u(U),params:i,"page-size":u(d).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[h("div",ye,[c((n(),m(p,{type:"primary",onClick:N},{default:l(()=>[we]),_:1})),[[v,["skill.skill/add"]]]),c((n(),m(p,{type:"default",plain:!0,disabled:!b.value.length,onClick:a[3]||(a[3]=t=>B(b.value.map(r=>r.id)))},{default:l(()=>[Be]),_:1},8,["disabled"])),[[v,["skill.skill/del"]]])]),c((n(),m(q,{size:"large",data:u(d).lists,onSelectionChange:M},{default:l(()=>[e(s,{type:"selection",width:"55"}),e(s,{label:"\u56FE\u6807",prop:"sn","min-width":"100"},{default:l(({row:t})=>[e(O,{src:t.image,class:"w-[44px] h-[44px]"},null,8,["src"])]),_:1}),e(s,{label:"\u6280\u80FD\u540D\u79F0",prop:"name","min-width":"120"}),e(s,{label:"\u63CF\u8FF0",prop:"describe","min-width":"180"}),e(s,{label:"\u6240\u5C5E\u7C7B\u76EE",prop:"category_name","min-width":"180"}),c((n(),m(s,{label:"\u72B6\u6001","min-width":"100"},{default:l(({row:t})=>[e(j,{onChange:r=>T(t.id),modelValue:t.status,"onUpdate:modelValue":r=>t.status=r,"active-value":1,"inactive-value":0},null,8,["onChange","modelValue","onUpdate:modelValue"])]),_:1})),[[v,["skill.skill/status"]]]),e(s,{label:"\u8BBF\u95EE\u6570\u636E/\u6B21","min-width":"160"},{default:l(({row:t})=>[h("div",null,"\u4ECA\u65E5\u8BBF\u95EE\uFF1A"+$(t.day_use_count),1),h("div",null,"\u7D2F\u8BA1\u8BBF\u95EE\uFF1A"+$(t.all_use_count),1)]),_:1}),e(s,{label:"\u6392\u5E8F",prop:"sort","min-width":"100"}),e(s,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"create_time","min-width":"180"}),e(s,{label:"\u64CD\u4F5C","min-width":"180"},{default:l(({row:t})=>[c((n(),m(p,{type:"primary",link:"",onClick:r=>P(t)},{default:l(()=>[Ve]),_:2},1032,["onClick"])),[[v,["skill.skill/edit"]]]),c((n(),m(p,{type:"danger",link:"",onClick:r=>B([t.id])},{default:l(()=>[De]),_:2},1032,["onClick"])),[[v,["skill.skill/del"]]])]),_:1})]),_:1},8,["data"])),[[G,u(d).loading]]),h("div",xe,[e(W,{modelValue:u(d),"onUpdate:modelValue":a[4]||(a[4]=t=>_e(d)?d.value=t:null),onChange:u(g)},null,8,["modelValue","onChange"])])]),_:1}),E.value?(n(),m(Fe,{key:0,ref_key:"editRef",ref:F,onSuccess:u(g),onClose:a[5]||(a[5]=t=>E.value=!1)},null,8,["onSuccess"])):fe("",!0)],64)}}});export{Vt as default};
