import{d as e,l as a,A as t,r as l,z as s,K as o,o as r,i,g as p,f as u,aA as m,aB as n,h as c,t as d,e as f,j as _,F as x,m as y,O as g,b3 as v,as as h,a as w,b as j,k,y as b,S as V,u as C,au as R}from"./index-c4e9cb21.js";import{_ as z}from"./page-meta.0a6ed5a4.js";import{_ as $}from"./u-image.259ae993.js";import{_ as A}from"./z-paging.0c0bd55f.js";import{_ as B}from"./u-popup.550d714f.js";import{_ as F}from"./create_record.3474bfb9.js";import{f as N,r as O,s as S}from"./chat.ffb7aceb.js";import{u as T}from"./useCopy.c5769034.js";import{C as U}from"./creation-history-item.99a48e6f.js";import{F as D}from"./floating-menu.33dda305.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-icon.9d0b6bc8.js";import"./u-read-more.a855151d.js";import"./u-loading.5334235e.js";import"./text-item.vue_vue_type_script_setup_true_lang.00f45e3c.js";import"./katex.02915daa.js";import"./_commonjsHelpers.02d3be64.js";import"./mp-html.30804373.js";import"./icon_copy.2cfe0671.js";const H=e({__name:"create_history",setup(e){const{copy:H}=T(),I=a(),K=g(),L=t({id:0,type:2}),P=l({}),Q=l(!1),X=t({title:"",text:""}),Z=l([]),q=s(),E=async(e,a)=>{var t;const l=(await O({other_id:L.id,type:L.type,page_no:e,page_size:a})).lists.map((e=>{let a="";if(v(e.ask)){const t=(null==e?void 0:e.ask[0])||{};a=`${t.title}：${t.value}`}else a=e.ask;return{...e,title:a}}));null==(t=q.value)||t.complete(l)},G=async()=>{var e;(await h({title:"温馨提示",content:"删除的记录无法恢复，确定？"})).cancel||(await S({type:L.type,other_id:L.id}),null==(e=q.value)||e.reload())};return o((async e=>{var a;L.id=Number(null==e?void 0:e.id),await(async()=>{const e=await N({id:L.id});P.value=e})(),null==(a=q.value)||a.reload(!0)})),(e,a)=>{const t=w(j("page-meta"),z),l=w(j("u-image"),$),s=k,o=b,g=w(j("z-paging"),A),v=V,h=w(j("u-popup"),B);return r(),i(x,null,[p(t,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),p(g,{ref_key:"pagingRef",ref:q,auto:!1,modelValue:Z.value,"onUpdate:modelValue":a[0]||(a[0]=e=>Z.value=e),"auto-show-back-to-top":"",onQuery:E},{top:u((()=>[m(p(s,{class:"flex items-center p-[20rpx]"},{default:u((()=>[p(l,{src:P.value.image,width:"42",height:"42"},null,8,["src"]),p(s,{class:"flex-1 min-w-0 text-xl font-medium line-clamp-1 mx-[20rpx]"},{default:u((()=>[c(d(P.value.name),1)])),_:1}),Z.value.length?(r(),f(s,{key:0,class:"text-sm",onClick:G},{default:u((()=>[c(" 清空记录 ")])),_:1})):_("v-if",!0)])),_:1},512),[[n,P.value.name]])])),empty:u((()=>[p(s,{class:"flex flex-col justify-center items-center pb-[300rpx]"},{default:u((()=>[p(o,{class:"w-[300rpx] h-[300rpx]",src:F,alt:""}),p(s,{class:"my-[32rpx] text-muted"},{default:u((()=>[c(" 暂无数据～ ")])),_:1})])),_:1})])),default:u((()=>[p(s,{class:"px-[20rpx]"},{default:u((()=>[(r(!0),i(x,null,y(Z.value,(e=>(r(),f(s,{key:e.id},{default:u((()=>[(r(!0),i(x,null,y(e.reply,((a,t)=>(r(),f(s,{class:"mt-[20rpx]",key:t},{default:u((()=>[p(U,{title:e.title,time:e.create_time,content:a,index:t,overflow:!0,"record-id":e.id,"show-rewrite":e.extra,showVoice:C(I).getIsVoiceOpen,onCopy:C(H),onDelete:G,onClickTitle:a=>((e,a)=>{X.text=e,X.title=a,Q.value=!0})(a,e.title),onRewrite:a=>(async e=>{await K.navigateBack(),R("createRewrite",e.extra)})(e)},null,8,["title","time","content","index","record-id","show-rewrite","showVoice","onCopy","onClickTitle","onRewrite"])])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})])),_:1},8,["modelValue"]),p(h,{modelValue:Q.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Q.value=e),mode:"bottom","border-radius":"14",closeable:""},{default:u((()=>[p(s,{class:"h-[85vh] flex flex-col"},{default:u((()=>[p(s,{class:"p-[30rpx] pr-[60rpx] text-xl font-medium border-0 border-b border-light border-solid"},{default:u((()=>[p(s,{class:"line-clamp-1"},{default:u((()=>[c(" 标题详情 ")])),_:1})])),_:1}),p(s,{class:"flex-1 min-h-0"},{default:u((()=>[p(v,{class:"h-full","scroll-y":""},{default:u((()=>[p(s,{class:"p-[30rpx]"},{default:u((()=>[p(s,{class:"flex-1 min-w-0 text-lg whitespace-pre-wrap"},{default:u((()=>[c(d(X.title),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),_("    悬浮菜单    "),p(D)],64)}}});export{H as default};
