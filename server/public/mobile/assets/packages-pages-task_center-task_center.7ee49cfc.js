import{d as e,l as a,r as t,P as s,x as r,W as l,C as i,D as n,E as o,o as u,i as d,g as p,f as c,h as f,t as m,u as _,e as y,F as w,m as x,j as g,a as v,b as k,J as h,k as b,aM as C,aZ as j,as as S,aD as I,a_ as O,a$ as N,H as W}from"./index-c4e9cb21.js";import{_ as D}from"./page-meta.0a6ed5a4.js";import{_ as R}from"./u-icon.9d0b6bc8.js";import{_ as U}from"./u-button.d1dcbae7.js";import{_ as $}from"./u-empty.8b31fa6b.js";import{_ as A}from"./page-status.8f3a35bf.js";import{_ as M}from"./tabbar.vue_vue_type_script_setup_true_lang.de757f7b.js";import{u as T}from"./useCopy.c5769034.js";import{F as X}from"./floating-menu.33dda305.js";import{_ as z}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading.5334235e.js";import"./u-badge.4654495c.js";const E=z(e({__name:"task_center",setup(e){const{getImageUrl:z}=a(),E=t(s.LOADING),{copy:L}=T(),F=()=>{C({url:"/packages/pages/drawing/drawing?type=1"})},H=t({title:"",subTitle:"",content:[],originalContent:[]}),J=r(),{userInfo:Z}=l(J),G=async()=>{try{await(async()=>{H.value.originalContent=await N()})(),await(async()=>{const e=await W({id:10}),a=JSON.parse(e.data)[0].content,t={},s=[];for(const r of H.value.originalContent)delete r.image,t[r.type]=r;for(const r of null==a?void 0:a.data.filter((e=>e.show)))r.type in t&&s.push({...r,...t[r.type]});H.value.originalContent=[],H.value.content=s,H.value.title=a.title,H.value.subTitle=a.subTitle})(),E.value=s.NORMAL}catch(e){console.error(e),E.value=s.ERROR}};return i((()=>{G(),J.getUser()})),n((async()=>{try{await G(),await J.getUser()}catch(e){}o()})),(e,t)=>{const s=v(k("page-meta"),D),r=h,l=b,i=v(k("u-icon"),R),n=v(k("u-button"),U),o=v(k("u-empty"),$),C=v(k("page-status"),A),N=v(k("tabbar"),M);return u(),d(w,null,[p(s,{"page-style":e.$theme.pageStyle},null,8,["page-style"]),p(C,{status:E.value},{error:c((()=>[p(o,{text:"加载出错～"})])),default:c((()=>[p(l,{class:"task-center"},{default:c((()=>[p(l,{class:"bg-primary text-btn-text px-[30rpx] pt-[30rpx] pb-[80rpx] mb-[-50rpx]"},{default:c((()=>[f(" 剩余条数 "),p(r,{class:"text-[48rpx] font-medium"},{default:c((()=>[f(m(_(Z).balance||0),1)])),_:1}),f(" 条 ")])),_:1}),p(l,{class:"px-[30rpx] pb-[20rpx]"},{default:c((()=>[H.value.content.length?(u(),y(l,{key:0,class:"daily-tasks"},{default:c((()=>[p(l,{class:"tasks-title"},{default:c((()=>[p(l,{class:"font-medium text-xl"},{default:c((()=>[f(m(H.value.title),1)])),_:1}),p(l,{class:"ml-[14rpx] text-muted text-sm"},{default:c((()=>[f(m(H.value.subTitle),1)])),_:1})])),_:1}),p(l,{class:"tasks-content"},{default:c((()=>[(u(!0),d(w,null,x(H.value.content,((e,t)=>(u(),y(l,{class:"tasks-item p-[20rpx] flex",key:t},{default:c((()=>[p(i,{class:"flex-none",name:_(z)(e.image),size:120},null,8,["name"]),p(l,{class:"flex-1 min-w-0 ml-[20rpx]"},{default:c((()=>[p(l,{class:"text-xl font-medium"},{default:c((()=>[f(m((null==e?void 0:e.customName)||e.name),1)])),_:2},1024),p(l,{class:"mt-[10rpx] text-xs text-muted text-justify"},{default:c((()=>[1==e.type?(u(),y(r,{key:0},{default:c((()=>[f(" 每日签到，获得 "),e.rewards?(u(),d(w,{key:0},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.rewards),1)])),_:2},1024),f("条对话 ")],64)):g("v-if",!0),e.rewards&&e.draw_rewards?(u(),d(w,{key:1},[f(" ， ")],64)):g("v-if",!0),e.draw_rewards?(u(),d(w,{key:2},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.draw_rewards),1)])),_:2},1024),f("条绘画 ")],64)):g("v-if",!0)])),_:2},1024)):g("v-if",!0),2==e.type?(u(),y(r,{key:1},{default:c((()=>[f(" 邀请1人，获得 "),e.rewards?(u(),d(w,{key:0},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.rewards),1)])),_:2},1024),f("条对话 ")],64)):g("v-if",!0),e.rewards&&e.draw_rewards?(u(),d(w,{key:1},[f(" ， ")],64)):g("v-if",!0),e.draw_rewards?(u(),d(w,{key:2},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.draw_rewards),1)])),_:2},1024),f("条绘画 ")],64)):g("v-if",!0)])),_:2},1024)):g("v-if",!0),3==e.type?(u(),y(r,{key:2},{default:c((()=>[f(" 分享1次，获得 "),e.rewards?(u(),d(w,{key:0},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.rewards),1)])),_:2},1024),f("条对话 ")],64)):g("v-if",!0),e.rewards&&e.draw_rewards?(u(),d(w,{key:1},[f(" ， ")],64)):g("v-if",!0),e.draw_rewards?(u(),d(w,{key:2},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.draw_rewards),1)])),_:2},1024),f("条绘画 ")],64)):g("v-if",!0)])),_:2},1024)):g("v-if",!0),4==e.type?(u(),y(r,{key:3},{default:c((()=>[f(" 分享1次，获得 "),e.rewards?(u(),d(w,{key:0},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.rewards),1)])),_:2},1024),f("条对话 ")],64)):g("v-if",!0),e.rewards&&e.draw_rewards?(u(),d(w,{key:1},[f(" ， ")],64)):g("v-if",!0),e.draw_rewards?(u(),d(w,{key:2},[p(r,{class:"text-error"},{default:c((()=>[f(m(e.draw_rewards),1)])),_:2},1024),f("条绘画 ")],64)):g("v-if",!0)])),_:2},1024)):g("v-if",!0)])),_:2},1024),p(l,{class:"text-primary mt-[14rpx]"},{default:c((()=>[f(" 进度："+m(e.num)+"/"+m(e.max)+" "+m(2==e.type?"人":"次"),1)])),_:2},1024)])),_:2},1024),p(l,{class:"flex-none"},{default:c((()=>[4===e.type?(u(),y(n,{key:0,type:"primary",shape:"circle",size:"medium",customStyle:{padding:"0 24rpx",height:"56rpx"},onClick:F},{default:c((()=>[f(" 去分享 ")])),_:1})):(u(),y(n,{key:1,type:"primary",shape:"circle",size:"medium",customStyle:{padding:"0 24rpx",height:"56rpx"},"open-type":"share",onClick:t=>(e.type,void j({OA_WEIXIN:()=>{S({title:"温馨提示",content:"点击右上角“...”，分享给好友",showCancel:!1})},H5:async()=>{const e=await I(!0);L(e),S({title:"温馨提示",content:"已经复制到剪贴板，请转发给好友",showCancel:!1})},ANDROID:async()=>{const e=a(),t=await O({...e.getShareConfig,...e.getWebsiteConfig}),s=await I(!0);uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:s,title:t.title,imageUrl:t.img_url,success:e=>{console.log("分享成功")},fail:e=>{uni.$u.toast(e.errMsg)}})},IOS:async()=>{const e=a(),t=await O({...e.getShareConfig,...e.getWebsiteConfig}),s=await I(!0);uni.share({provider:"weixin",scene:"WXSceneSession",type:0,href:s,title:t.title,imageUrl:t.img_url,success:e=>{console.log("分享成功")},fail:e=>{uni.$u.toast(e.errMsg)}})}}))},{default:c((()=>[f(" 去分享 ")])),_:2},1032,["onClick"]))])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):g("v-if",!0)])),_:1})])),_:1})])),_:1},8,["status"]),g("    悬浮菜单    "),p(X),p(N)],64)}}}),[["__scopeId","data-v-7d7da1ea"]]);export{E as default};
