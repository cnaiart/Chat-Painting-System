import{w as e,Z as t,ay as n,cX as o,cY as l,u as a,b8 as s,c as r,r as i,d as u,A as c,o as d,i as f,e as m,f as p,g as v,h,t as x,F as y,j as b,m as w,J as _,a as g,b as k,k as S,n as z}from"./index-c4e9cb21.js";import{_ as V}from"./u-icon.9d0b6bc8.js";import{_ as j}from"./u-popup.550d714f.js";import{h as A}from"./chat.ffb7aceb.js";function N(e){return"function"==typeof e?e():a(e)}const R="undefined"!=typeof window&&"undefined"!=typeof document;"undefined"!=typeof WorkerGlobalScope&&(globalThis,WorkerGlobalScope);const C=()=>{};const F=e=>e();function P(e,t=!0,n=!0,o=!1){let l,a,s=0,r=!0,i=C;const u=()=>{l&&(clearTimeout(l),l=void 0,i(),i=C)};return c=>{const d=N(e),f=Date.now()-s,m=()=>a=c();return u(),d<=0?(s=Date.now(),m()):(f>d&&(n||!r)?(s=Date.now(),m()):t&&(a=new Promise(((e,t)=>{i=o?t:e,l=setTimeout((()=>{s=Date.now(),r=!0,e(m()),u()}),Math.max(0,d-f))}))),n||l||(l=setTimeout((()=>r=!0),d)),r=!1,a)}}function B(t,n,o={}){const{eventFilter:l=F,...a}=o;return e(t,(s=l,r=n,function(...e){return new Promise(((t,n)=>{Promise.resolve(s((()=>r.apply(this,e)),{fn:r,thisArg:this,args:e})).then(t).catch(n)}))}),a);var s,r}function D(e,o=!0,l){const a=function(e){return e||s()}();a?t(e,l):o?e():n(e)}function L(e,t,n={}){const{throttle:o=0,trailing:l=!0,leading:a=!0,...s}=n;return B(e,t,{...s,eventFilter:P(o,l,a)})}function O(e){var t;const n=N(e);return null!=(t=null==n?void 0:n.$el)?t:n}const T=R?window:void 0;function W(e){const n=function(){const e=i(!1);return s()&&t((()=>{e.value=!0})),e}();return r((()=>(n.value,Boolean(e()))))}function $(t,n,a={}){const{window:s=T,...i}=a;let u;const c=W((()=>s&&"ResizeObserver"in s)),d=()=>{u&&(u.disconnect(),u=void 0)},f=r((()=>Array.isArray(t)?t.map((e=>O(e))):[O(t)])),m=e(f,(e=>{if(d(),c.value&&s){u=new ResizeObserver(n);for(const t of e)t&&u.observe(t,i)}}),{immediate:!0,flush:"post",deep:!0}),p=()=>{d(),m()};var v;return v=p,o()&&l(v),{isSupported:c,stop:p}}function J(t,n={width:0,height:0},o={}){const{window:l=T,box:a="content-box"}=o,s=r((()=>{var e,n;return null==(n=null==(e=O(t))?void 0:e.namespaceURI)?void 0:n.includes("svg")})),u=i(n.width),c=i(n.height),{stop:d}=$(t,(([e])=>{const n="border-box"===a?e.borderBoxSize:"content-box"===a?e.contentBoxSize:e.devicePixelContentBoxSize;if(l&&s.value){const e=O(t);if(e){const t=l.getComputedStyle(e);u.value=Number.parseFloat(t.width),c.value=Number.parseFloat(t.height)}}else if(n){const e=Array.isArray(n)?n:[n];u.value=e.reduce(((e,{inlineSize:t})=>e+t),0),c.value=e.reduce(((e,{blockSize:t})=>e+t),0)}else u.value=e.contentRect.width,c.value=e.contentRect.height}),o);D((()=>{const e=O(t);e&&(u.value="offsetWidth"in e?e.offsetWidth:n.width,c.value="offsetHeight"in e?e.offsetHeight:n.height)}));const f=e((()=>O(t)),(e=>{u.value=e?n.width:0,c.value=e?n.height:0}));return{width:u,height:c,stop:function(){d(),f()}}}function G(t,o,l,a={}){var u,c,d;const{clone:f=!1,passive:m=!1,eventName:p,deep:v=!1,defaultValue:h,shouldEmit:x}=a,y=s(),b=l||(null==y?void 0:y.emit)||(null==(u=null==y?void 0:y.$emit)?void 0:u.bind(y))||(null==(d=null==(c=null==y?void 0:y.proxy)?void 0:c.$emit)?void 0:d.bind(null==y?void 0:y.proxy));let w=p;o||(o="modelValue"),w=w||`update:${o.toString()}`;const _=e=>{return f?"function"==typeof f?f(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},g=()=>void 0!==t[o]?_(t[o]):h,k=e=>{x?x(e)&&b(w,e):b(w,e)};if(m){const l=g(),a=i(l);let s=!1;return e((()=>t[o]),(e=>{s||(s=!0,a.value=_(e),n((()=>s=!1)))})),e(a,(e=>{s||e===t[o]&&!v||k(e)}),{deep:v}),a}return r({get:()=>g(),set(e){k(e)}})}const H=u({__name:"model-picker",props:{modelValue:null},emits:["update:modelValue"],setup(t,{emit:n}){const o=t,l=r({get:()=>o.modelValue,set(e){n("update:modelValue",e)}}),s=c({show:!1,current:{balance:1,key:"",member_free:!1,model:"",default:!1},modelList:[]});(async()=>{try{const e=await A();s.modelList=e,s.current=e.find((e=>e.default))||e[0]}catch(e){console.log("获取聊天模型数据错误=>",e)}})();return e((()=>s.current),(e=>{l.value=null==e?void 0:e.key})),(e,t)=>{const n=_,o=g(k("u-icon"),V),r=S,i=g(k("u-popup"),j);return d(),f(y,null,[s.modelList.length?(d(),m(r,{key:0,class:"flex items-center justify-between text-xs text-content pb-[20rpx]"},{default:p((()=>[v(r,{class:"inline-flex justify-center items-center rounded-[30px] h-[60rpx] px-[24rpx]",style:{"box-shadow":"0 2px 6px 0 rgba(0, 0, 0, 0.1)"},onClick:t[0]||(t[0]=e=>s.show=!0)},{default:p((()=>[v(n,{class:"text-[#415058] mr-[6px] flex"},{default:p((()=>[v(n,{class:"line-clamp-1"},{default:p((()=>{var e;return[h(x(s.current.alias)+" / ",1),(null==(e=null==s?void 0:s.current)?void 0:e.member_free)?(d(),m(n,{key:1,class:"text-muted"},{default:p((()=>[h(" 会员免费 ")])),_:1})):(d(),m(n,{key:0,class:"flex-1 min-w-0 text-muted"},{default:p((()=>{var e;return[(null==(e=null==s?void 0:s.current)?void 0:e.balance)?(d(),f(y,{key:0},[v(n,null,{default:p((()=>[h("消耗")])),_:1}),v(n,{class:"text-primary"},{default:p((()=>{var e;return[h(x(null==(e=null==s?void 0:s.current)?void 0:e.balance),1)]})),_:1}),v(n,null,{default:p((()=>[h("条对话次数")])),_:1})],64)):(d(),f(y,{key:1},[h(" 免费 ")],64))]})),_:1}))]})),_:1})])),_:1}),v(o,{name:"arrow-down",size:"24rpx"})])),_:1})])),_:1})):b("v-if",!0),v(i,{modelValue:s.show,"onUpdate:modelValue":t[1]||(t[1]=e=>s.show=e),mode:"bottom","border-radius":"14","safe-area-inset-bottom":!0,height:"70%",closeable:""},{default:p((()=>[v(r,{class:"p-[20rpx] text-lg font-bold"},{default:p((()=>[h(" 选择模型 ")])),_:1}),v(r,{class:"pb-[120rpx]"},{default:p((()=>[(d(!0),f(y,null,w(s.modelList,(e=>(d(),m(r,{class:z(["flex justify-center items-center py-[10rpx] px-[24rpx] text-[#415058]",{"!text-primary":a(l)==e.key}]),key:e.key,onClick:t=>(e=>{s.current=e,s.show=!1})(e)},{default:p((()=>[v(r,{class:"mr-[6px] flex-1 min-w-0"},{default:p((()=>[h(x(e.alias)+" / ",1),v(n,{class:z(["text-muted",{"!text-primary":a(l)==e.key}])},{default:p((()=>[e.member_free?(d(),m(n,{key:1},{default:p((()=>[h(" 会员免费 ")])),_:1})):(d(),m(n,{key:0},{default:p((()=>[e.balance?(d(),f(y,{key:0},[v(n,null,{default:p((()=>[h("消耗")])),_:1}),v(n,{class:"text-primary"},{default:p((()=>[h(x(e.balance),1)])),_:2},1024),v(n,null,{default:p((()=>[h("条对话次数")])),_:1})],64)):(d(),f(y,{key:1},[h(" 免费 ")],64))])),_:2},1024))])),_:2},1032,["class"])])),_:2},1024),v(r,{class:z(["ml-[10rpx]",{"opacity-0":a(l)!==e.key}])},{default:p((()=>[v(o,{name:"checkmark",size:"24rpx"})])),_:2},1032,["class"])])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["modelValue"])],64)}}});export{H as _,G as a,J as u,L as w};
