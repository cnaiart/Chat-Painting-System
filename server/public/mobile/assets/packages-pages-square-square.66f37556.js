import{_ as e}from"./page-meta.0a6ed5a4.js";import{ap as t,aw as i,ax as l,o as a,e as s,f as r,g as A,n as o,R as n,y as u,k as d,Y as c,d as g,x as p,z as m,r as h,w as I,a as E,b as f,i as y,F as C,m as v,u as Q,v as b,j as B,ay as x,az as w,l as k,aA as R,aB as G,h as L,t as z,J as j,at as D,Q as S,aC as M,G as V,a1 as Y,aD as O,a3 as F,S as Z,A as U,V as N,U as J}from"./index-c4e9cb21.js";import{_ as T}from"./u-search.6e69441d.js";import{_}from"./u-tabs.30cd1122.js";import{_ as P}from"./tabbar.vue_vue_type_script_setup_true_lang.de757f7b.js";import{g as H,d as W,a as X}from"./square.f48e4f75.js";import{_ as q}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as K}from"./u-icon.9d0b6bc8.js";import{_ as $}from"./z-paging.0c0bd55f.js";import{_ as ee}from"./u-loading.5334235e.js";import{_ as te}from"./u-avatar.83c9bedc.js";import{_ as ie}from"./u-popup.550d714f.js";import{u as le}from"./useCopy.c5769034.js";import{_ as ae}from"./l-painter-image.fa4c3f7b.js";import{_ as se,a as re,b as Ae,c as oe}from"./l-painter.e1bc292c.js";import{_ as ne}from"./u-button.d1dcbae7.js";import{F as ue}from"./floating-menu.33dda305.js";import"./u-badge.4654495c.js";const de=q({name:"u-lazy-load",emits:["click","load","error"],props:{index:{type:[Number,String]},image:{type:String,default:""},imgMode:{type:String,default:"widthFix"},loadingImg:{type:String,default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM0QjNBQjkyQUQ2MTFFQTlCNUQ4RTIzNDE5RUIxNjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM0QjNBQkEyQUQ2MTFFQTlCNUQ4RTIzNDE5RUIxNjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzRCM0FCNzJBRDYxMUVBOUI1RDhFMjM0MTlFQjE2NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzRCM0FCODJBRDYxMUVBOUI1RDhFMjM0MTlFQjE2NyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtRHfPcAAAAzUExURZWVldfX18PDw62trZubm9zc3Li4uKGhoebm5tLS0uHh4c3Nzaenp729vcjIyLKysuvr6141L40AAAcXSURBVHja7NzZlqpGAEBR5lG0//9rIw7IJKJi4or7PGTdtN10wr5SVAEGf/qqArsAiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAIiIAAERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAgAgJEQIAICBABERAg+nmQFMi5Jis+sIniED23jSzIgLTtg2D//iYme/8QBM/9lQ+CAEhbNLM3N9hEHAThX7GPCiBfAxK1b51kD+R7QMLjXg7iCsgWIPUh7pfVozG791oeBPngm48G583uW5GkBvI+SBaM2xXDn1oqum423bX/mgF5FySc2cv93Voug9TdZotsggnkBZB2NzbhrSY5HnoG07jei8dvzsJB/c3W60SALILE46+WCztsbhPR7R2VJq0ukEcT49nyy8QhaKcRa3fYHZD4+ufqOJAcgDz8/59vtw1I3QP5K6JsOG0vm3hce4I8LQp/BaRZGJC3AAn7IKOKXbC+7EdA5vdmmVwOLksgRThqOqiH4XEGsht+peoPUE8U/jJIO5OLH4GEwUslV5G0PTBG5Uiw/Y2jyigO3l9HAHKv9PYb82LloH74dZBoBUgar+l48NsNvtD0fkez9iwrAvIYZDRCl+Xs149Hm/KZmQ+QjUCiO1ei4ru7EsgnQYrkznlQb7thCuRfAzlOAPN72427P4VA/i2Q/DKT/Ls/VR8fvIBsDZIuz7TPF6TCbnk4GJkB2RokejTjuE7/unlgCuSTIO0Cy+Plp6vDfnQlBchy8QtjSHVd3EgmK1bHLm+H6+nXYbz2DuQRSPnqoL7vvq0u70on4zvxgCyWD3b9UyDVdW24PaWaiGTnFZJwPIQAebDpIKheBIm7n124ZthMJipAlkqHO+IZkP1tbfzOJark/A7MgKyvvl60fRqkvXfhuow+t9+q00+0/yyBrK8ZngOtBzldhw2X9tvpNGty0gvkmbPeJ0Cy/r09s/stbmfo0yMWkEdjevgKyOn2t2pxv7UXoibTdCDLje9/Ww1ymqzn87dbp92242ZmMRjI8hASvwKSLq4udqN6ksw8nxXN3tszD9L8Gkg+2mFrQYql5az4tvFj5xOx4VwnSdeBtGdyPwUytxK77pBVlNHdO7OK3rh/eTPUvdutT3fO52tuHMqD4N7llv8pyOQQ//w19YVDfX27+Sfuby9/6nau4pdA8vEdOZuChEH/quHt0Jg+IRJ/5+PrHwKZXfjbDiS73Zo7mu5UkzX7uTsXe0e/7nC3ePf1O69+BUg2XDfZCqSqOu7rGVf8cHBe8zhC2b61dtUHXv0OkGo6ZL4JkpbRYXdUaFevivx2M/1GIOctNh949TtAoumQ+TpIHMX54CJu+8BDd8FkE5BqcZh/59XvAClmTvKfB0nDqIlHo3T70SftyW1eX9dXtgQJqs1f/Q6QaOa/7wmQKtxH8eiGoCRuovODIO3VxOMmruZbHrLyD7z6DSDtGyT7ew1kf9hNn07c986JTovzzem0Id9wUG+Vk/IDr34DSNR7huZJkMFT6vEhqrPx/j5cnlZML8N6/PAzh9Y99Flm5Yde/c9BquDOkvkKkMP58dA4qi9vivE8JOvGz/j8FokfPpr288+pH2ZPOZrLmeGD+7KOh6dqYWJ48ki7yUg0tz0go/fv/LLddfV3sgOLJyaGPY/zrSlh1a36Arkzoue9CyG35ze6E6/dzO2Ga0EGHqdRJIkfn9/8OEjTW8Vq91ZWh39FeehWA7Nu9ft8CpUEk1WWOyDF0OPyEU2Pnzf/bZC0P6IPzmAvu7KauQBVrgKpJ0tG2arHzX8e5Pb3PezNs/PrX+3JMyCLn9XXf37tPFHvt09WfCDDjx+yyn1/p1V11j7GnB/q3leLuVva79S/tzed+db08YpF4uOZtmz/9oXWMq6BCAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAERECACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiACAgQAQEiIEAEBIiAALELvqt/BBgACqVeUBXxcCkAAAAASUVORK5CYII="},errorImg:{type:String,default:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZAAAAGQCAMAAAC3Ycb+AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODdDMjhENDYyQUQ2MTFFQTlDQ0VBODgxQjFFOEEyMEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODdDMjhENDcyQUQ2MTFFQTlDQ0VBODgxQjFFOEEyMEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4N0MyOEQ0NDJBRDYxMUVBOUNDRUE4ODFCMUU4QTIwQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4N0MyOEQ0NTJBRDYxMUVBOUNDRUE4ODFCMUU4QTIwQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhLwhikAAAAzUExURZWVldfX162t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"},threshold:{type:[Number,String],default:100},duration:{type:[Number,String],default:500},effect:{type:String,default:"ease-in-out"},isEffect:{type:Boolean,default:!0},borderRadius:{type:[Number,String],default:0},height:{type:[Number,String],default:"100%"}},data(){return{isShow:!1,opacity:1,time:this.duration,loadStatus:"",isError:!1,elIndex:this.$u.guid()}},computed:{getThreshold(){let e=t(Math.abs(this.threshold));return this.threshold<0?-e:e},imgHeight(){return this.$u.addUnit(this.height)}},created(){this.observer={}},watch:{isShow(e){this.isEffect&&(this.time=0,this.opacity=0,setTimeout((()=>{this.time=this.duration,this.opacity=1}),30))},image(e){e?(this.init(),this.isError=!1):this.isError=!0}},methods:{init(){this.isError=!1,this.loadStatus=""},clickImg(){0==this.isShow||this.isError,this.$emit("click",this.index)},imgLoaded(e){""==this.loadStatus?this.loadStatus="lazyed":"lazyed"==this.loadStatus&&(this.loadStatus="loaded",this.$emit("load",this.index))},errorImgLoaded(){this.$emit("error",this.index)},loadError(){this.isError=!0},disconnectObserver(e){const t=this[e];t&&t.disconnect()}},beforeUnmount(){},mounted(){this.$nextTick((()=>{i("uOnReachBottom",(()=>{this.isShow||(this.isShow=!0)}))})),setTimeout((()=>{this.disconnectObserver("contentObserver");const e=l(this);e.relativeToViewport({bottom:this.getThreshold}).observe(".u-lazy-item-"+this.elIndex,(e=>{e.intersectionRatio>0&&(this.isShow=!0,this.disconnectObserver("contentObserver"))})),this.contentObserver=e}),30)}},[["render",function(e,t,i,l,c,g){const p=u,m=d;return a(),s(m,{class:o(["u-wrap","u-lazy-item-"+c.elIndex]),style:n({opacity:Number(c.opacity),borderRadius:i.borderRadius+"rpx",transition:`opacity ${c.time/1e3}s ease-in-out`})},{default:r((()=>[A(m,{class:o("u-lazy-item-"+c.elIndex)},{default:r((()=>[c.isError?(a(),s(p,{key:1,style:n({borderRadius:i.borderRadius+"rpx",height:g.imgHeight}),class:"u-lazy-item error",src:i.errorImg,mode:i.imgMode,onLoad:g.errorImgLoaded,onClick:g.clickImg},null,8,["style","src","mode","onLoad","onClick"])):(a(),s(p,{key:0,style:n({borderRadius:i.borderRadius+"rpx"}),class:"u-lazy-item",src:c.isShow?i.image:i.loadingImg,mode:i.imgMode,onLoad:g.imgLoaded,onError:g.loadError,onClick:g.clickImg},null,8,["style","src","mode","onLoad","onError","onClick"]))])),_:1},8,["class"])])),_:1},8,["style","class"])}],["__scopeId","data-v-a2b6f2c6"]]);const ce=q({name:"u-waterfall",emits:["update:modelValue","input"],props:{value:{type:Array,default:function(){return[]}},modelValue:{type:Array,default:function(){return[]}},addTime:{type:[Number,String],default:200},idKey:{type:String,default:"id"}},data:()=>({leftList:[],rightList:[],tempList:[],children:[]}),watch:{copyFlowList(e,t){let i=Array.isArray(t)&&t.length>0?t.length:0;this.tempList=this.tempList.concat(this.cloneData(e.slice(i))),this.splitData()}},mounted(){this.tempList=this.cloneData(this.copyFlowList),this.splitData()},computed:{valueCom(){return this.modelValue},copyFlowList(){return this.cloneData(this.valueCom)}},methods:{async splitData(){if(!this.tempList.length)return;let e=await this.$uGetRect("#u-left-column"),t=await this.$uGetRect("#u-right-column"),i=this.tempList[0];i&&(e.height<t.height?this.leftList.push(i):e.height>t.height?this.rightList.push(i):this.leftList.length<=this.rightList.length?this.leftList.push(i):this.rightList.push(i),this.tempList.splice(0,1),this.tempList.length&&setTimeout((()=>{this.splitData()}),this.addTime))},cloneData:e=>JSON.parse(JSON.stringify(e)),clear(){this.leftList=[],this.rightList=[],this.$emit("input",[]),this.$emit("update:modelValue",[]),this.tempList=[]},remove(e){let t=-1;t=this.leftList.findIndex((t=>t[this.idKey]==e)),-1!=t?this.leftList.splice(t,1):(t=this.rightList.findIndex((t=>t[this.idKey]==e)),-1!=t&&this.rightList.splice(t,1)),t=this.value.findIndex((t=>t[this.idKey]==e)),-1!=t&&(this.$emit("input",this.valueCom.splice(t,1)),this.$emit("update:modelValue",this.valueCom.splice(t,1)))},modify(e,t,i){let l=-1;if(l=this.leftList.findIndex((t=>t[this.idKey]==e)),-1!=l?this.leftList[l][t]=i:(l=this.rightList.findIndex((t=>t[this.idKey]==e)),-1!=l&&(this.rightList[l][t]=i)),l=this.valueCom.findIndex((t=>t[this.idKey]==e)),-1!=l){let e=this.cloneData(this.valueCom);e[l][t]=i,this.$emit("input",e),this.$emit("update:modelValue",e)}}}},[["render",function(e,t,i,l,o,n){const u=d;return a(),s(u,{class:"u-waterfall"},{default:r((()=>[A(u,{id:"u-left-column",class:"u-column"},{default:r((()=>[c(e.$slots,"left",{leftList:o.leftList},void 0,!0)])),_:3}),A(u,{id:"u-right-column",class:"u-column"},{default:r((()=>[c(e.$slots,"right",{rightList:o.rightList},void 0,!0)])),_:3})])),_:3})}],["__scopeId","data-v-947d8ea5"]]),ge="/mobile/assets/error-bd7373cb.png",pe="/mobile/assets/loading-540a438d.png",me=q(g({__name:"lists",props:{cid:{default:0},i:null,index:null,keyword:{default:""}},emits:["click","showPoster"],setup(e,{emit:t}){const i=e,l=p(),n=m(null),u=m(null),c=h(!0),g=h([]),k=h(-1);I((()=>i.keyword),(async()=>{var e;await x(),i.i==i.index&&(null==(e=u.value)||e.reload())}),{immediate:!1}),I((()=>i.i),(async()=>{var e;i.i==i.index&&c.value&&(c.value=!1,await x(),null==(e=u.value)||e.reload())}),{immediate:!0});const R=async(e,t)=>{var l;try{const{lists:a}=await H({category_id:i.cid,keyword:i.keyword,page_no:e,page_size:t});(i.keyword||1==e)&&(null==(l=n.value)||l.clear()),u.value.complete(a)}catch(a){console.log("报错=>",a),u.value.complete(!1)}},G=e=>{-1==k.value||k.value!=e.id?k.value=e.id:(k.value=-1,t("click",e))},L=async e=>{var t,a;if(l.isLogin)try{await W({id:e.id,praise:e.is_praise?0:1}),0===i.cid?(u.value.refresh(),null==(t=n.value)||t.remove(e.id)):null==(a=n.value)||a.modify(e.id,"is_praise",e.is_praise?0:1)}catch(s){console.error(s),uni.$u.toast(JSON.stringify(s))}else w.navigateTo("/pages/login/login")};return(t,i)=>{const l=E(f("u-lazy-load"),de),c=d,p=E(f("u-icon"),K),m=E(f("u-waterfall"),ce),h=E(f("z-paging"),$);return a(),s(h,{"auto-show-back-to-top":"",auto:e.i==e.index,ref_key:"paging",ref:u,modelValue:g.value,"onUpdate:modelValue":i[1]||(i[1]=e=>g.value=e),"data-key":e.i,fixed:!1,height:"100%","auto-clean-list-when-reload":!0,"auto-scroll-to-top-when-reload":!1,onQuery:R},{default:r((()=>[A(m,{ref_key:"waterfallRef",ref:n,modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=e=>g.value=e),"add-time":"50"},{left:r((({leftList:e})=>[(a(!0),y(C,null,v(e,((e,i)=>(a(),s(c,{key:i,class:"mt-[20rpx] mr-[15rpx] relative",onClick:t=>G(e)},{default:r((()=>[A(l,{threshold:"0","border-radius":"10",image:(null==e?void 0:e.thumbnail)||(null==e?void 0:e.image),index:i,errorImg:Q(ge),loadingImg:Q(pe)},null,8,["image","index","errorImg","loadingImg"]),e.id==k.value?(a(),s(c,{key:0,class:"enter"},{default:r((()=>[A(c,{class:"praise top-[16rpx] left-[16rpx]",style:{"background-color":"rgba(0, 0, 0, 0.5)"},onClick:b((t=>L(e)),["stop"])},{default:r((()=>[A(c,{class:o(["praise-animate",e.is_praise?"praise-entry":"praise-leave"])},null,8,["class"])])),_:2},1032,["onClick"]),A(c,{class:"poster top-[16rpx] right-[16rpx]",style:{"background-color":"rgba(0, 0, 0, 0.5)"},onClick:b((i=>t.$emit("showPoster",e)),["stop"])},{default:r((()=>[A(c,null,{default:r((()=>[A(p,{name:"photo",color:"#FFFFFF",size:"34rpx"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):B("v-if",!0)])),_:2},1032,["onClick"])))),128))])),right:r((({rightList:e})=>[(a(!0),y(C,null,v(e,((e,i)=>(a(),s(c,{key:i,class:"mt-[20rpx] ml-[15rpx] relative",onClick:t=>G(e)},{default:r((()=>[A(l,{threshold:"0","border-radius":"10",image:(null==e?void 0:e.thumbnail)||(null==e?void 0:e.image),index:i,errorImg:Q(ge),loadingImg:Q(pe)},null,8,["image","index","errorImg","loadingImg"]),e.id==k.value?(a(),s(c,{key:0,class:"enter"},{default:r((()=>[A(c,{class:"praise top-[16rpx] left-[16rpx]",style:{"background-color":"rgba(0, 0, 0, 0.5)"},onClick:b((t=>L(e)),["stop"])},{default:r((()=>[A(c,{class:o(["praise-animate",e.is_praise?"praise-entry":"praise-leave"])},null,8,["class"])])),_:2},1032,["onClick"]),A(c,{class:"poster top-[16rpx] right-[16rpx]",style:{"background-color":"rgba(0, 0, 0, 0.5)"},onClick:b((i=>t.$emit("showPoster",e)),["stop"])},{default:r((()=>[A(c,null,{default:r((()=>[A(p,{name:"photo",color:"#FFFFFF",size:"34"})])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)):B("v-if",!0)])),_:2},1032,["onClick"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["auto","modelValue","data-key"])}}}),[["__scopeId","data-v-be0438bc"]]),he=q(g({__name:"preview",setup(e,{expose:t}){const{copy:i}=le(),l=k(),o=h(!1),n=h(!1),c=h(!0),g=h({image:"",prompts:"",category_name:"",user_info:{image:"",name:""}}),p=()=>{o.value=!1,c.value=!0},m=()=>{uni.$u.toast("请长按图片保存"),I()},I=()=>{D({urls:[g.value.image],current:0,success:function(){p()},fail:function(){}})};return t({open:e=>{o.value=!0,g.value=e}}),(e,t)=>{const h=u,y=E(f("u-loading"),ee),C=d,v=E(f("u-avatar"),te),x=j,w=E(f("u-icon"),K),k=E(f("u-popup"),ie);return a(),s(k,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=e=>o.value=e),mode:"center","border-radius":"14",duration:"16",customStyle:{background:"none"},onClose:p},{default:r((()=>[A(C,{class:"p-[20rpx] w-[650rpx] flex flex-col justify-center items-center relative",onClick:p},{default:r((()=>[A(C,{class:"w-full bg-white",style:{"border-radius":"12rpx 12rpx 0 0"}},{default:r((()=>[R(A(h,{src:g.value.thumbnail||g.value.image,class:"w-full rounded-[12rpx]",mode:"widthFix",onLoad:t[0]||(t[0]=e=>c.value=!1),onError:t[1]||(t[1]=e=>n.value=!0),onClick:b(I,["stop"])},null,8,["src","onClick"]),[[G,!c.value]]),c.value&&!n.value?(a(),s(C,{key:0,class:"flex justify-center items-center h-[500rpx]"},{default:r((()=>[A(y,{mode:"circle",color:e.$theme.primaryColor,size:"80"},null,8,["color"])])),_:1})):B("v-if",!0),n.value?(a(),s(h,{key:1,class:"w-full",src:Q(ge),mode:"widthFix"},null,8,["src"])):B("v-if",!0)])),_:1}),A(C,{class:"bg-white w-full p-[20rpx]",style:{"border-radius":"0 0 12rpx 12rpx"}},{default:r((()=>[A(C,{class:"text-sm text-black"},{default:r((()=>{var e,t;return[L(z(null==(t=null==(e=g.value)?void 0:e.original_prompts)?void 0:t.prompt),1)]})),_:1}),Q(l).getDrawSquareConfig.is_show_user?(a(),s(C,{key:0,class:"flex items-center mt-[20rpx]"},{default:r((()=>[A(v,{src:g.value.user_info.image,size:"40"},null,8,["src"]),A(x,{class:"text-muted text-xs ml-[20rpx]"},{default:r((()=>[L(z(g.value.user_info.name),1)])),_:1})])),_:1})):B("v-if",!0),A(C,{class:"footer_btn flex justify-center mt-[30rpx] pb-[20rpx]"},{default:r((()=>[A(C,{class:"mr-[30rpx]",onClick:b(m,["stop"])},{default:r((()=>[A(h,{class:"w-[32rpx] h-[32rpx]",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAFVBMVEVHcEwyMjIzMzMyMjIqKiozMzMyMjLEkl8QAAAAB3RSTlMAbf5JB8ihV6vX6gAAAQ9JREFUeAHt1LFOwzAQxvFDMbuVwgPkq8rcVrA7irtDaXiADrz/I+A7U852sBc2lBsqNf7p30hpjorpB2pOB+yb4A6wK1jBCv4Opk0LHJ6pz17GH+Dls8NAwGu9cA8EcJGTj71LQPfJ3+ik4IitUeCO8WoC+rAY3A2YsCbEZwW5FEEIYFsUwgknBHAg3koC+DdCQgAH4qpKgIkJBhrICpwYmFkNZEASloEG8oIkGGggB5I4ABsNFAVO7ICrBkow4ntsBXCCR9d1CcYisAAxkez7BZjOWWAJzDjPD9QC5J1pATLGuyYo5l8Aw+CMJ1+dK3b8fObq8JM73f4lv8+FpjYIy+Oldf4ebtU/1s/fHH0Bz7Ro74da+MMAAAAASUVORK5CYII="}),A(x,{class:"ml-[12rpx]"},{default:r((()=>[L("保存")])),_:1})])),_:1},8,["onClick"]),A(C,{onClick:t[2]||(t[2]=b((e=>Q(i)(g.value.prompts)),["stop"]))},{default:r((()=>[A(h,{class:"w-[32rpx] h-[32rpx]",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAG1BMVEVHcEwsLCwyMjIyMjIzMzMyMjIzMzMyMjIyMjL86A2wAAAACXRSTlMABTKGxuD+XKwKjyl5AAAB0klEQVR4Ac2VsXPaMBTGJTPAKEN715HSg3Ys7dV0BVr29jhnB/zM6EtC8JjLXXz+s/NkW7JkPWvIkrwBbOt3T0/f9yQxxvmXv9CJ/UqwNr4BERuux4fUOMBSjYsHGjgqIMCX059O7PBj1pQxQvhz2IlxBPC/ybBoWSOG7RwRHLkDcKwsab7u4MCdBIx9AJjWTzGsm29WFQM9M2igWwQCwgTGdz+N+A2wvQpuAJPYFes81QAPYlJOoTP0CL5WQI9jcFbAR4Bkde1ELh1pgMjwV4eYS0cqgMcofdexMMTK0xpAz/8RgqMj5wrgWON311LG5pDUwID0vLLsbYBA+AFepF4An1U39gAj3Y3vFODosQTw73UZ+KQsy2cA/C0zEti17ZpyAgjsfvYDR7JIY/ts6GXOZjM8FW/xr0cHYpkxpYMwAHkEeYWSh5gXwMKz0Afge+oFxrjmbe4BRFQLo7s6gJPVtGzSAUS+tNqesYsN4IlqZ+DBLxsQ9taTdX299+xNaUDo27xVimEvkNQPCDwSgFjAqVEH0DL3WmGFundEAcnUzYClHXQuuHGvtgJnbpJJOffU5ajymjvCjFQdr+EnGsha/S/U+FNbcBjkzp2z/yEEewHl7lZRoMOnjQAAAABJRU5ErkJggg=="}),A(x,{class:"ml-[12rpx]"},{default:r((()=>[L("复制提示词")])),_:1})])),_:1})])),_:1})])),_:1}),A(C,{class:"absolute top-[40rpx] right-[40rpx]",onClick:p},{default:r((()=>[A(w,{name:"close",size:"30",color:"#999999"})])),_:1})])),_:1})])),_:1},8,["modelValue"])}}}),[["__scopeId","data-v-a15b881d"]]),Ie=g({__name:"poster",emits:["close"],setup(e,{expose:t,emit:i}){const{copy:l}=le(),s=k(),o=p(),{primaryColor:n}=S(),u=h(!1),c=h(),g=h({});h("");const m=h(""),I=h(""),v=async()=>{Y({title:"生成中"});try{m.value=await O(),setTimeout((()=>{x()}),500)}catch(e){F(),console.log(e)}},b=async()=>{l(await O())},x=async()=>{var e;null==(e=c.value)||e.canvasToTempFilePathSync({fileType:"png",quality:1,pathType:"base64",success:e=>{F(),I.value=e.tempFilePath},fail:e=>{console.log(e),F(),uni.$u.toast("调用海报错误",e)}})},w=()=>{uni.$u.toast("请长按图片保存")};return t({open:e=>{u.value=!0,g.value=e,v()}}),(e,t)=>{const i=E(f("l-painter-image"),ae),l=E(f("l-painter-view"),se),p=E(f("l-painter-text"),re),h=E(f("l-painter-qrcode"),Ae),v=E(f("l-painter"),oe),x=d,k=Z,R=E(f("u-button"),ne),G=E(f("u-popup"),ie);return a(),y(C,null,[A(v,{ref_key:"painterRef",ref:c,isCanvasToTempFilePath:!1,"custom-style":"position: fixed; left: 200%;"},{default:r((()=>[A(l,{css:"\n            border-radius: 14rpx;\n            overflow: hidden;\n            background-color: #F2F3F6;\n            "},{default:r((()=>[A(l,{css:"\n                width: 100%;\n                "},{default:r((()=>{var e,t;return[A(i,{src:(null==(e=g.value)?void 0:e.thumbnail)||(null==(t=g.value)?void 0:t.image),css:"width: 100%;object-fit:contain;"},null,8,["src"])]})),_:1}),A(l,{css:"margin-top: 20rpx;padding-left: 20rpx;padding-right: 20rpx;margin-bottom: 20rpx;"},{default:r((()=>[A(l,null,{default:r((()=>{var e,t;return[A(p,{css:"display: block;font-weight: bold;font-size: 32rpx;text-align: left;color: #101010;lineClamp: 2;",text:null==(t=null==(e=g.value)?void 0:e.original_prompts)?void 0:t.prompt},null,8,["text"])]})),_:1}),A(l,null,{default:r((()=>{var e,t;return[A(p,{css:"font-size: 28rpx;text-align: left;color: #101010;margin-top:20rpx;lineClamp: 1;",text:null==(t=null==(e=g.value)?void 0:e.original_prompts)?void 0:t.prompt_en},null,8,["text"])]})),_:1})])),_:1}),A(l,{css:"height:10rpx;border-top-width:1px;border-top-style:dashed;border-top-color:#D6D3D3;"}),A(l,null,{default:r((()=>[A(l,{css:"margin-top: 20rpx;height: 220rpx; padding-left: 20rpx;padding-right: 20rpx;margin-bottom: 20rpx;display:block;width:60%"},{default:r((()=>[A(l,{css:"display:flex;align-items: center;"},{default:r((()=>[A(i,{css:"width:68rpx;height:68rpx;border-radius: 50%;",src:Q(o).userInfo.avatar},null,8,["src"]),A(p,{css:";font-size: 28rpx;text-align: left;color: #666666;margin-left: 20rpx;",text:Q(o).userInfo.nickname},null,8,["text"])])),_:1}),A(l,{css:"margin-top:20rpx"},{default:r((()=>[A(p,{css:"font-weight: bold;font-size: 32rpx;text-align: left;color: #101010;",text:Q(s).getWebsiteConfig.shop_name},null,8,["text"])])),_:1}),A(l,{css:"margin-top:20rpx;margin-bottom:20rpx"},{default:r((()=>[A(p,{css:`font-weight: bold;font-size: 30rpx;text-align: left;color: ${Q(n)};`,text:Q(M)(Q(s).config.current_domain)},null,8,["css","text"])])),_:1})])),_:1}),A(l,{css:"position: absolute;top:20rpx;right:20px;background-color:#fff;padding:15rpx;border-radius: 10rpx;"},{default:r((()=>[B("  H5二维码  "),A(h,{text:m.value,css:"width: 180rpx; height: 180rpx"},null,8,["text"]),B("  小程序二维码  ")])),_:1})])),_:1})])),_:1})])),_:1},512),A(G,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),mode:"bottom",closeable:!0,closeIconColor:"#000","safe-area-inset-bottom":!0,height:"90%","border-radius":"14",customStyle:{background:"none"},onClose:t[1]||(t[1]=t=>e.$emit("close"))},{default:r((()=>[A(x,{class:"flex flex-col relative h-full"},{default:r((()=>[A(x,{class:"title text-xl font-medium text-center py-[30rpx]"},{default:r((()=>[L(" 生成海报 ")])),_:1}),A(x,{class:"mb-[120rpx] flex-1 min-h-0"},{default:r((()=>[A(k,{"scroll-y":"true",class:"h-full"},{default:r((()=>[A(x,{class:"px-[20rpx]"},{default:r((()=>[V("img",{class:"w-full",src:I.value},null,8,["src"])])),_:1})])),_:1})])),_:1}),A(x,{class:"w-full absolute bottom-0 px-[30rpx] py-[20rpx] flex justify-center"},{default:r((()=>[A(R,{class:"flex-1 mr-2",type:"primary",shape:"circle",size:"default",plain:"",customStyle:{padding:"0 30rpx",height:"82rpx"},onClick:b},{default:r((()=>[L(" 复制链接 ")])),_:1}),A(R,{type:"primary",class:"flex-1",shape:"circle",size:"default",customStyle:{padding:"0 30rpx",height:"82rpx"},onClick:w},{default:r((()=>[L(" 长按保存图片到相册 ")])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}}),Ee=q(g({__name:"square",setup(t){const i=p(),l=m(null),o=m(),n=h(!1),u=h(""),c=U({isTouch:!0,current:0,lists:[{name:"全部",id:""}]}),g=async e=>{c.isTouch=!1,await x(),c.current=e},I=e=>{c.isTouch=!0,c.current=e.detail.current},Q=e=>{l.value.open(e)},b=async e=>{var t;i.isLogin?(n.value=!0,await x(),null==(t=null==o?void 0:o.value)||t.open(e)):w.navigateTo("/pages/login/login")};return(async()=>{try{const e=await X();c.lists=[{name:"全部",id:""},...e]}catch(e){console.log("获取分类错误=>",e)}})(),(t,i)=>{const p=E(f("page-meta"),e),m=E(f("u-search"),T),h=d,x=E(f("u-tabs"),_),w=J,k=N,R=E(f("tabbar"),P);return a(),y(C,null,[A(p,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),A(h,{class:"square-container"},{default:r((()=>[A(h,{class:"square-header bg-white"},{default:r((()=>[B("  搜索栏  "),A(h,{class:"py-[14rpx] px-[24rpx]"},{default:r((()=>[A(m,{placeholder:"请输入要搜索的关键词",modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=e=>u.value=e),"show-action":!1},null,8,["modelValue"])])),_:1}),B("  切换标签  "),A(x,{list:c.lists,"is-scroll":!0,current:c.current,"active-color":t.$theme.primaryColor,"inactive-color":"#333333","bg-color":"transparent",onChange:g},null,8,["list","current","active-color"])])),_:1}),A(h,{class:"square-content h-full"},{default:r((()=>[A(k,{class:"swiper",duration:c.isTouch?200:0,current:c.current,onAnimationfinish:I},{default:r((()=>[(a(!0),y(C,null,v(c.lists,((e,t)=>(a(),s(w,{class:"swiper-item px-[20rpx] box-border",key:t},{default:r((()=>[A(me,{index:t,i:c.current,cid:e.id,keyword:u.value,onClick:Q,onShowPoster:b},null,8,["index","i","cid","keyword"])])),_:2},1024)))),128))])),_:1},8,["duration","current"])])),_:1}),A(he,{ref_key:"viewRef",ref:l},null,512),n.value?(a(),s(Ie,{key:0,ref_key:"posterRef",ref:o,onClose:i[1]||(i[1]=e=>n.value=!1)},null,512)):B("v-if",!0),B("    悬浮菜单    "),A(ue),A(R)])),_:1})],64)}}}),[["__scopeId","data-v-b30645a7"]]);export{Ee as default};
