import{_ as e}from"./page-meta.0a6ed5a4.js";import{aF as t,o as a,i as l,G as s,d as u,a as o,b as r,j as i,g as n,f as d,h as c,at as m,k as p,aG as f,u as x,v,t as g,y as h,e as y,z as A,r as _,w as V,F as w,m as b,ay as k,x as C,n as I,aA as E,aB as T,aM as U,ar as S,a1 as F,a2 as B,a3 as D,Y as L,R as q,c as Q,aL as j,aI as M,p as z,J as R,a4 as K,S as G,A as Y,aK as O,aO as N,as as X,l as H,Z as J,aa as P}from"./index-c4e9cb21.js";import{_ as W}from"./u-loading.5334235e.js";import{_ as Z}from"./tabbar.vue_vue_type_script_setup_true_lang.de757f7b.js";import{_ as $}from"./u-empty.8b31fa6b.js";import{_ as ee}from"./u-button.d1dcbae7.js";import{_ as te}from"./router-navigate.7694f14d.js";import{_ as ae}from"./z-paging.0c0bd55f.js";import{_ as le}from"./_plugin-vue_export-helper.1b428a4d.js";import{s as se}from"./file.17a933ee.js";import{I as ue,a as oe,b as re,c as ie,N as ne,d as de,e as ce,_ as me,D as pe,u as fe}from"./usePolling.6136f7cf.js";import{_ as xe}from"./u-image.259ae993.js";import{_ as ve}from"./u-tabs.30cd1122.js";import{_ as ge}from"./u-icon.9d0b6bc8.js";import{F as he}from"./floating-menu.33dda305.js";import"./u-badge.4654495c.js";const ye=le({},[["render",function(e,t){return a(),l("div",{class:"in-progress"},[s("div",{class:"flex justify-center items-center"},[(a(),l("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"lds-balls",width:"80px",height:"80px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},[s("circle",{cx:"67.8023",cy:"59.9068",r:"6",fill:"#51CACC"},[s("animate",{attributeName:"cx",values:"75;57.72542485937369",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"cy",values:"50;73.77641290737884",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill",values:"#51CACC;#9DF871",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"})]),s("circle",{cx:"46.0792",cy:"69.9923",r:"6",fill:"#9DF871"},[s("animate",{attributeName:"cx",values:"57.72542485937369;29.774575140626318",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"cy",values:"73.77641290737884;64.69463130731182",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill",values:"#9DF871;#E0FF77",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"})]),s("circle",{cx:"29.7746",cy:"52.4491",r:"6",fill:"#E0FF77"},[s("animate",{attributeName:"cx",values:"29.774575140626318;29.774575140626315",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"cy",values:"64.69463130731182;35.30536869268818",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill",values:"#E0FF77;#DE9DD6",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"})]),s("circle",{cx:"41.4208",cy:"31.5213",r:"6",fill:"#DE9DD6"},[s("animate",{attributeName:"cx",values:"29.774575140626315;57.72542485937368",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"cy",values:"35.30536869268818;26.22358709262116",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill",values:"#DE9DD6;#FF708E",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"})]),s("circle",{cx:"64.9232",cy:"36.1304",r:"6",fill:"#FF708E"},[s("animate",{attributeName:"cx",values:"57.72542485937368;75",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"cy",values:"26.22358709262116;49.99999999999999",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"}),s("animate",{attributeName:"fill",values:"#FF708E;#51CACC",keyTimes:"0;1",dur:"1s",repeatCount:"indefinite"})])]))]),s("div",{class:"text-xl mt-[20px]"}," 正在生成中 "),s("div",{class:"mt-[10px] text-base text-[#999999] w-[260px] h-[60px]"}," 生成预计花费30~60s时间，可离开后再回来查看效果喔～ ")])}],["__scopeId","data-v-55ddbf33"]]),Ae=le(u({__name:"picture",props:{picture:{default:""},lazyImg:{default:""}},emits:["preview"],setup:(e,{emit:t})=>(t,s)=>{const u=o(r("u-loading"),W),f=p,x=o(r("u-image"),xe);return a(),l("div",{class:"preview-picture"},[i("    单张图片    "),n(x,{src:e.lazyImg,width:"640rpx",height:"640rpx",mode:"aspectFit","border-radius":"0","lazy-load":!0,onClick:s[0]||(s[0]=t=>{return a=[e.picture],void m({current:0,urls:a});var a})},{loading:d((()=>[n(f,{class:"flex flex-col justify-center items-center w-[640rpx] h-[640rpx] bg-[#F7F9FD]"},{default:d((()=>[n(u,{mode:"circle",color:t.$theme.primaryColor,size:"40"},null,8,["color"]),n(f,{class:"text-primary text-sm mt-[20rpx]"},{default:d((()=>[c(" 加载中 ")])),_:1})])),_:1})])),_:1},8,["src"])])}}),[["__scopeId","data-v-bee85259"]]),_e=le(u({__name:"success",props:{value:{default:""}},setup(e){const t=f("pageIndex"),u=f("qrcodeForm"),o=f("promptParams"),r=f("deleteDrawing");return(d,c)=>{const m=h;return a(),l("div",{class:"success"},[i("    头部操作    "),s("div",{class:"flex justify-between items-center"},[s("div",{class:"success__tag"},"生成完成"),s("div",{class:"flex items-center"},[n(m,{class:"w-[32rpx] h-[32rpx] ml-[34rpx] cursor-pointer",src:x(ue),alt:"下载",onClick:c[0]||(c[0]=v((t=>(async e=>{se(e.image)})(e.value)),["stop"]))},null,8,["src"]),n(m,{class:"w-[32rpx] h-[32rpx] ml-[34rpx] cursor-pointer",src:x(oe),alt:"重新生成",onClick:c[1]||(c[1]=v((a=>(async e=>{if(e.prompt_params.length){const t=e.prompt_params.split(" --");t[0]=t[0].substring(2),t.forEach((e=>{const t=e.split(" ");o[t[0]]=t[1]}))}Object.keys(u).forEach((t=>{u[t]=e[t]})),t.value=0})(e.value)),["stop"]))},null,8,["src"]),n(m,{class:"w-[32rpx] h-[32rpx] ml-[34rpx] cursor-pointer",src:x(re),alt:"删除",onClick:c[2]||(c[2]=v((t=>(async e=>{r([e.id])})(e.value)),["stop"]))},null,8,["src"])])]),i("    中部图片    "),s("div",{class:"success__section relative text-sm mt-[30rpx]"},[n(Ae,{picture:e.value.image,"lazy-img":e.value.image},null,8,["picture","lazy-img"])]),i("    底部信息    "),s("div",{class:"mt-[20rpx] success__footer"},[s("div",null,g(e.value.template_text||e.value.prompt),1),s("div",{class:"mt-[15px] text-[#999999] text-base"}," 时间："+g(e.value.create_time),1)])])}}}),[["__scopeId","data-v-862a75d0"]]),Ve=le(u({__name:"fail",props:{value:{default:""},id:{default:0}},setup(e){const t=f("deleteDrawing");return(l,s)=>{const u=p,o=h;return a(),y(u,{class:"fail-box"},{default:d((()=>[i("    头部操作    "),n(u,{class:"flex justify-between items-center"},{default:d((()=>[n(u,{class:"fail-box__tag"},{default:d((()=>[c("生成失败")])),_:1}),n(u,{class:"flex items-center"},{default:d((()=>[n(o,{class:"w-[32rpx] h-[32rpx]",src:x(re),alt:"删除",onClick:s[0]||(s[0]=a=>x(t)([e.id]))},null,8,["src"])])),_:1})])),_:1}),n(o,{class:"w-[300rpx] h-[300rpx] mt-[100rpx]",src:x(ie)},null,8,["src"]),n(u,{class:"text-xl mt-[40rpx]"},{default:d((()=>[c(" 生成失败 ")])),_:1}),n(u,{class:"mt-[10px] text-base text-[#999999] px-[30px] h-[60px] break-words"},{default:d((()=>[c(" 错误信息："+g(e.value),1)])),_:1})])),_:1})}}}),[["__scopeId","data-v-f10d7269"]]),we=le(u({__name:"index",props:{value:{default:""},status:{default:0}},setup:e=>(t,s)=>(a(),l("div",{class:"card-container"},[i("  生成中  "),1===e.status?(a(),y(ye,{key:0})):i("v-if",!0),i("  成功  "),3===e.status?(a(),y(_e,{key:1,value:e.value},null,8,["value"])):i("v-if",!0),i("  失败  "),2===e.status?(a(),y(Ve,{key:2,value:e.value.fail_reason,id:e.value.id},null,8,["value","id"])):i("v-if",!0)]))}),[["__scopeId","data-v-be52ae5a"]]),be=u({__name:"paging",props:{i:{default:0},index:{default:0},status:{default:3},setTaskRecordFunc:{default:()=>{}}},emits:["click"],setup(e,{emit:s}){const u=e,i=A(null),c=_([]);V((()=>u.i),(async()=>{var e;u.i==u.index&&(await k(),null==(e=i.value)||e.reload())}),{immediate:!0});const m=async(e,a)=>{try{const{lists:s}=await(l={status:u.status,page_no:e,page_size:a},t.get({url:"/qrcode_records/records",data:l},{ignoreCancel:!0}));u.i==u.index&&u.setTaskRecordFunc({reload:i.value,lists:s}),i.value.complete(s)}catch(s){console.log("报错=>",s),i.value.complete(!1)}var l};return(t,s)=>{const u=p,f=o(r("z-paging"),ae);return a(),y(f,{"auto-show-back-to-top":"",auto:e.i==e.index,ref_key:"paging",ref:i,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=e=>c.value=e),"data-key":e.i,fixed:!1,height:"100%","auto-clean-list-when-reload":!0,"auto-scroll-to-top-when-reload":!1,"empty-view-img":x(ne),"empty-view-text":"暂无记录~",onQuery:m},{default:d((()=>[n(u,{class:"px-[30rpx]"},{default:d((()=>[(a(!0),l(w,null,b(c.value,((e,t)=>(a(),y(we,{key:t,value:e,status:e.status},null,8,["value","status"])))),128))])),_:1})])),_:1},8,["auto","modelValue","data-key","empty-view-img"])}}}),ke=le(u({__name:"index",setup(e){const t=C();f("config");const u=f("pageIndex"),i=f("taskLists"),m=f("taskIndex"),v=f("setTaskRecordFunc");return(e,f)=>{const A=p,_=h,V=o(r("u-button"),ee),k=o(r("router-navigate"),te);return a(),y(A,{class:"h-full flex flex-col"},{default:d((()=>[s("div",{class:"task-lists"},[(a(!0),l(w,null,b(x(i),((e,t)=>(a(),l("div",{key:t,class:I(["task-item",{"task-item--active":e.value===x(m)}]),onClick:t=>m.value=e.value},g(e.name),11,["onClick"])))),128))]),n(A,{class:"flex-1 min-h-0"},{default:d((()=>[x(t).isLogin?(a(),y(A,{key:0,class:"h-full relative"},{default:d((()=>[(a(!0),l(w,null,b(x(i),((e,t)=>E((a(),y(A,{class:"h-full",key:t},{default:d((()=>[n(be,{index:e.value,i:x(m),status:e.value,setTaskRecordFunc:x(v)},null,8,["index","i","status","setTaskRecordFunc"])])),_:2},1024)),[[T,e.value===x(m)]]))),128))])),_:1})):(a(),y(A,{key:1,class:"h-full flex justify-center pt-[200rpx]"},{default:d((()=>[n(k,{class:"text-center",to:"/pages/login/login"},{default:d((()=>[n(_,{class:"w-[300rpx] h-[300rpx]",src:x(de)},null,8,["src"]),n(A,{class:"mt-[20rpx] mb-[50rpx] text-base text-muted"},{default:d((()=>[c(" 暂无查看权限，请登录账号后查看 ")])),_:1}),n(V,{type:"primary","custom-style":{width:"345rpx",height:"82rpx",fontSize:"32rpx"},shape:"circle"},{default:d((()=>[c(" 点击登录 ")])),_:1})])),_:1})])),_:1}))])),_:1}),n(A,{class:"p-[20rpx]",style:{"box-shadow":"0 0 10rpx rgba(0, 0, 0, 0.2)"}},{default:d((()=>[n(A,{class:"flex w-full h-[82rpx] bg-[#f0f2f2] rounded-[999px] text-[#333333]"},{default:d((()=>[n(A,{class:"w-[50%]"},{default:d((()=>[n(V,{type:"primary","custom-style":{width:"100%",height:"82rpx",fontSize:"30rpx"},shape:"circle"},{default:d((()=>[c(" 生成记录 ")])),_:1})])),_:1}),n(A,{class:"w-[50%] h-[82rpx] flex justify-center items-center",onClick:f[0]||(f[0]=e=>u.value=0)},{default:d((()=>[c(" 立即生成 ")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-1ea8d26e"]]),Ce=u({__name:"generation-picker",props:{balance:{default:0},modelValue:{default:""},modelList:{default:[]}},emits:["update:modelValue","update:balance"],setup(e,{emit:t}){const l=e,s=_(0),u=e=>{s.value=e,t("update:balance",l.modelList[e].balance),t("update:modelValue",l.modelList[e].model)};return V((()=>l.modelList),(e=>{const a=e.findIndex((e=>e.default));s.value=-1==a?0:a,t("update:balance",l.modelList[s.value].balance),t("update:modelValue",l.modelList[s.value].model)}),{immediate:!1}),V((()=>l.modelValue),(e=>{const a=l.modelList.findIndex((t=>t.model===e));s.value=-1==a?0:a,t("update:balance",l.modelList[s.value].balance),t("update:modelValue",l.modelList[s.value].model)}),{immediate:!1}),(t,l)=>{const n=o(r("u-tabs"),ve);return e.modelList.length?(a(),y(n,{key:0,list:e.modelList,"is-scroll":!0,modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),name:"name","active-color":t.$theme.primaryColor,"bg-color":"transparent",barStyle:{background:t.$theme.primaryColor},onChange:u},null,8,["list","modelValue","active-color","barStyle"])):i("v-if",!0)}}}),Ie=le(u({__name:"reference-image",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const s=()=>{if(!C().isLogin)return U({url:"/pages/login/login"});S({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{u(e.tempFilePaths[0])}})},u=async e=>{F({title:"上传中"});try{const a=await B(e,{type:"draw"});t("update:modelValue",a.uri),D()}catch(a){D(),uni.$u.toast(a),console.log("上传图片失败",a)}};return(u,m)=>{const f=h,x=p,g=o(r("u-icon"),ge);return a(),l(w,null,[i("    上传参考图    "),n(x,{class:"uploader mt-[30rpx] flex justify-center items-center",onClick:s},{default:d((()=>[i("    没有图片的时候    "),e.modelValue?(a(),l(w,{key:1},[i("    有图片的时候    "),n(x,{class:"w-full h-full relative text-center has_image",onClick:m[1]||(m[1]=v((()=>{}),["stop"]))},{default:d((()=>[n(g,{class:"has_img_delete",name:"close-circle-fill",color:"#ffffff",size:"40",onClick:m[0]||(m[0]=v((e=>t("update:modelValue","")),["stop"]))}),n(f,{class:"w-full h-full",src:e.modelValue,mode:"aspectFit"},null,8,["src"]),n(x,{class:"has_img_btn",onClick:s},{default:d((()=>[c(" 换图 ")])),_:1})])),_:1})],2112)):(a(),y(x,{key:0,class:"flex flex-col justify-center items-center"},{default:d((()=>[n(f,{class:"w-[72rpx] h-[72rpx] mb-[12rpx]",src:ce}),n(x,{class:"text-muted"},{default:d((()=>[c("点击上传参考图")])),_:1})])),_:1}))])),_:1})],2112)}}}),[["__scopeId","data-v-a411f72c"]]),Ee=u({__name:"generation-type",props:{modelValue:{default:{}}},emits:["update:modelValue"],setup(e,{emit:t}){const u=[{label:"图片模式",value:2},{label:"文字模式",value:1}];return(t,o)=>{const r=p;return a(),l(w,null,[s("h3",{class:"text-base font-bold"},[s("span",null,"生成内容"),s("span",{class:"text-error"},"*")]),s("div",{class:"mt-[20rpx] text-sm"},[i("    类型选择    "),s("div",{class:"inline-flex bg-[#f0f2f2] rounded-[28rpx] text-[#333333]"},[(a(),l(w,null,b(u,(t=>s("div",{key:t.value,class:I(["rounded-[28rpx] w-[144rpx] h-[56rpx] leading-[56rpx] flex justify-center",{"bg-primary text-btn-text":t.value===e.modelValue.type}]),onClick:a=>e.modelValue.type=t.value},g(t.label),11,["onClick"]))),64))]),i("    图片模式-上传二维码    "),2==e.modelValue.type?(a(),y(Ie,{key:0,modelValue:e.modelValue.qr_image,"onUpdate:modelValue":o[0]||(o[0]=t=>e.modelValue.qr_image=t)},null,8,["modelValue"])):i("v-if",!0),i("    文字模式-输入内容    "),1==e.modelValue.type?(a(),y(r,{key:1,class:"mt-[30rpx]"},{default:d((()=>[n(me,{modelValue:e.modelValue.qr_content,"onUpdate:modelValue":o[1]||(o[1]=t=>e.modelValue.qr_content=t),maxlength:"100",rows:4,"custom-class":{height:"200rpx"},placeholder:"请输入二维码内容, 或者已备案域名或合法的文本内容"},null,8,["modelValue"])])),_:1})):i("v-if",!0)])],64)}}}),Te=u({__name:"generation-mode",props:{modelValue:{default:2}},emits:["update:modelValue"],setup(e,{emit:t}){const u=[{label:"模版",value:2},{label:"自定义",value:1}];return(o,r)=>(a(),l(w,null,[s("h3",{class:"text-base font-bold mt-[20px]"},[s("span",null,"生成方式"),s("span",{class:"text-error"},"*")]),s("div",{class:"mt-[10px] text-sm"},[i("    类型选择    "),s("div",{class:"inline-flex bg-[#f0f2f2] rounded-[14px] text-[#333333]"},[(a(),l(w,null,b(u,(a=>s("div",{key:a.value,class:I(["rounded-[14px] w-[72px] h-[28px] leading-[28px] flex justify-center",{"bg-primary text-btn-text":a.value===e.modelValue}]),onClick:e=>t("update:modelValue",a.value)},g(a.label),11,["onClick"]))),64))]),i("    前置---自定义    "),E(s("div",null,[L(o.$slots,"prefix")],512),[[T,1===e.modelValue]]),i("    公用    "),s("div",null,[L(o.$slots,"common")]),i("    模版    "),E(s("div",null,[L(o.$slots,"mode")],512),[[T,2===e.modelValue]]),i("    自定义    "),E(s("div",null,[L(o.$slots,"custom")],512),[[T,1===e.modelValue]])])],64))}});const Ue=le({name:"u-slider",emits:["update:modelValue","input","start","moving","end"],props:{value:{type:[Number,String],default:0},modelValue:{type:[Number,String],default:0},disabled:{type:Boolean,default:!1},blockWidth:{type:[Number,String],default:30},min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},height:{type:[Number,String],default:6},activeColor:{type:String,default:"#2979ff"},inactiveColor:{type:String,default:"#c0c4cc"},blockColor:{type:String,default:"#ffffff"},blockStyle:{type:Object,default:()=>({})}},data:()=>({startX:0,status:"end",newValue:0,distanceX:0,startValue:0,barStyle:{},sliderRect:{left:0,width:0}}),watch:{valueCom(e){"end"==this.status&&this.updateValue(this.valueCom,!1)}},created(){this.updateValue(this.valueCom,!1)},mounted(){this.$uGetRect(".u-slider").then((e=>{this.sliderRect=e}))},computed:{valueCom(){return this.modelValue}},methods:{onTouchStart(e){if(this.disabled)return;this.startX=0;let t=e.touches[0];this.startX=t.clientX,this.startValue=this.format(this.valueCom),this.status="start"},onTouchMove(e){if(this.disabled)return;"start"==this.status&&this.$emit("start");let t=e.touches[0];this.distanceX=t.clientX-this.sliderRect.left,this.newValue=this.distanceX/this.sliderRect.width*100,this.status="moving",this.$emit("moving"),this.updateValue(this.newValue,!0)},onTouchEnd(){this.disabled||("moving"===this.status&&(this.updateValue(this.newValue,!1),this.$emit("end")),this.status="end")},updateValue(e,t){const a=this.format(e);if(a>this.max||a>100)return;let l={width:a+"%"};1==t?l.transition="none":delete l.transition,this.$emit("input",a),this.$emit("update:modelValue",a),this.barStyle=l},format(e){return Math.round(Math.max(this.min,Math.min(e,this.max))/this.step)*this.step},onClick(e){if(this.disabled)return;const t=(e.detail.x-this.sliderRect.left)/this.sliderRect.width*100;this.updateValue(t,!1)}}},[["render",function(e,t,l,s,u,o){const r=p;return a(),y(r,{class:I(["u-slider",[l.disabled?"u-slider--disabled":""]]),onClick:o.onClick,style:q({backgroundColor:l.inactiveColor})},{default:d((()=>[n(r,{class:"u-slider__gap",style:q([u.barStyle,{height:l.height+"rpx",backgroundColor:l.activeColor}])},{default:d((()=>[n(r,{class:"u-slider__button-wrap",onTouchstart:v(o.onTouchStart,["stop"]),onTouchmove:v(o.onTouchMove,["stop"]),onTouchend:o.onTouchEnd,onTouchcancel:o.onTouchEnd},{default:d((()=>[e.$slots.default||e.$slots.$default?L(e.$slots,"default",{key:0},void 0,!0):(a(),y(r,{key:1,class:"u-slider__button",style:q([l.blockStyle,{height:l.blockWidth+"rpx",width:l.blockWidth+"rpx",backgroundColor:l.blockColor}])},null,8,["style"]))])),_:3},8,["onTouchstart","onTouchmove","onTouchend","onTouchcancel"])])),_:3},8,["style"])])),_:3},8,["onClick","class","style"])}],["__scopeId","data-v-5ff1d8b4"]]),Se=le(u({__name:"qrcode-display",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,u=_(45),i=Q({get:()=>s.modelValue,set:e=>{t("update:modelValue",e)}});V((()=>u.value),(e=>{i.value=e/100}));const m=j((()=>{const e=s.modelValue;u.value=100*e}));M((()=>{m()}));const f=e=>{e.detail.value>=1?(i.value=1,u.value=1):e.detail.value<0?(i.value=0,u.value=0):u.value=100*e.detail.value};return(e,t)=>{const s=R,m=p,v=o(r("u-slider"),Ue),g=K;return a(),l(w,null,[n(m,{class:"text-base mt-[30rpx]"},{default:d((()=>[n(s,{class:"mr-2"},{default:d((()=>[c("二维码明显程度")])),_:1}),n(s,{class:"text-sm text-[#999]"},{default:d((()=>[c(" (数值越大二维码越容易扫描) ")])),_:1})])),_:1}),n(m,{class:"flex items-center w-full mt-[20rpx] pl-[16rpx]"},{default:d((()=>[n(m,{class:"w-[500rpx]"},{default:d((()=>[n(v,{"active-color":e.$theme.primaryColor,height:"14",blockWidth:"32",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},null,8,["active-color","modelValue"])])),_:1}),n(g,{class:"ml-4 input",type:"number",min:0,max:1,style:{width:"100rpx"},step:"0.01",modelValue:x(i),"onUpdate:modelValue":t[1]||(t[1]=e=>z(i)?i.value=e:null),onBlur:f},null,8,["modelValue"])])),_:1})],64)}}}),[["__scopeId","data-v-4032ef5f"]]),Fe=le(u({__name:"mewx-template",props:{template:{default:[]},modelValue:{default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e;return j((()=>{const e=s.template;0!==e.length&&t("update:modelValue",e[0].id)})),(s,u)=>{const o=p,r=h;return a(),y(o,{class:"mt-[30rpx]"},{default:d((()=>[n(o,{class:"text-base"},{default:d((()=>[c("二维码风格")])),_:1}),n(o,{class:"style-container overflow-hidden"},{default:d((()=>[(a(!0),l(w,null,b(e.template,((l,s)=>(a(),y(o,{key:s,class:I(["float-left style-item",{"style-active":l.id==e.modelValue}]),onClick:e=>t("update:modelValue",l.id)},{default:d((()=>[n(r,{class:"w-[200rpx] h-[200rpx]",src:l.preview_img,mode:"aspectFill",alt:"风格模版"},null,8,["src"]),n(o,{class:"text-center py-[6rpx]"},{default:d((()=>[c(g(l.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-699aa460"]]),Be=le(u({__name:"zhishuyun-template",props:{template:{default:[]},modelValue:{default:""},way:{default:1}},emits:["update:modelValue","update:way"],setup(e,{emit:t}){const s=e;return(u,o)=>{const r=p;return a(),y(r,{class:"mt-[30rpx]"},{default:d((()=>[n(r,{class:"text-base"},{default:d((()=>[c("二维码风格")])),_:1}),n(r,{class:"style-container overflow-hidden"},{default:d((()=>[(a(!0),l(w,null,b(e.template,((l,u)=>(a(),y(r,{key:u,class:I(["float-left style-item",{"style-active":l.value==e.modelValue}]),onClick:e=>{var a;(a=l.value)!=s.modelValue?(t("update:modelValue",a),t("update:way",2)):(t("update:modelValue",""),t("update:way",1))}},{default:d((()=>[i("                <image"),i('                    class="w-[200rpx] h-[200rpx]"'),i('                    :src="item.preview_img"'),i('                    mode="aspectFill"'),i('                    alt="风格模版"'),i("                />"),n(r,{class:"text-center py-[6rpx]"},{default:d((()=>[c(g(l.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})}}}),[["__scopeId","data-v-6dae49d3"]]),De=le(u({__name:"custom-keyword",props:{modelValue:{default:""},example:{default:{content:"",status:0}}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,s=Q({get:()=>l.modelValue,set:e=>{t("update:modelValue",e)}});return(t,l)=>{const u=R,o=p;return a(),y(o,{class:"mt-[30rpx]"},{default:d((()=>[n(me,{modelValue:x(s),"onUpdate:modelValue":l[1]||(l[1]=e=>z(s)?s.value=e:null),maxlength:"1024",rows:4,"show-word-limit":!1,"custom-class":{height:"200rpx",paddingBottom:"48rpx"},placeholder:"输入关键词，支持中英文，参数放最后～"},{"length-suffix":d((()=>[e.example.status?(a(),y(o,{key:0,class:"text-muted hover:text-primary length-suffix",onClick:l[0]||(l[0]=v((t=>s.value=e.example.content),["stop"]))},{default:d((()=>[n(u,null,{default:d((()=>[c("试试示例")])),_:1})])),_:1})):i("v-if",!0)])),_:1},8,["modelValue"])])),_:1})}}}),[["__scopeId","data-v-e87e7fd9"]]),Le=le(u({__name:"custom-model-picker",props:{modelValue:{default:""},modelList:{default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e;return j((()=>{const e=s.modelList;0!==e.length&&t("update:modelValue",e[0].id)})),(s,u)=>{const o=R,r=p;return a(),l(w,null,[n(r,{class:"text-base font-bold mt-[30rpx]"},{default:d((()=>[n(o,null,{default:d((()=>[c("模型选择")])),_:1})])),_:1}),i("    模型    "),n(r,{class:"mt-[10rpx]"},{default:d((()=>[(a(!0),l(w,null,b(e.modelList,(l=>(a(),y(r,{key:l.name,class:I(["model-item",{"model-item_active":e.modelValue==l.id}]),onClick:e=>t("update:modelValue",l.id)},{default:d((()=>[n(r,{class:"model-item-bg",style:q({"background-image":`url(${l.preview_img})`})},null,8,["style"]),n(r,{class:"model-item-text"},{default:d((()=>[c(g(l.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})],64)}}}),[["__scopeId","data-v-54f64a7f"]]),qe=le(u({__name:"custom-version-picker",props:{modelValue:{default:""},versionList:{default:[]}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e;return j((()=>{const e=s.versionList;t("update:modelValue",e.v1||e[Object.keys(e)[0]])})),(s,u)=>{const m=p,f=R,x=o(r("u-icon"),ge);return a(),l(w,null,[i("    版本选择    "),n(m,{class:"mt-[20rpx] flex items-center"},{default:d((()=>[n(m,{class:"mr-[10px] text-base"},{default:d((()=>[c("版本选择")])),_:1}),n(pe,{mode:"up"},{default:d((()=>[n(m,{class:"drop-down-input"},{default:d((()=>[n(f,null,{default:d((()=>[c(g("v"+e.modelValue||"请选择版本"),1)])),_:1}),n(x,{name:"arrow-down"})])),_:1})])),menu:d((()=>[n(m,{class:"w-full"},{default:d((()=>[(a(!0),l(w,null,b(e.versionList,((e,l)=>(a(),y(m,{key:e,class:"py-[14rpx] px-[30rpx]",onClick:a=>t("update:modelValue",e)},{default:d((()=>[c(g(l),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})])),_:1})],2112)}}}),[["__scopeId","data-v-da3b00da"]]),Qe=le(u({__name:"custom-picture-size",props:{modelValue:{default:"1:1"}},emits:["update:modelValue"],setup(e,{emit:t}){const s=[{scale:"1:1",style:"width: 40rpx; height: 40rpx"},{scale:"3:4",style:"width: 30rpx; height: 40rpx"},{scale:"4:3",style:"width: 40rpx; height: 30rpx"},{scale:"9:16",style:"width: 26rpx; height: 40rpx"},{scale:"16:9",style:"width: 40rpx; height: 24rpx"}];return(u,o)=>{const r=p;return a(),y(r,{class:"mt-[30rpx]"},{default:d((()=>[n(r,{class:"text-base font-bold"},{default:d((()=>[c("图片尺寸")])),_:1}),n(r,{class:"flex justify-between flex-wrap mt-[20rpx]"},{default:d((()=>[(a(),l(w,null,b(s,((a,l)=>n(r,{key:l,class:I(["picture-size text-center hover:text-primary",{"picture-size-active":e.modelValue==a.scale}]),onClick:e=>t("update:modelValue",a.scale)},{default:d((()=>[n(r,{class:"flex justify-center items-center mt-[20rpx] h-[40rpx]"},{default:d((()=>[n(r,{class:"rect",style:q(a.style)},null,8,["style"])])),_:2},1024),n(r,{class:"text-base text-[#101010] mt-[8rpx] size-scale"},{default:d((()=>[c(g(a.scale),1)])),_:2},1024)])),_:2},1032,["class","onClick"]))),64))])),_:1})])),_:1})}}}),[["__scopeId","data-v-0e65e8bf"]]),je=le(u({__name:"custom-code-type",props:{modelValue:{default:"random"}},emits:["update:modelValue"],setup(e,{emit:t}){const u=[{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAABbElEQVR42u3WsU7CUBgF4PPfQuJ4N2USRidv7Avo4trrG8DoBk8APgGPIH2Dspk4sLoI5Q3KxoibiaHXONT219CrTRWG+23NSXqatD0tKSnG0CQBk9DgOQKTp1WYSTogP0KAT9tOnKCApVWEgp9AaDAsrcAEApxErUgK/DFhVqwxBsPSCszSa21I54fzPpgsrYpuCVBKXEICSOYTgMvTKtJJnMBxDh+Vz/VMvo1JQ+4e5ObgagPG1xhC/XCuH61zbcLrLn8xvUWtc00BGKHrnmu557l2Ba7AFbiCDy/lqa1gCgsTgUn5cWQpaHQxLbtGEzb7YOLY9Mwy+xps++QbFJi7+ejQ7oErcAUNWKi2FxiJHdIwTvCNr815llreg4su3aPcDf8bVNKbQeWpQLkRbIZghIYqppYCOoWNAtfm6b8/RZv653rKx/a3cw3LXHvHD+IMLRwBZkW9xROYPP0qH+T1KwrW69YKHTrJ0neOeIQuha6/4wAAAABJRU5ErkJggg==",value:"square"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAAA9UlEQVR42u3XMU4CQRSH8e8/WfptrSw8gdnKik20X46wR9ATyA28At5Aeov1AN7AbaWFxphgeBaEEEiAYngJLPM7wHzJzEsmT7fXeudG4ogMAbD4+n1Q8c2Vw+ErrQoDv4BZwJUUcBbMOyB8ZWAIY8k+1BDFSvW3AgIES83nkCjFkI1AwEEKXFggY68mn79oQM4ONuo9ldOIwN9IFXuonos65ooqDlDl/QZ516coBVIgBc4iMIsLjDnA3qICWc2YGTvZa+8x6kcrpww6/8gpcPKBjE1l8UwU6wtY81hjO7YEnv8UBSZ4asPijgnG0QhbH9f+3P8DQzw4j9QwBjIAAAAASUVORK5CYII=",value:"circle"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAADgElEQVR42q2YsXLbRhCG/z0wM+qMVAnTCHkCHckmqQwV9kyqQJ1SEXqCsE1lpkrcUV06UVXckeo8cWG4cyNi+QQBK7IL2KkQ7zKT0YRze4PjgPZXSot/d//lHe5AOIiO8VxpSm1CCf7DVlTZwjA+cI0DUFg6GiKHRjOMye6O6yMS6EQNMaIYB7E1JuaWq1YJ+q988XASGt9fBxK4tUczaLSHdxd+HwqCQaZKaByDVuUggyAS1uT0J53gSOgEl93Vmp2/CfkbNGBXqKi2DJC2MRI6bYy8WkydBHtzMGuQnpo5s/BDqxxZQ5qL+7mXQCeqpBi++Hhfj08/x9hPYmvT40oMOZqRL39ttJAXLKZG22sIKI5mYsj9MV3C9/L3zQMOsHlYv+2uKIPL193t+iMAUJM9u55wPYjWUenZ9C3XTxapnGJZPTNawGyvpE1q9NSBjtXfFLveL0ZoTX9CP/s9dACVCfmVGcPjXYrnSKEBMAp8eFFAYMYqo1OnhwxTAgYltLdQHN7HjzeQY5x3rs5rILhQ+b5HOo7+cetfJHD4S2NGCTxshYuXLFJU7qrYfamiVFYmq9/Lu1CC2fs4/HSUKquFk8Kex6kjL1I83oSftlohdQ1iFqP9ESGyd6n4ua6c/6cKjmeo4JIijIyQCqfKNYBq0WIwgYzwFShRIpxFuMYB6CysoPCpEIKocMWW4dGuZ+VO3cYivIBHOMKKbUfJqcMlnEBG+AqVcgMo0U6LLwrcIYC9dTc9rcWyLGQHUDkcOjlWaGL1xSj8NLEyczjIlXte26whxcpm53X46V2huLZL16S+qOIldzTufHM62ttLc9cgu+Sa/F3cVqbHNfwXTmpT0oBlKlD4Lxwdq5IS+WYhQMdRhWef/5WJ7S7hOgI2D90TSh2bvtufMANIe34TJr4u3/5/bIkYzz792OLX/7RVcGUnEESlGHawek8edsy1s1X1mc68oIn51Ru3P9pXNILALhdabHYmwxYCGqlyMESAwVCVvjy2JmtzfK8wN7fsH9+HyCgJHN9bXkAqqvB0AUFsE0paXEBEitZI+cAdbc3fLPEDTnAcW/y0eIPD11g1pzO0xi5NxhUEETw29fqP7pa+b9XH1v6yyDc10JBAsv741RvaUm+fJCj+2lyWxVEfQ1SGEZ2FbMHEzFt/DJFpotRqpEjodH9nRkG8Kw5/zvkXt6+Frvaoq2UAAAAASUVORK5CYII=",value:"plus"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAABO0lEQVR42u3XwU3DMBTG8f9z6D1MAGwQ0QXgwjXpBmGDdoJ2g45As4Fz5sAEhbBB2CA9o9QIqbT4EJvKqlQk/65Pet/Jn23BKUvVkkJSBpjVdtZ0OFzglKzIcZAyEUocBKexwcN0r5c4KAJJipMiWFCA+cDDvAcFsMBDFp45Hlmm7kgZsF01LVH038mhkE0rs7XG8pJ+LqXAUdej2X2HZVwwJ/spcxlrcvb6G/vgPH9PnUz1UNoHM3njoFL2AlVgy/GQHIY3mFxhSzlW6i5zRbDzvg9iQAyIAacI6DjWxj1V1Pyy1dhqPIwGxwat+pKaze6ZOGlaLBe76RBTjaZYmsY87p+TVT8lis6f4JFdJ7kZ/oBUTRsUcFvKE26TtT7pH415UJvKFT7ZmdX18TZhATU+OiigH6zrvxbyF7xxXVPNqJV1AAAAAElFTkSuQmCC",value:"box"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAABXklEQVR42u3XMVLCQBQG4P9toN8SaITOzqdcAE6Q2FnGzlJOIDfwCIYbhBPQ2iChs1wqKbFGWQuHgZ0dk5k8KcjkK1Psn9l9Ozs/Aa5+hCcwSrGGRvMUDoKDOVhA5LuXGRxRcKgIIv4KCv9NnzoA+QEGQpTlBuxSu4SAXfpTBO4GodUAmfkEYB0MLKMc85b8jrq9AoDdJDN0E9ML9rL5NYRYBzMw9m6Ddkoae63O8uMdIp07esDBpaILHLEMqS6OscKJ1QGFGsg109tniqDxB5s0R8ONIOAroRA5KN4SYskWhShA4anPQFd9iuqAOqAOOIuAT1nAFAVsKgpoxJjm/aOdNB9FL9pwg6jyh1z9ALvy6oOMcfuCwtirDyJuhaExAcxqAH2oDxwqRgl+hdklmaGc+lCCX2H8nsyQ4H5BT+5CyPLZ34NNQU+GiL9CAMd63V6hRy2UYld0v3h1v/0AaSVmczcpdeQAAAAASUVORK5CYII=",value:"octagon"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACMklEQVR42qWYMW7bMBSG/yc5gLeoU5EuVW5A2AeIPNhrlK1b7RM0OUHdE6Q9QZyxU521GcyOXRzeoNLksdJWoHGYkQgp8Tl432rj+0RKJkUTelF58hklZYhiG6yfvpgKPRB6GM3pBgdjF9sVOkklegeVJ/XOsIFQL0+kjF6cSBm9OJEyenGCeL2tSdsKAZSjxDH3RBGrv9p+RS+jS7qOJyiqb/eFMYiiVKpx3J8gmZ5PEK+XJYjTSxOk8vQPoxck9qdJupToHcbsC7TwSJc0+kvZIfr7AmcooAAYaPya6s5RPPiLOY0t/9xvsscblN73VkdXk4b/XXgBW29zePxUtEGGAFvhYmbgMW5e3onE6+nw6p0+WCp+bMJP1kAkEK45jyunDxP/r8NxRQKdt/YcEWh+XyACG0ABDlnAsgErC5ACx3suIIRIFLAGDLYSBUiDgbQoAA0OWWCqcYcI9tv0dQHK4TGYo0Uf9dES8A3RgD2Dx6SxBepuvS3D9dSeMyMYXcJjZgYKd+HkDNTMdCzXmWf0l1fbPE16NpzCFqTQ2Io09GEbDloar/AR4BM8SiUb//px6zb9ICHSu03fVHYBD8qSjVJyvV2Yyr14CUbh6f0XLyYh0gMECBJRvXcA2ZmTmkq8gIb04d2/3W/0Mv6UrGnYrT/8AFJBo0JIjoJy9gAiO0IxejdF3kRJ9WFAnnB6JuASQr0LyBNOzwX4hPzPEJd4e5u8wSmGiNPi+/7ioXfjfAbUHThrLHg5tQAAAABJRU5ErkJggg==",value:"random"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAABsElEQVR42u3WMU7DMBgF4Pfcha1m7BZuYMIB6ABd6QVQywnoDWgnxESOkIoLdC4DsLEAuQHpxEhygMaEFkV2qVQLGVSVfpv1R37JkGfDXdgPXw/0gQ7fwws4qzlv3+MlJUrcYbMxeUvgRMBVGwaWK88BNi29ByzyHsAUpsR7wDRCXi3yIoIjwpkKRBMBgKyIkwxbW5uDcHbb1x3O/gNExwPvAbc9XKOiz1qx56rQ/7auCYRdnkACOi0GSYoF468pFMy3zuaFzfhouKQUz6nwKX4aMox4Xn14VuzZPTmuphpExVwNjvsL279QVs8NBLuoUIo2LOV0Bd2BRbQpjWVHoA5TAFsdKzCATdrTPziTc5hS2HKsMoEtg0FPhI7N7YoRLOV0lYUnyh1yc8rZna2pJcB02k/SJRUxm0KxbgTnSOYbfK8MpUQXaj59jglH43seGgEPreaa/Mk/DGDmPYAjGPTI+/X95vF0lw1IADmuWhG2tjYH4UzJ2okOAGbTYZJ5D1BK3FFWZ/d+knquilqP0ji7e967SAcwqbW5eK1PXeO36/rtsbGLBmd1ra+enev6A/y4hlP+vFVkAAAAAElFTkSuQmCC",value:"tiny-plus"}];return(o,r)=>{const i=h;return a(),l("div",{class:"mt-[30rpx]"},[s("h1",{class:"text-base font-bold"},"码眼选择"),s("div",{class:"flex flex-wrap mt-[20rpx]"},[(a(),l(w,null,b(u,((a,l)=>s("div",{key:l,class:I(["code",{"code-active":e.modelValue==a.value}]),onClick:e=>t("update:modelValue",a.value)},[n(i,{class:"w-[32rpx] h-[32rpx]",src:a.icon},null,8,["src"])],10,["onClick"]))),64))])])}}}),[["__scopeId","data-v-29c90796"]]),Me=le(u({__name:"pixel-style-type",props:{template:{default:[]},modelValue:{default:"random"}},emits:["update:modelValue"],setup:(e,{emit:t})=>(u,o)=>{const r=p;return a(),y(r,{class:"mt-[24px]"},{default:d((()=>[n(r,{class:"text-base font-bold"},{default:d((()=>[c("码点形状")])),_:1}),n(r,{class:"flex flex-wrap mt-[20rpx]"},{default:d((()=>[(a(!0),l(w,null,b(e.template,((l,u)=>(a(),y(r,{key:u,class:I(["pixel flex justify-center items-center",{"pixel-active":e.modelValue==l.value}]),onClick:e=>t("update:modelValue",l.value)},{default:d((()=>[s("img",{class:"w-[40rpx] h-[40rpx]",src:l.preview_img},null,8,["src"]),s("span",{class:"ml-[14rpx]"},g(l.name),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1})}}),[["__scopeId","data-v-a0e23b26"]]);var ze=(e=>(e.MEWX="mewx",e.ZHISHUYUN="zhishuyun_qrcode",e))(ze||{});const Re=u({__name:"index",setup(e){const t=f("config"),u=f("getConfig"),m=f("pageIndex"),h=f("qrcodeForm"),A=f("promptParams"),V=f("consumptionCount"),b=f("isReceiving"),C=f("drawingHandler"),I=_(!1),E=async()=>{I.value=!0,await k(),I.value=!1,u()},T=()=>{uni.$u.debounce(E,500)},U=()=>{h.prompt_params=(e=>{let t="";for(const a in e)""!==e[a]&&(t+=`--${a} ${e[a]} `);return t.trim()})(A),C({params:h,isClear:!0})};return(e,u)=>{const f=o(r("l-textarea"),me),_=p,k=G,C=o(r("u-button"),ee);return a(),y(_,{class:"h-full flex flex-col"},{default:d((()=>[n(_,{class:"flex-1 min-h-0"},{default:d((()=>{var e;return[i("    生成选择    "),n(Ce,{modelList:null==(e=x(t))?void 0:e.draw_model,modelValue:x(h).model,"onUpdate:modelValue":u[0]||(u[0]=e=>x(h).model=e),balance:x(V),"onUpdate:balance":u[1]||(u[1]=e=>z(V)?V.value=e:null)},null,8,["modelList","modelValue","balance"]),n(k,{class:"h-full",style:{"border-top":"1px #f2f2f2 solid"},"scroll-y":!0,"refresher-enabled":!0,"scroll-anchoring":!0,"refresher-triggered":I.value,onRefresherpulling:T},{default:d((()=>[n(_,{class:"h-full p-[30rpx] relative"},{default:d((()=>[n(_,{class:"pb-[200rpx]"},{default:d((()=>{var e,o,r,c,m;return[x(h).model===x(ze).MEWX?(a(),l(w,{key:0},[i("    生成类型    "),n(Ee,{modelValue:x(h),"onUpdate:modelValue":u[2]||(u[2]=e=>z(h)?h.value=e:null)},null,8,["modelValue"]),i("    生成模式    "),n(Te,{modelValue:x(h).way,"onUpdate:modelValue":u[10]||(u[10]=e=>x(h).way=e)},{prefix:d((()=>{var e;return[i("    自定义关键词    "),n(De,{modelValue:x(h).prompt,"onUpdate:modelValue":u[3]||(u[3]=e=>x(h).prompt=e),example:null==(e=x(t))?void 0:e.example},null,8,["modelValue","example"])]})),common:d((()=>[i("    二维码显示程度    "),n(Se,{modelValue:x(A).iw,"onUpdate:modelValue":u[4]||(u[4]=e=>x(A).iw=e)},null,8,["modelValue"])])),mode:d((()=>{var e,a;return[i("    星月熊二维码风格模版    "),n(Fe,{modelValue:x(h).template_id,"onUpdate:modelValue":u[5]||(u[5]=e=>x(h).template_id=e),template:null==(a=null==(e=x(t))?void 0:e.mewx)?void 0:a.template},null,8,["modelValue","template"])]})),custom:d((()=>{var e,a;return[i("    模型选择    "),n(Le,{modelValue:x(h).model_id,"onUpdate:modelValue":u[6]||(u[6]=e=>x(h).model_id=e),modelList:null==(e=x(t))?void 0:e.mewx.model},null,8,["modelValue","modelList"]),i("    版本选择    "),n(qe,{modelValue:x(A).v,"onUpdate:modelValue":u[7]||(u[7]=e=>x(A).v=e),versionList:null==(a=x(t))?void 0:a.mewx.version},null,8,["modelValue","versionList"]),i("    图片尺寸    "),n(Qe,{modelValue:x(A).ar,"onUpdate:modelValue":u[8]||(u[8]=e=>x(A).ar=e)},null,8,["modelValue"]),i("    码眼选择    "),n(je,{modelValue:x(A).shape,"onUpdate:modelValue":u[9]||(u[9]=e=>x(A).shape=e)},null,8,["modelValue"])]})),_:1},8,["modelValue"])],64)):(a(),l(w,{key:1},[i("    生成模式 -- 知数云   "),i("    文字模式-输入内容    "),s("h3",{class:"text-base font-bold mb-[24rpx]"},[s("span",null,"生成内容"),s("span",{class:"text-error"},"*")]),n(f,{class:"mt-[15px]",modelValue:x(h).qr_content,"onUpdate:modelValue":u[11]||(u[11]=e=>x(h).qr_content=e),maxlength:"100",rows:4,placeholder:"请输入二维码内容, 文本或链接"},null,8,["modelValue"]),i("    自定义关键词    "),s("h3",{class:"text-base font-bold mt-[24rpx]"},[s("span",null,"生成关键词"),s("span",{class:"text-error"},"*")]),n(De,{modelValue:x(h).prompt,"onUpdate:modelValue":u[12]||(u[12]=e=>x(h).prompt=e),example:null==(e=x(t))?void 0:e.example},null,8,["modelValue","example"]),i("    图片尺寸    "),n(Qe,{modelValue:x(h).aspect_ratio,"onUpdate:modelValue":u[13]||(u[13]=e=>x(h).aspect_ratio=e)},null,8,["modelValue"]),i("    码点形状    "),n(Me,{modelValue:x(h).pixel_style,"onUpdate:modelValue":u[14]||(u[14]=e=>x(h).pixel_style=e),template:null==(r=null==(o=x(t))?void 0:o.zhishuyun_qrcode)?void 0:r.pixel_style},null,8,["modelValue","template"]),i("    码眼选择    "),n(je,{modelValue:x(h).marker_shape,"onUpdate:modelValue":u[15]||(u[15]=e=>x(h).marker_shape=e)},null,8,["modelValue"]),i("    知数云二维码风格模版    "),n(Be,{modelValue:x(h).template_id,"onUpdate:modelValue":u[16]||(u[16]=e=>x(h).template_id=e),way:x(h).way,"onUpdate:way":u[17]||(u[17]=e=>x(h).way=e),template:null==(m=null==(c=x(t))?void 0:c.zhishuyun_qrcode)?void 0:m.template},null,8,["modelValue","way","template"])],64))]})),_:1})])),_:1})])),_:1},8,["refresher-triggered"])]})),_:1}),n(_,{class:"bg-white z-10 w-full p-[20rpx]",style:{"box-shadow":"0 0 10rpx rgba(0, 0, 0, 0.2)"}},{default:d((()=>[n(_,{class:"flex justify-center items-center px-[20rpx] pb-[20rpx]"},{default:d((()=>[n(_,{class:"text-center text-[#999999]"},{default:d((()=>[x(V)?(a(),l(w,{key:0},[c(" 消耗 "),s("span",{class:"text-primary"},g(x(V)||0),1),c(" 条绘画条数 ")],64)):(a(),l(w,{key:1},[c(" 会员免费 ")],64))])),_:1})])),_:1}),i("    生成    "),n(_,{class:"flex w-full h-[82rpx] bg-[#f0f2f2] rounded-[999px] text-[#333333]"},{default:d((()=>[n(_,{class:"w-[50%] h-[82rpx] flex justify-center items-center",onClick:u[18]||(u[18]=e=>m.value=1)},{default:d((()=>[c(" 生成记录 ")])),_:1}),n(_,{class:"w-[50%]"},{default:d((()=>[n(C,{type:"primary","custom-style":{width:"100%",height:"82rpx",fontSize:"30rpx",margin:"0"},shape:"circle",loading:x(b),onClick:v(U,["stop"])},{default:d((()=>[c(" 立即生成 ")])),_:1},8,["loading","onClick"])])),_:1})])),_:1})])),_:1})])),_:1})}}}),Ke=()=>{const e=C(),a=_(0),l=_(0),s=Y({v:"3",iw:.45,seed:"",shape:"random",ar:"1:1"}),u=Y({model:"mewx",type:1,qr_content:"",qr_image:"",prompt:"",prompt_params:"",model_id:"",template_id:"",way:1,aspect_ratio:"1:1",pixel_style:"square",marker_shape:"square"}),o=_(!1),r=_([]),i=_(3),n=A(null),d=_([]),c=async e=>{try{(await X({title:"温馨提示",content:"是否确认删除当前记录?",confirmColor:"#FFC94D"})).confirm&&(await(a={ids:e},t.post({url:"/qrcode_records/delete",data:a,method:"POST"})),await m())}catch(l){console.log("删除失败记录",l)}var a},m=async()=>{var e;null==(e=null==n?void 0:n.value)||e.reload()},p=async e=>{v(),n.value=e.reload,d.value=e.lists,r.value=e.lists.filter((e=>1===e.status&&e.loading)).map((e=>e.id)),setTimeout((()=>{r.value.length&&x()}),100)},f=()=>{const a=async()=>{await m(),await e.getUser()},{start:l,end:s,result:u}=fe((async()=>{try{const e=await function(e){return t.post({url:"/qrcode_records/detail",data:e})}({records_id:r.value});return e.filter((e=>3==e.status||2==e.status||!e.loading)).length&&(s(),a()),e}catch(e){s(),a(),console.log("获取详情失败=>",e)}}),{totalTime:48e4,time:5e3,count:96,callback:a});return{start:l,end:s,result:u}},{start:x,end:v}=f();M((()=>{v()})),O((()=>{v()}));const g=async l=>{if(!e.isLogin)return U({url:"/pages/login/login"});if(2==l.params.type&&!l.params.qr_image)return uni.$u.toast("请上传二维码！");if(1==l.params.type&&!l.params.qr_content)return uni.$u.toast("请输入二维码内容！");if((1==l.params.way||ze.ZHISHUYUN===l.params.model)&&!l.params.prompt)return uni.$u.toast("请输入生成方式！");F({title:"请求中"});try{v(),await(s=l.params,t.post({url:"/qrcode/imagine",data:s,method:"POST"})),i.value=-1,a.value=1,o.value=!0,d.value.unshift({status:1}),null==n||n.value.complete(d.value),l.isClear&&(u.prompt="",u.qr_image="",u.qr_content=""),await m()}catch(r){if(d.value.splice(0,1),null==n||n.value.complete(d.value),"余额不足"===r){return void((await X({title:"绘画余额不足",content:"绘画余额不足，请前往充值",confirmText:"前往充值"})).confirm&&(e.isLogin?U({url:"/packages/pages/recharge/recharge"}):U({url:"/pages/login/login"})))}console.log("绘制失败=>",r),await m()}finally{setTimeout((()=>{D()}),1e3),o.value=!1}var s};return N("pageIndex",a),N("consumptionCount",l),N("promptParams",s),N("qrcodeForm",u),N("isReceiving",o),N("taskIndex",i),N("taskLists",[{name:"全部",value:-1},{name:"生成完成",value:3},{name:"进行中",value:1},{name:"生成失败",value:2}]),N("setTaskRecordFunc",p),N("deleteDrawing",c),N("drawingHandler",g),{pageIndex:a,consumptionCount:l,qrcodeForm:u,deleteDrawing:c,setTaskRecordFunc:p,useDetails:f,drawingHandler:g}},Ge=e=>{const{dataTransform:a}=e||{},l=Y({is_open:-1,draw_model:[],example:{status:1,content:""},mewx:{version:{},model:[],template:[]},zhishuyun_qrcode:{pixel_style:[],template:[]}}),s=async()=>{const e=await t.get({url:"/qrcode/config"});for(const t in e)l[t]=e[t];if(0!==l.draw_model.length){const e=l.draw_model.find((e=>e.default));a(e)}};return N("config",l),N("getConfig",s),{config:l,getConfig:s}},Ye=le(u({__name:"qrcode",setup(t){const s=H(),u=P(),{pageIndex:c,qrcodeForm:m,consumptionCount:f}=Ke(),{config:v,getConfig:g}=Ge({dataTransform(e){m.model=e.model,f.value=e.balance}});J((()=>g()));const h=Q((()=>{var e,t,a;return(null==(a=null==(t=null==(e=s.getTabbarConfig)?void 0:e.list)?void 0:t.filter((e=>"1"==e.is_show)))?void 0:a.map((e=>({pagePath:e.link.path}))))||[]})),A=Q((()=>(()=>{const e=h.value.findIndex((e=>e.pagePath===u.path));return"/"==u.path?0:e})()>=0));return(t,s)=>{var u,m;const f=o(r("page-meta"),e),g=o(r("u-loading"),W),h=o(r("tabbar"),Z),_=p,V=o(r("u-empty"),$);return a(),l(w,null,[n(f,{"page-style":t.$theme.pageStyle},null,8,["page-style"]),-1==(null==(u=x(v))?void 0:u.is_open)?(a(),y(_,{key:0,class:"w-full h-full bg-white rounded-[6px] flex items-center justify-center"},{default:d((()=>[n(g,{size:60,mode:"flower"}),n(h)])),_:1})):i("v-if",!0),0==(null==(m=x(v))?void 0:m.is_open)?(a(),y(_,{key:1,class:"w-full h-full bg-white rounded-[6px] flex items-center justify-center"},{default:d((()=>[n(V,{text:"艺术二维码功能未开启",mode:"favor"}),n(h)])),_:1})):(a(),y(_,{key:2,class:"qrcode-container"},{default:d((()=>[n(_,{class:I(["drawing-content",{"safe-area-inset-bottom":!x(A)}])},{default:d((()=>[E(n(_,{class:"h-full"},{default:d((()=>[n(Re,{class:"h-full"})])),_:1},512),[[T,0==x(c)]]),E(n(_,{class:"h-full"},{default:d((()=>[n(ke,{class:"h-full"})])),_:1},512),[[T,1==x(c)]])])),_:1},8,["class"]),n(h),i("    悬浮菜单    "),n(he)])),_:1}))],64)}}}),[["__scopeId","data-v-f31501e1"]]);export{Ye as default};
