"use strict";const e=require("../common/vendor.js");exports.usePolling=function(l,o){const t=e.ref(null),n=e.ref(null),{time:u=2e3,totalTime:c,count:r,callback:s=(()=>!1)}=o||{};let i=null,a=null,m=0;const v=()=>(console.log("count2:",r),a&&a<=Date.now()||r&&m>=r?(console.log("结束？？"),d(),void s()):(m++,void(i=setTimeout((()=>{l().then((e=>{t.value=e,v()})).catch((e=>{n.value=e}))}),u)))),d=()=>{setTimeout((()=>{clearTimeout(i),i=null,a=null,m=0}),0)};return{start:()=>{a=c?Date.now()+c:null,console.log("不是运行了吗？？"),v()},end:d,error:n,result:t}};
