"use strict";const e=require("../common/vendor.js"),t=require("../stores/navigationBarTitle.js");const r=e=>null==e||void 0===e;exports.addUnit=(e,t="rpx")=>Object.is(Number(e),NaN)?e:`${e}${t}`,exports.formatPrice=function({price:e,take:t="all",prec:r}){let[n,i=""]=(e+"").split(".");if(void 0!==r){for(let e=r-i.length;e>0;--e)i+="0";i=i.substr(0,r)}switch(t){case"int":return n;case"dec":return i;case"all":return n+"."+i}},exports.getRect=(t,r=!1,n)=>new Promise(((i,s)=>{let o=e.index.createSelectorQuery();n&&(o=e.index.createSelectorQuery().in(n)),o[r?"selectAll":"select"](t).boundingClientRect((function(e){return r&&Array.isArray(e)&&e.length||!r&&e?i(e):void s("找不到元素")})).exec()})),exports.navigateTo=function(n,i=!1,s="navigateTo"){const o=n.query?`${n.path}?${function(e){let t="";for(const n of Object.keys(e)){const i=e[n];r(i)||(t+=n+"="+i+"&")}return t.slice(0,-1)}(n.query)}`:n.path;t.useNavigationBarTitleStore().add({path:n.path,title:n.name}),"navigateTo"==s&&e.index.navigateTo({url:o}),"reLaunch"==s&&e.index.reLaunch({url:o}),"switchTab"==s&&e.index.switchTab({url:o})},exports.paramsToStr=function(t){let r="";if(e.isObject(t)){r="?";for(const e in t)r+=`${e}=${t[e]}&`;r=r.slice(0,-1)}return r},exports.series=function(...e){return function(t){return new Promise(((r,n)=>{const i=e.values(),s=e=>{const t=i.next();t.done?r(e):Promise.resolve(t.value(e)).then(s).catch(n)};s(t)}))}},exports.splitDomain=e=>e.includes("https://")?e.replace(/^https?:\/\//,""):e.includes("http://")?e.replace(/^http?:\/\//,""):e,exports.strToParams=function(e){if(""===e||"?"===e)return{};const t={};for(const r of e.split("&"))t[r.split("=")[0]]=r.split("=")[1];return t};
