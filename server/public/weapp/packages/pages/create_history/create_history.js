"use strict";const e=require("../../../common/vendor.js"),t=require("../../../common/assets.js"),i=require("../../../api/chat.js"),a=require("../../../hooks/useCopy.js"),r=require("../../../stores/app.js");if(require("../../../utils/request/index.js"),require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../stores/user.js"),require("../../../api/user.js"),require("../../../enums/constantEnums.js"),require("../../../mixins/share.js"),require("../../../api/task.js"),require("../../../utils/util.js"),require("../../../stores/navigationBarTitle.js"),require("../../../router/index.js"),require("../../../utils/cache.js"),require("../../../utils/auth.js"),require("../../../config/index.js"),require("../../../api/app.js"),!Array){(e.resolveComponent("u-image")+e.resolveComponent("z-paging")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-image/u-image.js")+o+(()=>"../../../node-modules/z-paging/components/z-paging/z-paging.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const o=()=>"../../components/creation-history-item/creation-history-item.js",s=e.defineComponent({__name:"create_history",setup(o){const{copy:s}=a.useCopy(),u=r.useAppStore(),n=e.useRouter(),l=e.reactive({id:0,type:2}),p=e.ref({}),c=e.ref(!1),m=e.reactive({title:"",text:""}),d=e.ref([]),v=e.shallowRef(),g=async(t,a)=>{var r;const o=(await i.getChatRecord({other_id:l.id,type:l.type,page_no:t,page_size:a})).lists.map((t=>{let i="";if(e.isArray(t.ask)){const e=(null==t?void 0:t.ask[0])||{};i=`${e.title}：${e.value}`}else i=t.ask;return{...t,title:i}}));null==(r=v.value)||r.complete(o)},h=async()=>{var t;(await e.index.showModal({title:"温馨提示",content:"删除的记录无法恢复，确定？"})).cancel||(await i.cleanChatRecord({type:l.type,other_id:l.id}),null==(t=v.value)||t.reload())};return e.onLoad((async e=>{var t;l.id=Number(null==e?void 0:e.id),await(async()=>{const e=await i.getCreationDetail({id:l.id});p.value=e})(),null==(t=v.value)||t.reload(!0)})),(i,a)=>e.e({a:i.$theme.navColor,b:i.$theme.navBgColor,c:i.$theme.pageStyle,d:e.p({src:p.value.image,width:"42",height:"42"}),e:e.t(p.value.name),f:d.value.length},d.value.length?{g:e.o(h)}:{},{h:p.value.name,i:e.f(d.value,((t,i,a)=>({a:e.f(t.reply,((i,r,o)=>({a:e.o(e.unref(s),r),b:e.o(h,r),c:e.o((e=>((e,t)=>{m.text=e,m.title=t,c.value=!0})(e,t.title)),r),d:e.o((i=>(async t=>{await n.navigateBack(),e.index.$emit("createRewrite",t.extra)})(t)),r),e:"13a06540-2-"+a+"-"+o+",13a06540-0",f:e.p({title:t.title,time:t.create_time,content:i,index:r,overflow:!0,"record-id":t.id,"show-rewrite":t.extra,showVoice:e.unref(u).getIsVoiceOpen}),g:r}))),b:t.id}))),j:t._imports_0$3,k:e.sr(v,"13a06540-0",{k:"pagingRef"}),l:e.o(g),m:e.o((e=>d.value=e)),n:e.p({auto:!1,"auto-show-back-to-top":!0,modelValue:d.value}),o:e.t(m.title),p:e.o((e=>c.value=e)),q:e.p({mode:"bottom","border-radius":"14",closeable:!0,modelValue:c.value})})}});wx.createPage(s);
