"use strict";const e=require("../../../../../common/vendor.js"),s=require("../../../../../stores/app.js"),r=require("../../../../../api/square.js"),u=require("../../../../../hooks/useLockFn.js");if(require("../../../../../api/app.js"),require("../../../../../utils/request/index.js"),require("../../../../../utils/request/http.js"),require("../../../../../enums/requestEnums.js"),require("../../../../../utils/request/cancel.js"),require("../../../../../stores/user.js"),require("../../../../../api/user.js"),require("../../../../../enums/constantEnums.js"),require("../../../../../mixins/share.js"),require("../../../../../api/task.js"),require("../../../../../utils/util.js"),require("../../../../../stores/navigationBarTitle.js"),require("../../../../../router/index.js"),require("../../../../../utils/cache.js"),require("../../../../../utils/auth.js"),require("../../../../../config/index.js"),!Array){(e.resolveComponent("u-button")+e.resolveComponent("u-popup")+e.resolveComponent("u-select"))()}Math||((()=>"../../../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js")+(()=>"../../../../../uni_modules/vk-uview-ui/components/u-select/u-select.js"))();const o=e.defineComponent({__name:"share-square",emits:["success","close"],setup(o,{expose:t,emit:a}){s.useAppStore();const i=e.ref(!1),n=e.ref(!1),c=e.ref([]),l=e.reactive({base64:"",is_base64:"",prompts:"",category_name:"",category_id:"",draw_records_id:""}),{lockFn:p,isLock:m}=u.useLockFn((async e=>{await r.shareDrawSquare(l),i.value=!1,a("success"),a("close")})),q=e=>{l.category_id=e[0].value,l.category_name=e[0].label},d=()=>{a("close")};return t({open:e=>{(async()=>{try{const e=await r.getDrawSquareCateLists();e.shift(),c.value=e}catch(e){console.log("获取绘画分类失败=>",e)}})(),i.value=!0,l.base64=e.base64,l.is_base64=e.is_base64,l.prompts=e.prompt_en||e.prompt,l.draw_records_id=e.id}}),(s,r)=>({a:e.t(l.category_name?l.category_name:"全部"),b:e.o((e=>n.value=!0)),c:e.o(e.unref(p)),d:e.p({type:"primary",shape:"circle",customStyle:{width:"220rpx"},loading:e.unref(m)}),e:e.o(d),f:e.o((e=>i.value=e)),g:e.p({mode:"center","border-radius":"14",duration:"16",modelValue:i.value}),h:e.o(q),i:e.o((e=>n.value=e)),j:e.p({list:c.value,valueName:"id",labelName:"name",confirmColor:s.$theme.primaryColor,modelValue:n.value})})}});wx.createComponent(o);
