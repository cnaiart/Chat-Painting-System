"use strict";const e=require("../../../../../common/vendor.js"),s=require("../../../../../common/assets.js"),r=require("../../../../../api/app.js"),i=require("../../../../../stores/user.js");if(require("../../../../../utils/request/index.js"),require("../../../../../utils/request/http.js"),require("../../../../../enums/requestEnums.js"),require("../../../../../utils/request/cancel.js"),require("../../../../../router/index.js"),require("../../../../../utils/cache.js"),require("../../../../../enums/constantEnums.js"),require("../../../../../config/index.js"),require("../../../../../api/user.js"),require("../../../../../mixins/share.js"),require("../../../../../api/task.js"),require("../../../../../utils/util.js"),require("../../../../../stores/navigationBarTitle.js"),require("../../../../../stores/app.js"),require("../../../../../utils/auth.js"),!Array){e.resolveComponent("u-icon")()}Math;const u=e.defineComponent({__name:"reference-image",props:{modelValue:{default:""}},emits:["update:modelValue"],setup(u,{emit:o}){const t=async()=>{if(!i.useUserStore().isLogin)return e.index.navigateTo({url:"/pages/login/login"});e.index.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:e=>{a(e.tempFilePaths[0])}})},a=async s=>{e.index.showLoading({title:"上传中"});try{const i=await r.uploadImage(s,{type:"draw"});o("update:modelValue",i.uri),e.index.hideLoading()}catch(i){e.index.hideLoading(),e.index.$u.toast(i),console.log("上传图片失败",i)}};return(r,i)=>e.e({a:!u.modelValue},u.modelValue?{c:e.o((e=>o("update:modelValue",""))),d:e.p({name:"close-circle-fill",color:"#ffffff",size:"40"}),e:u.modelValue,f:e.o(t),g:e.o((()=>{}))}:{b:s._imports_0$7},{h:e.o(t)})}}),o=e._export_sfc(u,[["__scopeId","data-v-566a63f0"]]);wx.createComponent(o);
