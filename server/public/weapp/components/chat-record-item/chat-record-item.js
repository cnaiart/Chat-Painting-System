"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),o=require("../../api/chat.js"),r=require("../../hooks/useCopy.js"),n=require("../../hooks/useLockFn.js"),i=require("../../stores/user.js"),s=require("../../stores/app.js");if(require("../../utils/request/index.js"),require("../../utils/request/http.js"),require("../../enums/requestEnums.js"),require("../../utils/request/cancel.js"),require("../../router/index.js"),require("../../utils/cache.js"),require("../../enums/constantEnums.js"),require("../../config/index.js"),require("../../api/user.js"),require("../../mixins/share.js"),require("../../api/task.js"),require("../../utils/util.js"),require("../../stores/navigationBarTitle.js"),require("../../utils/auth.js"),require("../../api/app.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("audio-play")+e.resolveComponent("u-loading"))()}Math||((()=>"../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../audio-play/audio-play.js")+u+(()=>"../../uni_modules/vk-uview-ui/components/u-loading/u-loading.js"))();const u=()=>"./text-item.js",a=e.defineComponent({__name:"chat-record-item",props:{recordId:null,type:null,content:{default:""},showCopyBtn:{type:Boolean,default:!0},showCollectBtn:{type:Boolean,default:!0},showRewriteBtn:{type:Boolean,default:!1},showPosterBtn:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},index:null,isCollect:null,avatar:null,time:{default:""},audio:null},emits:["close","rewrite","update","click-poster"],setup(u,{emit:a}){const l=u,c=i.useUserStore(),d=s.useAppStore(),{copy:p}=r.useCopy(),{lockFn:m}=n.useLockFn((async e=>{l.isCollect?(await o.cancelCollectChatRecord({collect_id:l.isCollect}),a("update",{index:l.index,value:0})):(await o.collectChatRecord({records_id:e}),a("update",{index:l.index,value:1}))})),h=e.computed((()=>d.getChatConfig.is_markdown&&"left"==l.type));return(o,r)=>e.e({a:e.p({name:"left"==u.type?u.avatar:e.unref(c).userInfo.avatar,size:60}),b:u.time},u.time?{c:e.t(u.time)}:{},{d:u.audio},u.audio?{e:e.p({url:u.audio,reverse:"right"===u.type,"bg-color":"#fff"}),f:"right"===u.type?1:""}:{},{g:e.unref(e.isArray)(u.content)},e.unref(e.isArray)(u.content)?{h:e.f(u.content,((t,o,r)=>({a:"eb513a0d-2-"+r,b:e.p({"is-markdown":e.unref(h),content:t,loading:u.loading,index:o,"record-id":u.recordId,"show-copy-btn":u.showCopyBtn&&"left"===u.type,"show-voice-btn":e.unref(d).getIsVoiceOpen}),c:o,d:o>0?1:""})))}:{i:e.p({"is-markdown":e.unref(h),content:u.content,loading:u.loading,"show-copy-btn":u.showCopyBtn&&"left"===u.type})},{j:u.loading},u.loading?{k:e.p({mode:"flower"})}:{},{l:e.n(`chat-record-item__${u.type}-content`),m:"right"==u.type},"right"==u.type?{n:t._imports_0$4,o:e.o((t=>e.unref(p)(u.content)))}:{},{p:!u.loading&&"left"===u.type},u.loading||"left"!==u.type?{}:e.e({q:u.showRewriteBtn},u.showRewriteBtn?{r:e.p({name:"reload",size:30}),s:e.o((e=>a("rewrite")))}:{},{t:u.showCollectBtn},u.showCollectBtn?{v:e.p({name:u.isCollect?"star-fill":"star",size:30}),w:u.isCollect?1:"",x:u.isCollect?"":1,y:e.o((t=>e.unref(m)(u.recordId)))}:{},{z:u.showPosterBtn},u.showPosterBtn?{A:e.p({name:"photo",size:30}),B:e.o((e=>a("click-poster",u.recordId)))}:{}),{C:"right"==u.type?1:"",D:e.n(`chat-record-item__${u.type}`)})}}),l=e._export_sfc(a,[["__scopeId","data-v-eb513a0d"]]);wx.createComponent(l);
