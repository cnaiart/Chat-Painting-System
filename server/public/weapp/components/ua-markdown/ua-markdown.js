"use strict";const e=require("../../common/vendor.js"),t=require("./lib/markdown-it.min.js"),l=require("../../hooks/useCopy.js");Math||n();const n=()=>"../../uni_modules/mp-html/components/mp-html/mp-html.js",s={__name:"ua-markdown",props:{content:String,showLine:{type:[Boolean,String],default:!0}},setup(n){const s=n,o=[],r=t.mt({html:!0,breaks:!0,typographer:!0,linkify:!0,lineNumbers:!0,highlight:function(t,l){let n="";try{n=e.common.highlightAuto(t).value}catch(c){n=r.utils.escapeHtml(t)}let a=n.split(/\n/).slice(0,-1).map(((e,t)=>""==e?"":'<li><span class="line-num" data-line="'+(t+1)+'"></span>'+e+"</li>")).join("");a=s.showLine?'<ol style="padding: 0px 30px;">'+a+"</ol>":'<ol style="padding: 0px 7px;list-style:none;">'+a+"</ol>",o.push(t);let p='<div class="markdown-wrap">';return p+='<div class="copy-line" style="text-align: right;font-size: 12px; margin-bottom: -10px;border-radius: 5px 5px 0 0;">',p+=`${l}<a class="code-copy-btn" code-data-index="${o.length-1}">复制代码</a>`,p+="</div>",p+=`<pre class="hljs" style="padding:10px 8px;margin:5px 0;overflow: auto;display: block;border-radius: 5px;"><code>${a}</code></pre>`,p+="</div>",p}});r.use(e.markdownItKatex);const a=e=>{if(!e)return;let t="";if((e=(e=e.replace(/<br>|<br\/>|<br \/>/g,"\n")).replace(/&nbsp;/g," ")).split("```").length%2){let l=e;"\n"!=l[l.length-1]&&(l+="\n"),t=r.render(l)}else t=r.render(e);return t=t.replace(/<table/g,'<table class="table"'),t=t.replace(/<tr/g,'<tr class="tr"'),t=t.replace(/<th>/g,'<th class="th">'),t=t.replace(/<td/g,'<td class="td"'),t=t.replace(/<hr>|<hr\/>|<hr \/>/g,'<hr class="hr">'),t},p=e=>{const{"code-data-index":t,class:n}=e;if("code-copy-btn"==n){const{copy:e}=l.useCopy();console.log(o[t]),e(o[t])}};return(t,l)=>({a:e.o(p),b:e.p({selectable:!0,scrollTable:!0,content:a(n.content)})})}};wx.createComponent(s);
