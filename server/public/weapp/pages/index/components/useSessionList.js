"use strict";const e=require("../../../common/vendor.js"),a=require("../../../api/chat.js"),t=e.ref(0),s=e.ref([]);exports.useSessionList=function(){const i=async()=>{try{const e=await a.getChatCategoryLists({page_type:0});return s.value=(null==e?void 0:e.lists)||[],0===t.value&&n(),s.value}catch(e){s.value=[],n()}},n=()=>{var e;t.value=(null==(e=s.value[0])?void 0:e.id)||0},o=e.computed((()=>{var e;return(null==(e=s.value.find((e=>e.id===t.value)))?void 0:e.name)||""}));return{getSessionLists:i,sessionActive:t,sessionLists:s,sessionAdd:async()=>{await a.chatCategoryAdd({}),await i(),n()},sessionEdit:async(e,t)=>{await a.chatCategoryEdit({id:e,name:t}),i()},sessionDelete:async t=>{(await e.index.showModal({title:"确定删除该会话？"})).confirm&&(await a.chatCategoryDelete({id:t}),await i(),n())},sessionClear:async()=>{(await e.index.showModal({title:"确定清除所有会话？"})).confirm&&(await a.chatCategoryClear(),await i(),n())},currentSession:o}};
