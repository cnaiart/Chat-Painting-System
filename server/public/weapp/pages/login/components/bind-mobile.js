"use strict";const e=require("../../../common/vendor.js"),s=require("../../../api/user.js");require("../../../utils/request/index.js");const o=require("../../../stores/user.js");if(require("../../../utils/request/http.js"),require("../../../enums/requestEnums.js"),require("../../../utils/request/cancel.js"),require("../../../router/index.js"),require("../../../utils/cache.js"),require("../../../enums/constantEnums.js"),require("../../../config/index.js"),require("../../../mixins/share.js"),require("../../../api/task.js"),require("../../../utils/util.js"),require("../../../stores/navigationBarTitle.js"),require("../../../stores/app.js"),require("../../../api/app.js"),require("../../../utils/auth.js"),!Array){(e.resolveComponent("u-icon")+e.resolveComponent("u-button")+e.resolveComponent("u-popup"))()}Math||((()=>"../../../uni_modules/vk-uview-ui/components/u-icon/u-icon.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-button/u-button.js")+(()=>"../../../uni_modules/vk-uview-ui/components/u-popup/u-popup.js"))();const u=e.defineComponent({__name:"bind-mobile",props:{show:{type:Boolean},userInfo:{type:Object}},emits:["update:show","success","close"],setup(u,{emit:r}){const t=u,i=e.computed({get:()=>t.show,set(e){r("update:show",e)}});e.shallowRef(),e.ref(""),o.useUserStore(),e.reactive({type:"bind",mobile:"",code:""});const n=async o=>{var u;const{encryptedData:i,iv:n,code:a}=o.detail,p={code:a,encrypted_data:i,iv:n};i&&(await s.userMnpMobile({...p},{token:null==(u=t.userInfo)?void 0:u.token}),e.index.$u.toast("绑定成功"),r("success"))};return(s,o)=>({a:e.p({name:"weixin-fill",size:"40"}),b:e.o(n),c:e.p({type:"primary",shape:"circle","hover-class":"none","open-type":"getPhoneNumber"}),d:e.o((e=>r("close"))),e:e.o((s=>e.isRef(i)?i.value=s:null)),f:e.p({mode:"bottom","border-radius":"14","mask-close-able":!1,"safe-area-inset-bottom":!0,closeable:!0,modelValue:e.unref(i)})})}});wx.createComponent(u);
